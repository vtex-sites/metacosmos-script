import{bs as Vu,bt as Qt,bu as Uu,bv as jn,bw as Fr,bx as zu}from"./app.js";import{by as qc,bz as Qc,bA as Yc,bB as Hc,bC as Xc,bD as Jc,bE as Kc,bF as Zc,bG as el,bx as tl,bH as rl,bb as nl,bI as al}from"./app.js";import{t as Gu,m as gt}from"./index.74a6eb45.js";import{h as il}from"./index.74a6eb45.js";import{d as ul}from"./is-browser-supported.53d87458.js";var Wu=Object.defineProperty,qu=(p,h,i)=>h in p?Wu(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,vt=(p,h,i)=>(qu(p,typeof h!="symbol"?h+"":h,i),i);class Qu{constructor(h){vt(this,"_buffer"),this._buffer=new ArrayBuffer(h)}get buffer(){return this._buffer}get byteLength(){return this._buffer.byteLength}get byteOffset(){return 0}set(){}}class Yu{constructor(h){vt(this,"ptr",-1),vt(this,"length"),vt(this,"data"),this.length=h,this.data=new Qu(h)}}class Hu{constructor(h,i,S){this._module=h,this._byteOffset=i,this._byteLength=S}get buffer(){return this._module.HEAPU8.buffer}get byteLength(){return this._byteLength}get byteOffset(){return this._byteOffset}set(h){return this._module.HEAPU8.set(h,this._byteOffset)}}class Xu{constructor(h){vt(this,"_module"),this._module=h}allocate(h){const i=this._module._malloc(h);return{ptr:i,length:h,data:new Hu(this._module,i,h)}}release(h){this._module._free(h)}reset(){}}const Ju=({FS:p})=>{const h=i=>{try{return p.lstat(i),!0}catch(S){if(S.errno===44||S.code==="ENOENT")return!1;throw S}};return{writeFile:(i,S)=>{const F=i.split("/");F[0]===""&&F.shift(),F.length>1&&F.reduce((M,A)=>(h(M)||p.mkdir(M),`${M}/${A}`)),p.writeFile(i,S)}}},Ku=["isAliasOf","clone","delete","isDeleted","deleteLater"],Zu=["size","get","set","push_back"],Rn=p=>{if(p==null||typeof p!="function")return!1;const{prototype:h}=p;return h?Ku.every(i=>i in h):!1},Nn=p=>p==null||typeof p!="object"?!1:Rn(p.constructor),An=p=>Nn(p)&&Zu.every(h=>h in p);var ec=Object.defineProperty,tc=(p,h,i)=>h in p?ec(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,Mn=(p,h,i)=>(tc(p,typeof h!="symbol"?h+"":h,i),i);class rc{constructor(h){Mn(this,"_fd"),Mn(this,"_cache",new Map),this._fd=h}get(h){if(Array.isArray(h))return h.map(A=>this.get(A));const i=h.split("."),S=i.length;let F=S,M=this._fd;for(let A=!1;!A&&F>0;--F){const R=i.slice(0,F).join(".");this._cache.has(R)&&(A=!0,M=this._cache.get(R),++F)}for(;M!=null&&F<S;++F){const A=i[F];let R=M[A];if(typeof R>"u"){const U="get"+A[0].toUpperCase()+A.slice(1);R=M[U]}if(typeof R>"u"&&An(M)){const U=parseInt(A);isNaN(U)||(R=M.get(U))}if(typeof R=="function")try{R=R.apply(M)}catch{R=void 0}const re=i.slice(0,F+1).join(".");if(h===re&&An(R)){const U=R;R=new Array(U.size());for(let V=0,ae=U.size();V<ae;++V)R[V]=U.get(V)}this._cache.set(re,M=R)}return F===S?M:void 0}addTimestampUs(h){this._fd.addTimestampUs(h)}}var nc=(()=>{var p=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(i){i=i||{};var i=typeof i<"u"?i:{},S,F;i.ready=new Promise(function(e,t){S=e,F=t}),i.expectedDataFileDownloads||(i.expectedDataFileDownloads=0),i.expectedDataFileDownloads++,function(){if(!i.ENVIRONMENT_IS_PTHREAD){var e=function(t){typeof window=="object"?window.encodeURIComponent(window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/"):typeof process>"u"&&typeof location<"u"&&encodeURIComponent(location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/");var r="BanubaSDK.data",n="BanubaSDK.data";typeof i.locateFilePackage=="function"&&!i.locateFile&&(i.locateFile=i.locateFilePackage,Z("warning: you defined Module.locateFilePackage, that has been renamed to Module.locateFile (using your locateFilePackage for now)"));var a=i.locateFile?i.locateFile(n,""):n,o=t.remote_package_size;function u(m,v,g,C){var k=new XMLHttpRequest;k.open("GET",m,!0),k.responseType="arraybuffer",k.onprogress=function(P){var T=m,L=v;if(P.total&&(L=P.total),P.loaded){k.addedTotal?i.dataFileDownloads[T].loaded=P.loaded:(k.addedTotal=!0,i.dataFileDownloads||(i.dataFileDownloads={}),i.dataFileDownloads[T]={loaded:P.loaded,total:L});var w=0,x=0,O=0;for(var $ in i.dataFileDownloads){var H=i.dataFileDownloads[$];w+=H.total,x+=H.loaded,O++}w=Math.ceil(w*i.expectedDataFileDownloads/O),i.setStatus&&i.setStatus("Downloading data... ("+x+"/"+w+")")}else i.dataFileDownloads||i.setStatus&&i.setStatus("Downloading data...")},k.onerror=function(P){throw new Error("NetworkError for: "+m)},k.onload=function(P){if(k.status==200||k.status==304||k.status==206||k.status==0&&k.response){var T=k.response;g(T)}else throw new Error(k.statusText+" : "+k.responseURL)},k.send(null)}var c=null,l=i.getPreloadedPackage?i.getPreloadedPackage(a,o):null;l||u(a,o,function(m){c?(c(m),c=null):l=m});function d(){function m(P,T){if(!P)throw T+new Error().stack}i.FS_createPath("/","bnb_js",!0,!0),i.FS_createPath("/","bnb_shaders",!0,!0),i.FS_createPath("/bnb_shaders","bnb",!0,!0),i.FS_createPath("/bnb_shaders/bnb","lib",!0,!0),i.FS_createPath("/","frx",!0,!0);function v(P,T,L){this.start=P,this.end=T,this.audio=L}v.prototype={requests:{},open:function(P,T){this.name=T,this.requests[T]=this,i.addRunDependency("fp "+this.name)},send:function(){},onload:function(){var P=this.byteArray.subarray(this.start,this.end);this.finish(P)},finish:function(P){var T=this;i.FS_createDataFile(this.name,null,P,!0,!0,!0),i.removeRunDependency("fp "+T.name),this.requests[this.name]=null}};for(var g=t.files,C=0;C<g.length;++C)new v(g[C].start,g[C].end,g[C].audio||0).open("GET",g[C].filename);function k(P){m(P,"Loading data file failed."),m(P.constructor.name===ArrayBuffer.name,"bad input to processPackageData");var T=new Uint8Array(P);v.prototype.byteArray=T;for(var L=t.files,w=0;w<L.length;++w)v.prototype.requests[L[w].filename].onload();i.removeRunDependency("datafile_BanubaSDK.data")}i.addRunDependency("datafile_BanubaSDK.data"),i.preloadResults||(i.preloadResults={}),i.preloadResults[r]={fromCache:!1},l?(k(l),l=null):c=k}i.calledRun?d():(i.preRun||(i.preRun=[]),i.preRun.push(d))};e({files:[{filename:"/bnb_js/.empty",start:0,end:20},{filename:"/bnb_js/background.js",start:20,end:3353},{filename:"/bnb_js/console.js",start:3353,end:3913},{filename:"/bnb_js/global.js",start:3913,end:4294},{filename:"/bnb_js/legacy.js",start:4294,end:8571},{filename:"/bnb_js/light_streaks.js",start:8571,end:18278},{filename:"/bnb_js/timers.js",start:18278,end:21597},{filename:"/bnb_shaders/.empty",start:21597,end:21616},{filename:"/bnb_shaders/bnb/anim_transform.glsl",start:21616,end:21779},{filename:"/bnb_shaders/bnb/color_spaces.glsl",start:21779,end:27626},{filename:"/bnb_shaders/bnb/decode_int1010102.glsl",start:27626,end:28315},{filename:"/bnb_shaders/bnb/get_bone.glsl",start:28315,end:28737},{filename:"/bnb_shaders/bnb/get_transform.glsl",start:28737,end:29376},{filename:"/bnb_shaders/bnb/glsl.frag",start:29376,end:29938},{filename:"/bnb_shaders/bnb/glsl.vert",start:29938,end:30719},{filename:"/bnb_shaders/bnb/lib/apply_light_streaks.frag",start:30719,end:31031},{filename:"/bnb_shaders/bnb/lib/apply_light_streaks.vert",start:31031,end:31280},{filename:"/bnb_shaders/bnb/lib/auto_morph.frag",start:31280,end:31393},{filename:"/bnb_shaders/bnb/lib/auto_morph.vert",start:31393,end:32005},{filename:"/bnb_shaders/bnb/lib/auto_morph_fisheye.frag",start:32005,end:32118},{filename:"/bnb_shaders/bnb/lib/auto_morph_fisheye.vert",start:32118,end:32625},{filename:"/bnb_shaders/bnb/lib/beauty_morph.frag",start:32625,end:32739},{filename:"/bnb_shaders/bnb/lib/beauty_morph.vert",start:32739,end:33888},{filename:"/bnb_shaders/bnb/lib/bg_blur_downscale.frag",start:33888,end:34762},{filename:"/bnb_shaders/bnb/lib/bg_blur_downscale.vert",start:34762,end:34961},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale.frag",start:34961,end:35956},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale.vert",start:35956,end:36291},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale_apply.frag",start:36291,end:37496},{filename:"/bnb_shaders/bnb/lib/camera.frag",start:37496,end:38077},{filename:"/bnb_shaders/bnb/lib/camera.vert",start:38077,end:38396},{filename:"/bnb_shaders/bnb/lib/camera_bgmask.frag",start:38396,end:39155},{filename:"/bnb_shaders/bnb/lib/camera_bgmask.vert",start:39155,end:39544},{filename:"/bnb_shaders/bnb/lib/copy_pixels.frag",start:39544,end:39718},{filename:"/bnb_shaders/bnb/lib/copy_pixels.vert",start:39718,end:39967},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_0.frag",start:39967,end:40953},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_0.vert",start:40953,end:41538},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_1.frag",start:41538,end:42524},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_1.vert",start:42524,end:43109},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_2.frag",start:43109,end:44095},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_2.vert",start:44095,end:44680},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_3.frag",start:44680,end:45666},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_3.vert",start:45666,end:46251},{filename:"/bnb_shaders/bnb/lib/gltf.frag",start:46251,end:48685},{filename:"/bnb_shaders/bnb/lib/gltf.vert",start:48685,end:49934},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss.frag",start:49934,end:52341},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss.vert",start:52341,end:53590},{filename:"/bnb_shaders/bnb/lib/init_light_streaks.frag",start:53590,end:53920},{filename:"/bnb_shaders/bnb/lib/init_light_streaks.vert",start:53920,end:54169},{filename:"/bnb_shaders/bnb/lib/mesh_morph.frag",start:54169,end:54283},{filename:"/bnb_shaders/bnb/lib/mesh_morph.vert",start:54283,end:56166},{filename:"/bnb_shaders/bnb/lib/morph_apply.frag",start:56166,end:56509},{filename:"/bnb_shaders/bnb/lib/morph_apply.vert",start:56509,end:58691},{filename:"/bnb_shaders/bnb/lib/morph_blur.frag",start:58691,end:60014},{filename:"/bnb_shaders/bnb/lib/morph_blur.vert",start:60014,end:60340},{filename:"/bnb_shaders/bnb/lib/retouch.frag",start:60340,end:64060},{filename:"/bnb_shaders/bnb/lib/retouch.vert",start:64060,end:64618},{filename:"/bnb_shaders/bnb/lib/static_pos.frag",start:64618,end:64729},{filename:"/bnb_shaders/bnb/lib/static_pos.vert",start:64729,end:64995},{filename:"/bnb_shaders/bnb/lib/uv_morph.frag",start:64995,end:65108},{filename:"/bnb_shaders/bnb/lib/uv_morph.vert",start:65108,end:65615},{filename:"/bnb_shaders/bnb/lib/vbg.frag",start:65615,end:66371},{filename:"/bnb_shaders/bnb/lib/vbg.vert",start:66371,end:67411},{filename:"/bnb_shaders/bnb/lut.glsl",start:67411,end:71940},{filename:"/bnb_shaders/bnb/math.glsl",start:71940,end:71940},{filename:"/bnb_shaders/bnb/matrix_operations.glsl",start:71940,end:72424},{filename:"/bnb_shaders/bnb/morph_transform.glsl",start:72424,end:73482},{filename:"/bnb_shaders/bnb/quat_rotation.glsl",start:73482,end:74876},{filename:"/bnb_shaders/bnb/sample_camera.glsl",start:74876,end:75813},{filename:"/bnb_shaders/bnb/samplers_declaration.glsl",start:75813,end:78557},{filename:"/bnb_shaders/bnb/texture_bicubic.glsl",start:78557,end:79915},{filename:"/bnb_shaders/bnb/textures_lookup.glsl",start:79915,end:81115},{filename:"/bnb_shaders/bnb/transform_uv.glsl",start:81115,end:83552},{filename:"/bnb_shaders/bnb/version.glsl",start:83552,end:83774},{filename:"/frx/frx.js",start:83774,end:86296},{filename:"/resources-versions.txt",start:86296,end:88611},{filename:"/watermark.png",start:88611,end:91097},{filename:"/watermark_blurred.png",start:91097,end:113530}],remote_package_size:113530})}}();var M=Object.assign({},i),A="./this.program",R=(e,t)=>{throw t},re=!0,U=!1,V="";function ae(e){return i.locateFile?i.locateFile(e,V):V+e}var me,oe;typeof document<"u"&&document.currentScript&&(V=document.currentScript.src),p&&(V=p),V.indexOf("blob:")!==0?V=V.substr(0,V.replace(/[?#].*/,"").lastIndexOf("/")+1):V="",me=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},oe=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)};var ge=i.print||console.log.bind(console),Z=i.printErr||console.warn.bind(console);Object.assign(i,M),M=null,i.thisProgram&&(A=i.thisProgram),i.quit&&(R=i.quit);var Kt=4,tt;i.wasmBinary&&(tt=i.wasmBinary);var On=i.noExitRuntime||!0;typeof WebAssembly!="object"&&Fe("no native wasm support detected");var bt,Qe=!1,_t;function Oe(e,t){e||Fe(t)}var jr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ye(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&jr)return jr.decode(e.subarray(t,a));for(var o="";t<a;){var u=e[t++];if(!(u&128)){o+=String.fromCharCode(u);continue}var c=e[t++]&63;if((u&224)==192){o+=String.fromCharCode((u&31)<<6|c);continue}var l=e[t++]&63;if((u&240)==224?u=(u&15)<<12|c<<6|l:u=(u&7)<<18|c<<12|l<<6|e[t++]&63,u<65536)o+=String.fromCharCode(u);else{var d=u-65536;o+=String.fromCharCode(55296|d>>10,56320|d&1023)}}return o}function ee(e,t){return e?Ye(G,e,t):""}function yt(e,t,r,n){if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<e.length;++u){var c=e.charCodeAt(u);if(c>=55296&&c<=57343){var l=e.charCodeAt(++u);c=65536+((c&1023)<<10)|l&1023}if(c<=127){if(r>=o)break;t[r++]=c}else if(c<=2047){if(r+1>=o)break;t[r++]=192|c>>6,t[r++]=128|c&63}else if(c<=65535){if(r+2>=o)break;t[r++]=224|c>>12,t[r++]=128|c>>6&63,t[r++]=128|c&63}else{if(r+3>=o)break;t[r++]=240|c>>18,t[r++]=128|c>>12&63,t[r++]=128|c>>6&63,t[r++]=128|c&63}}return t[r]=0,r-a}function ie(e,t,r){return yt(e,G,t,r)}function Be(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t}var wt,X,G,se,Y,_,D,ue,Ar;function Mr(e){wt=e,i.HEAP8=X=new Int8Array(e),i.HEAP16=se=new Int16Array(e),i.HEAP32=_=new Int32Array(e),i.HEAPU8=G=new Uint8Array(e),i.HEAPU16=Y=new Uint16Array(e),i.HEAPU32=D=new Uint32Array(e),i.HEAPF32=ue=new Float32Array(e),i.HEAPF64=Ar=new Float64Array(e)}var Lr,Rr=[],Nr=[],Ir=[];function Bn(){return On}function $n(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)zn(i.preRun.shift());Zt(Rr)}function Vn(){!i.noFSInit&&!s.init.initialized&&s.init(),s.ignorePermissions=!1,Zt(Nr)}function Un(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Wn(i.postRun.shift());Zt(Ir)}function zn(e){Rr.unshift(e)}function Gn(e){Nr.unshift(e)}function Wn(e){Ir.unshift(e)}var $e=0,rt=null;function nt(e){$e++,i.monitorRunDependencies&&i.monitorRunDependencies($e)}function Ve(e){if($e--,i.monitorRunDependencies&&i.monitorRunDependencies($e),$e==0&&rt){var t=rt;rt=null,t()}}function Fe(e){i.onAbort&&i.onAbort(e),e="Aborted("+e+")",Z(e),Qe=!0,_t=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw F(t),t}var qn="data:application/octet-stream;base64,";function Or(e){return e.startsWith(qn)}var be;be="BanubaSDK.wasm",Or(be)||(be=ae(be));function Br(e){try{if(e==be&&tt)return new Uint8Array(tt);throw"both async and sync fetching of the wasm failed"}catch(t){Fe(t)}}function Qn(){return!tt&&re&&typeof fetch=="function"?fetch(be,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+be+"'";return e.arrayBuffer()}).catch(function(){return Br(be)}):Promise.resolve().then(function(){return Br(be)})}function Yn(){var e={env:_n,wasi_snapshot_preview1:_n};function t(u,c){var l=u.exports;i.asm=l,bt=i.asm.memory,Mr(bt.buffer),Lr=i.asm.__indirect_function_table,Gn(i.asm.__wasm_call_ctors),Ve()}nt();function r(u){t(u.instance)}function n(u){return Qn().then(function(c){return WebAssembly.instantiate(c,e)}).then(function(c){return c}).then(u,function(c){Z("failed to asynchronously prepare wasm: "+c),Fe(c)})}function a(){return!tt&&typeof WebAssembly.instantiateStreaming=="function"&&!Or(be)&&typeof fetch=="function"?fetch(be,{credentials:"same-origin"}).then(function(u){var c=WebAssembly.instantiateStreaming(u,e);return c.then(r,function(l){return Z("wasm streaming compile failed: "+l),Z("falling back to ArrayBuffer instantiation"),n(r)})}):n(r)}if(i.instantiateWasm)try{var o=i.instantiateWasm(e,t);return o}catch(u){Z("Module.instantiateWasm callback failed with error: "+u),F(u)}return a().catch(F),{}}var N,J;function Hn(){return/electron/i.test(navigator.userAgent)}function Xn(){function e(){var a=self.top,o=self.parent,u=[];do{try{u.push(o.location.href)}catch{}o&&(o=o.parent)}while(o&&o!==a);return u}var t=[self.location.href].concat(Array.from("ancestorOrigins"in self.location?self.location.ancestorOrigins:e())).map(function(a){return new URL(a.replace(/^blob:/,"")).hostname}).find(function(a){return Boolean(a)}),r=Be(t)+1,n=we(r);return ie(t,n,r),n}function Jn(e){const t=ee(e),r=s.readFile(t),n=document.createElement("video"),a=URL.createObjectURL(new Blob([r],{type:"video/mp4"})),o=i.proxyVideoRequestsTo;return n.muted=!0,n.autoplay=!1,n.controls=!1,n.playsInline=!0,n.src=o?o+encodeURIComponent(a):a,te.toHandle(n)}function Kn(e){const t=te.toValue(e);URL.revokeObjectURL(t.src),t.src=""}function Zn(){return i.getRandomValue()}function ea(){if(i.getRandomValue===void 0)try{var e=typeof window=="object"?window:self,t=typeof e.crypto<"u"?e.crypto:e.msCrypto,r=function(){var o=new Uint32Array(1);return t.getRandomValues(o),o[0]>>>0};r(),i.getRandomValue=r}catch{try{var n=require("crypto"),a=function(){var o=n.randomBytes(4);return(o[0]<<24|o[1]<<16|o[2]<<8|o[3])>>>0};a(),i.getRandomValue=a}catch{throw"No secure random number generator found"}}}function $r(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Zt(e){for(;e.length>0;)e.shift()(i)}function ta(e){return we(e+24)+24}function ra(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){D[this.ptr+4>>2]=t},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(t){D[this.ptr+8>>2]=t},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_refcount=function(t){_[this.ptr>>2]=t},this.set_caught=function(t){t=t?1:0,X[this.ptr+12>>0]=t},this.get_caught=function(){return X[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,X[this.ptr+13>>0]=t},this.get_rethrown=function(){return X[this.ptr+13>>0]!=0},this.init=function(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=_[this.ptr>>2];_[this.ptr>>2]=t+1},this.release_ref=function(){var t=_[this.ptr>>2];return _[this.ptr>>2]=t-1,t===1},this.set_adjusted_ptr=function(t){D[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return D[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=xn(this.get_type());if(t)return D[this.excPtr>>2];var r=this.get_adjusted_ptr();return r!==0?r:this.excPtr}}function na(e,t,r){var n=new ra(e);throw n.init(t,r),e}var W={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];a==="."?e.splice(n,1):a===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=W.isAbs(e),r=e.substr(-1)==="/";return e=W.normalizeArray(e.split("/").filter(n=>!!n),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=W.splitPath(e),r=t[0],n=t[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)},basename:e=>{if(e==="/")return"/";e=W.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return W.normalize(e.join("/"))},join2:(e,t)=>W.normalize(e+"/"+t)};function Vr(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}else return()=>Fe("randomDevice")}var Pe={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:s.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t=W.isAbs(n)}return e=W.normalizeArray(e.split("/").filter(a=>!!a),!t).join("/"),(t?"/":"")+e||"."},relative:(e,t)=>{e=Pe.resolve(e).substr(1),t=Pe.resolve(t).substr(1);function r(d){for(var m=0;m<d.length&&d[m]==="";m++);for(var v=d.length-1;v>=0&&d[v]==="";v--);return m>v?[]:d.slice(m,v-m+1)}for(var n=r(e.split("/")),a=r(t.split("/")),o=Math.min(n.length,a.length),u=o,c=0;c<o;c++)if(n[c]!==a[c]){u=c;break}for(var l=[],c=u;c<n.length;c++)l.push("..");return l=l.concat(a.slice(u)),l.join("/")}};function er(e,t,r){var n=r>0?r:Be(e)+1,a=new Array(n),o=yt(e,a,0,a.length);return t&&(a.length=o),a}var Ue={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Ue.ttys[e]={input:[],output:[],ops:t},s.registerDevice(e,Ue.stream_ops)},stream_ops:{open:function(e){var t=Ue.ttys[e.node.rdev];if(!t)throw new s.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,r,n,a){if(!e.tty||!e.tty.ops.get_char)throw new s.ErrnoError(60);for(var o=0,u=0;u<n;u++){var c;try{c=e.tty.ops.get_char(e.tty)}catch{throw new s.ErrnoError(29)}if(c===void 0&&o===0)throw new s.ErrnoError(6);if(c==null)break;o++,t[r+u]=c}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n,a){if(!e.tty||!e.tty.ops.put_char)throw new s.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch{throw new s.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;e.input=er(t,!0)}return e.input.shift()},put_char:function(e,t){t===null||t===10?(ge(Ye(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(ge(Ye(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){t===null||t===10?(Z(Ye(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(Z(Ye(e.output,0)),e.output=[])}}};function tr(e,t){return G.fill(0,e,e+t),e}function aa(e,t){return Math.ceil(e/t)*t}function Ur(e){e=aa(e,65536);var t=En(65536,e);return t?tr(t,e):0}var B={ops_table:null,mount:function(e){return B.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(s.isBlkdev(r)||s.isFIFO(r))throw new s.ErrnoError(63);B.ops_table||(B.ops_table={dir:{node:{getattr:B.node_ops.getattr,setattr:B.node_ops.setattr,lookup:B.node_ops.lookup,mknod:B.node_ops.mknod,rename:B.node_ops.rename,unlink:B.node_ops.unlink,rmdir:B.node_ops.rmdir,readdir:B.node_ops.readdir,symlink:B.node_ops.symlink},stream:{llseek:B.stream_ops.llseek}},file:{node:{getattr:B.node_ops.getattr,setattr:B.node_ops.setattr},stream:{llseek:B.stream_ops.llseek,read:B.stream_ops.read,write:B.stream_ops.write,allocate:B.stream_ops.allocate,mmap:B.stream_ops.mmap,msync:B.stream_ops.msync}},link:{node:{getattr:B.node_ops.getattr,setattr:B.node_ops.setattr,readlink:B.node_ops.readlink},stream:{}},chrdev:{node:{getattr:B.node_ops.getattr,setattr:B.node_ops.setattr},stream:s.chrdev_stream_ops}});var a=s.createNode(e,t,r,n);return s.isDir(a.mode)?(a.node_ops=B.ops_table.dir.node,a.stream_ops=B.ops_table.dir.stream,a.contents={}):s.isFile(a.mode)?(a.node_ops=B.ops_table.file.node,a.stream_ops=B.ops_table.file.stream,a.usedBytes=0,a.contents=null):s.isLink(a.mode)?(a.node_ops=B.ops_table.link.node,a.stream_ops=B.ops_table.link.stream):s.isChrdev(a.mode)&&(a.node_ops=B.ops_table.chrdev.node,a.stream_ops=B.ops_table.chrdev.stream),a.timestamp=Date.now(),e&&(e.contents[t]=a,e.timestamp=a.timestamp),a},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){var n=1048576;t=Math.max(t,r*(r<n?2:1.125)>>>0),r!=0&&(t=Math.max(t,256));var a=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(a.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=s.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,s.isDir(e.mode)?t.size=4096:s.isFile(e.mode)?t.size=e.usedBytes:s.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&B.resizeFileStorage(e,t.size)},lookup:function(e,t){throw s.genericErrors[44]},mknod:function(e,t,r,n){return B.createNode(e,t,r,n)},rename:function(e,t,r){if(s.isDir(e.mode)){var n;try{n=s.lookupNode(t,r)}catch{}if(n)for(var a in n.contents)throw new s.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=s.lookupNode(e,t);for(var n in r.contents)throw new s.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var r in e.contents)!e.contents.hasOwnProperty(r)||t.push(r);return t},symlink:function(e,t,r){var n=B.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!s.isLink(e.mode))throw new s.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,a){var o=e.node.contents;if(a>=e.node.usedBytes)return 0;var u=Math.min(e.node.usedBytes-a,n);if(u>8&&o.subarray)t.set(o.subarray(a,a+u),r);else for(var c=0;c<u;c++)t[r+c]=o[a+c];return u},write:function(e,t,r,n,a,o){if(t.buffer===X.buffer&&(o=!1),!n)return 0;var u=e.node;if(u.timestamp=Date.now(),t.subarray&&(!u.contents||u.contents.subarray)){if(o)return u.contents=t.subarray(r,r+n),u.usedBytes=n,n;if(u.usedBytes===0&&a===0)return u.contents=t.slice(r,r+n),u.usedBytes=n,n;if(a+n<=u.usedBytes)return u.contents.set(t.subarray(r,r+n),a),n}if(B.expandFileStorage(u,a+n),u.contents.subarray&&t.subarray)u.contents.set(t.subarray(r,r+n),a);else for(var c=0;c<n;c++)u.contents[a+c]=t[r+c];return u.usedBytes=Math.max(u.usedBytes,a+n),n},llseek:function(e,t,r){var n=t;if(r===1?n+=e.position:r===2&&s.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new s.ErrnoError(28);return n},allocate:function(e,t,r){B.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,a){if(!s.isFile(e.node.mode))throw new s.ErrnoError(43);var o,u,c=e.node.contents;if(!(a&2)&&c.buffer===wt)u=!1,o=c.byteOffset;else{if((r>0||r+t<c.length)&&(c.subarray?c=c.subarray(r,r+t):c=Array.prototype.slice.call(c,r,r+t)),u=!0,o=Ur(t),!o)throw new s.ErrnoError(48);X.set(c,o)}return{ptr:o,allocated:u}},msync:function(e,t,r,n,a){return B.stream_ops.write(e,t,0,n,r,!1),0}}};function oa(e,t,r,n){var a=n?"":"al "+e;oe(e,o=>{Oe(o,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(o)),a&&Ve()},o=>{if(r)r();else throw'Loading data file "'+e+'" failed.'}),a&&nt()}var s={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(e=Pe.resolve(e),!e)return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};if(t=Object.assign(r,t),t.recurse_count>8)throw new s.ErrnoError(32);for(var n=e.split("/").filter(v=>!!v),a=s.root,o="/",u=0;u<n.length;u++){var c=u===n.length-1;if(c&&t.parent)break;if(a=s.lookupNode(a,n[u]),o=W.join2(o,n[u]),s.isMountpoint(a)&&(!c||c&&t.follow_mount)&&(a=a.mounted.root),!c||t.follow)for(var l=0;s.isLink(a.mode);){var d=s.readlink(o);o=Pe.resolve(W.dirname(o),d);var m=s.lookupPath(o,{recurse_count:t.recurse_count+1});if(a=m.node,l++>40)throw new s.ErrnoError(32)}}return{path:o,node:a}},getPath:e=>{for(var t;;){if(s.isRoot(e)){var r=e.mount.mountpoint;return t?r[r.length-1]!=="/"?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%s.nameTable.length},hashAddNode:e=>{var t=s.hashName(e.parent.id,e.name);e.name_next=s.nameTable[t],s.nameTable[t]=e},hashRemoveNode:e=>{var t=s.hashName(e.parent.id,e.name);if(s.nameTable[t]===e)s.nameTable[t]=e.name_next;else for(var r=s.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:(e,t)=>{var r=s.mayLookup(e);if(r)throw new s.ErrnoError(r,e);for(var n=s.hashName(e.id,t),a=s.nameTable[n];a;a=a.name_next){var o=a.name;if(a.parent.id===e.id&&o===t)return a}return s.lookup(e,t)},createNode:(e,t,r,n)=>{var a=new s.FSNode(e,t,r,n);return s.hashAddNode(a),a},destroyNode:e=>{s.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=s.flagModes[e];if(typeof t>"u")throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions:(e,t)=>s.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var t=s.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return s.lookupNode(e,t),20}catch{}return s.nodePermissions(e,"wx")},mayDelete:(e,t,r)=>{var n;try{n=s.lookupNode(e,t)}catch(o){return o.errno}var a=s.nodePermissions(e,"wx");if(a)return a;if(r){if(!s.isDir(n.mode))return 54;if(s.isRoot(n)||s.getPath(n)===s.cwd())return 10}else if(s.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?s.isLink(e.mode)?32:s.isDir(e.mode)&&(s.flagsToPermissionString(t)!=="r"||t&512)?31:s.nodePermissions(e,s.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=s.MAX_OPEN_FDS)=>{for(var r=e;r<=t;r++)if(!s.streams[r])return r;throw new s.ErrnoError(33)},getStream:e=>s.streams[e],createStream:(e,t,r)=>{s.FSStream||(s.FSStream=function(){this.shared={}},s.FSStream.prototype={},Object.defineProperties(s.FSStream.prototype,{object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(a){this.shared.flags=a}},position:{get:function(){return this.shared.position},set:function(a){this.shared.position=a}}})),e=Object.assign(new s.FSStream,e);var n=s.nextfd(t,r);return e.fd=n,s.streams[n]=e,e},closeStream:e=>{s.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=s.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new s.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{s.devices[e]={stream_ops:t}},getDevice:e=>s.devices[e],getMounts:e=>{for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:(e,t)=>{typeof e=="function"&&(t=e,e=!1),s.syncFSRequests++,s.syncFSRequests>1&&Z("warning: "+s.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=s.getMounts(s.root.mount),n=0;function a(u){return s.syncFSRequests--,t(u)}function o(u){if(u)return o.errored?void 0:(o.errored=!0,a(u));++n>=r.length&&a(null)}r.forEach(u=>{if(!u.type.syncfs)return o(null);u.type.syncfs(u,e,o)})},mount:(e,t,r)=>{var n=r==="/",a=!r,o;if(n&&s.root)throw new s.ErrnoError(10);if(!n&&!a){var u=s.lookupPath(r,{follow_mount:!1});if(r=u.path,o=u.node,s.isMountpoint(o))throw new s.ErrnoError(10);if(!s.isDir(o.mode))throw new s.ErrnoError(54)}var c={type:e,opts:t,mountpoint:r,mounts:[]},l=e.mount(c);return l.mount=c,c.root=l,n?s.root=l:o&&(o.mounted=c,o.mount&&o.mount.mounts.push(c)),l},unmount:e=>{var t=s.lookupPath(e,{follow_mount:!1});if(!s.isMountpoint(t.node))throw new s.ErrnoError(28);var r=t.node,n=r.mounted,a=s.getMounts(n);Object.keys(s.nameTable).forEach(u=>{for(var c=s.nameTable[u];c;){var l=c.name_next;a.includes(c.mount)&&s.destroyNode(c),c=l}}),r.mounted=null;var o=r.mount.mounts.indexOf(n);r.mount.mounts.splice(o,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,r)=>{var n=s.lookupPath(e,{parent:!0}),a=n.node,o=W.basename(e);if(!o||o==="."||o==="..")throw new s.ErrnoError(28);var u=s.mayCreate(a,o);if(u)throw new s.ErrnoError(u);if(!a.node_ops.mknod)throw new s.ErrnoError(63);return a.node_ops.mknod(a,o,t,r)},create:(e,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,s.mknod(e,t,0)),mkdir:(e,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,s.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var r=e.split("/"),n="",a=0;a<r.length;++a)if(r[a]){n+="/"+r[a];try{s.mkdir(n,t)}catch(o){if(o.errno!=20)throw o}}},mkdev:(e,t,r)=>(typeof r>"u"&&(r=t,t=438),t|=8192,s.mknod(e,t,r)),symlink:(e,t)=>{if(!Pe.resolve(e))throw new s.ErrnoError(44);var r=s.lookupPath(t,{parent:!0}),n=r.node;if(!n)throw new s.ErrnoError(44);var a=W.basename(t),o=s.mayCreate(n,a);if(o)throw new s.ErrnoError(o);if(!n.node_ops.symlink)throw new s.ErrnoError(63);return n.node_ops.symlink(n,a,e)},rename:(e,t)=>{var r=W.dirname(e),n=W.dirname(t),a=W.basename(e),o=W.basename(t),u,c,l;if(u=s.lookupPath(e,{parent:!0}),c=u.node,u=s.lookupPath(t,{parent:!0}),l=u.node,!c||!l)throw new s.ErrnoError(44);if(c.mount!==l.mount)throw new s.ErrnoError(75);var d=s.lookupNode(c,a),m=Pe.relative(e,n);if(m.charAt(0)!==".")throw new s.ErrnoError(28);if(m=Pe.relative(t,r),m.charAt(0)!==".")throw new s.ErrnoError(55);var v;try{v=s.lookupNode(l,o)}catch{}if(d!==v){var g=s.isDir(d.mode),C=s.mayDelete(c,a,g);if(C)throw new s.ErrnoError(C);if(C=v?s.mayDelete(l,o,g):s.mayCreate(l,o),C)throw new s.ErrnoError(C);if(!c.node_ops.rename)throw new s.ErrnoError(63);if(s.isMountpoint(d)||v&&s.isMountpoint(v))throw new s.ErrnoError(10);if(l!==c&&(C=s.nodePermissions(c,"w"),C))throw new s.ErrnoError(C);s.hashRemoveNode(d);try{c.node_ops.rename(d,l,o)}catch(k){throw k}finally{s.hashAddNode(d)}}},rmdir:e=>{var t=s.lookupPath(e,{parent:!0}),r=t.node,n=W.basename(e),a=s.lookupNode(r,n),o=s.mayDelete(r,n,!0);if(o)throw new s.ErrnoError(o);if(!r.node_ops.rmdir)throw new s.ErrnoError(63);if(s.isMountpoint(a))throw new s.ErrnoError(10);r.node_ops.rmdir(r,n),s.destroyNode(a)},readdir:e=>{var t=s.lookupPath(e,{follow:!0}),r=t.node;if(!r.node_ops.readdir)throw new s.ErrnoError(54);return r.node_ops.readdir(r)},unlink:e=>{var t=s.lookupPath(e,{parent:!0}),r=t.node;if(!r)throw new s.ErrnoError(44);var n=W.basename(e),a=s.lookupNode(r,n),o=s.mayDelete(r,n,!1);if(o)throw new s.ErrnoError(o);if(!r.node_ops.unlink)throw new s.ErrnoError(63);if(s.isMountpoint(a))throw new s.ErrnoError(10);r.node_ops.unlink(r,n),s.destroyNode(a)},readlink:e=>{var t=s.lookupPath(e),r=t.node;if(!r)throw new s.ErrnoError(44);if(!r.node_ops.readlink)throw new s.ErrnoError(28);return Pe.resolve(s.getPath(r.parent),r.node_ops.readlink(r))},stat:(e,t)=>{var r=s.lookupPath(e,{follow:!t}),n=r.node;if(!n)throw new s.ErrnoError(44);if(!n.node_ops.getattr)throw new s.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>s.stat(e,!0),chmod:(e,t,r)=>{var n;if(typeof e=="string"){var a=s.lookupPath(e,{follow:!r});n=a.node}else n=e;if(!n.node_ops.setattr)throw new s.ErrnoError(63);n.node_ops.setattr(n,{mode:t&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,t)=>{s.chmod(e,t,!0)},fchmod:(e,t)=>{var r=s.getStream(e);if(!r)throw new s.ErrnoError(8);s.chmod(r.node,t)},chown:(e,t,r,n)=>{var a;if(typeof e=="string"){var o=s.lookupPath(e,{follow:!n});a=o.node}else a=e;if(!a.node_ops.setattr)throw new s.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown:(e,t,r)=>{s.chown(e,t,r,!0)},fchown:(e,t,r)=>{var n=s.getStream(e);if(!n)throw new s.ErrnoError(8);s.chown(n.node,t,r)},truncate:(e,t)=>{if(t<0)throw new s.ErrnoError(28);var r;if(typeof e=="string"){var n=s.lookupPath(e,{follow:!0});r=n.node}else r=e;if(!r.node_ops.setattr)throw new s.ErrnoError(63);if(s.isDir(r.mode))throw new s.ErrnoError(31);if(!s.isFile(r.mode))throw new s.ErrnoError(28);var a=s.nodePermissions(r,"w");if(a)throw new s.ErrnoError(a);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var r=s.getStream(e);if(!r)throw new s.ErrnoError(8);if((r.flags&2097155)===0)throw new s.ErrnoError(28);s.truncate(r.node,t)},utime:(e,t,r)=>{var n=s.lookupPath(e,{follow:!0}),a=n.node;a.node_ops.setattr(a,{timestamp:Math.max(t,r)})},open:(e,t,r)=>{if(e==="")throw new s.ErrnoError(44);t=typeof t=="string"?s.modeStringToFlags(t):t,r=typeof r>"u"?438:r,t&64?r=r&4095|32768:r=0;var n;if(typeof e=="object")n=e;else{e=W.normalize(e);try{var a=s.lookupPath(e,{follow:!(t&131072)});n=a.node}catch{}}var o=!1;if(t&64)if(n){if(t&128)throw new s.ErrnoError(20)}else n=s.mknod(e,r,0),o=!0;if(!n)throw new s.ErrnoError(44);if(s.isChrdev(n.mode)&&(t&=-513),t&65536&&!s.isDir(n.mode))throw new s.ErrnoError(54);if(!o){var u=s.mayOpen(n,t);if(u)throw new s.ErrnoError(u)}t&512&&!o&&s.truncate(n,0),t&=-131713;var c=s.createStream({node:n,path:s.getPath(n),flags:t,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return c.stream_ops.open&&c.stream_ops.open(c),i.logReadFiles&&!(t&1)&&(s.readFiles||(s.readFiles={}),e in s.readFiles||(s.readFiles[e]=1)),c},close:e=>{if(s.isClosed(e))throw new s.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{s.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,t,r)=>{if(s.isClosed(e))throw new s.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new s.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new s.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:(e,t,r,n,a)=>{if(n<0||a<0)throw new s.ErrnoError(28);if(s.isClosed(e))throw new s.ErrnoError(8);if((e.flags&2097155)===1)throw new s.ErrnoError(8);if(s.isDir(e.node.mode))throw new s.ErrnoError(31);if(!e.stream_ops.read)throw new s.ErrnoError(28);var o=typeof a<"u";if(!o)a=e.position;else if(!e.seekable)throw new s.ErrnoError(70);var u=e.stream_ops.read(e,t,r,n,a);return o||(e.position+=u),u},write:(e,t,r,n,a,o)=>{if(n<0||a<0)throw new s.ErrnoError(28);if(s.isClosed(e))throw new s.ErrnoError(8);if((e.flags&2097155)===0)throw new s.ErrnoError(8);if(s.isDir(e.node.mode))throw new s.ErrnoError(31);if(!e.stream_ops.write)throw new s.ErrnoError(28);e.seekable&&e.flags&1024&&s.llseek(e,0,2);var u=typeof a<"u";if(!u)a=e.position;else if(!e.seekable)throw new s.ErrnoError(70);var c=e.stream_ops.write(e,t,r,n,a,o);return u||(e.position+=c),c},allocate:(e,t,r)=>{if(s.isClosed(e))throw new s.ErrnoError(8);if(t<0||r<=0)throw new s.ErrnoError(28);if((e.flags&2097155)===0)throw new s.ErrnoError(8);if(!s.isFile(e.node.mode)&&!s.isDir(e.node.mode))throw new s.ErrnoError(43);if(!e.stream_ops.allocate)throw new s.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:(e,t,r,n,a)=>{if((n&2)!==0&&(a&2)===0&&(e.flags&2097155)!==2)throw new s.ErrnoError(2);if((e.flags&2097155)===1)throw new s.ErrnoError(2);if(!e.stream_ops.mmap)throw new s.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,a)},msync:(e,t,r,n,a)=>e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,a):0,munmap:e=>0,ioctl:(e,t,r)=>{if(!e.stream_ops.ioctl)throw new s.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=s.open(e,t.flags),a=s.stat(e),o=a.size,u=new Uint8Array(o);return s.read(n,u,0,o,0),t.encoding==="utf8"?r=Ye(u,0):t.encoding==="binary"&&(r=u),s.close(n),r},writeFile:(e,t,r={})=>{r.flags=r.flags||577;var n=s.open(e,r.flags,r.mode);if(typeof t=="string"){var a=new Uint8Array(Be(t)+1),o=yt(t,a,0,a.length);s.write(n,a,0,o,void 0,r.canOwn)}else if(ArrayBuffer.isView(t))s.write(n,t,0,t.byteLength,void 0,r.canOwn);else throw new Error("Unsupported data type");s.close(n)},cwd:()=>s.currentPath,chdir:e=>{var t=s.lookupPath(e,{follow:!0});if(t.node===null)throw new s.ErrnoError(44);if(!s.isDir(t.node.mode))throw new s.ErrnoError(54);var r=s.nodePermissions(t.node,"x");if(r)throw new s.ErrnoError(r);s.currentPath=t.path},createDefaultDirectories:()=>{s.mkdir("/tmp"),s.mkdir("/home"),s.mkdir("/home/web_user")},createDefaultDevices:()=>{s.mkdir("/dev"),s.registerDevice(s.makedev(1,3),{read:()=>0,write:(t,r,n,a,o)=>a}),s.mkdev("/dev/null",s.makedev(1,3)),Ue.register(s.makedev(5,0),Ue.default_tty_ops),Ue.register(s.makedev(6,0),Ue.default_tty1_ops),s.mkdev("/dev/tty",s.makedev(5,0)),s.mkdev("/dev/tty1",s.makedev(6,0));var e=Vr();s.createDevice("/dev","random",e),s.createDevice("/dev","urandom",e),s.mkdir("/dev/shm"),s.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{s.mkdir("/proc");var e=s.mkdir("/proc/self");s.mkdir("/proc/self/fd"),s.mount({mount:()=>{var t=s.createNode(e,"fd",16895,73);return t.node_ops={lookup:(r,n)=>{var a=+n,o=s.getStream(a);if(!o)throw new s.ErrnoError(8);var u={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return u.parent=u,u}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{i.stdin?s.createDevice("/dev","stdin",i.stdin):s.symlink("/dev/tty","/dev/stdin"),i.stdout?s.createDevice("/dev","stdout",null,i.stdout):s.symlink("/dev/tty","/dev/stdout"),i.stderr?s.createDevice("/dev","stderr",null,i.stderr):s.symlink("/dev/tty1","/dev/stderr"),s.open("/dev/stdin",0),s.open("/dev/stdout",1),s.open("/dev/stderr",1)},ensureErrnoError:()=>{s.ErrnoError||(s.ErrnoError=function(e,t){this.node=t,this.setErrno=function(r){this.errno=r},this.setErrno(e),this.message="FS error"},s.ErrnoError.prototype=new Error,s.ErrnoError.prototype.constructor=s.ErrnoError,[44].forEach(e=>{s.genericErrors[e]=new s.ErrnoError(e),s.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{s.ensureErrnoError(),s.nameTable=new Array(4096),s.mount(B,{},"/"),s.createDefaultDirectories(),s.createDefaultDevices(),s.createSpecialDirectories(),s.filesystems={MEMFS:B}},init:(e,t,r)=>{s.init.initialized=!0,s.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=r||i.stderr,s.createStandardStreams()},quit:()=>{s.init.initialized=!1;for(var e=0;e<s.streams.length;e++){var t=s.streams[e];!t||s.close(t)}},getMode:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:(e,t)=>{var r=s.analyzePath(e,t);return r.exists?r.object:null},analyzePath:(e,t)=>{try{var r=s.lookupPath(e,{follow:!t});e=r.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=s.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=W.basename(e),r=s.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot=r.path==="/"}catch(a){n.error=a.errno}return n},createPath:(e,t,r,n)=>{e=typeof e=="string"?e:s.getPath(e);for(var a=t.split("/").reverse();a.length;){var o=a.pop();if(o){var u=W.join2(e,o);try{s.mkdir(u)}catch{}e=u}}return u},createFile:(e,t,r,n,a)=>{var o=W.join2(typeof e=="string"?e:s.getPath(e),t),u=s.getMode(n,a);return s.create(o,u)},createDataFile:(e,t,r,n,a,o)=>{var u=t;e&&(e=typeof e=="string"?e:s.getPath(e),u=t?W.join2(e,t):e);var c=s.getMode(n,a),l=s.create(u,c);if(r){if(typeof r=="string"){for(var d=new Array(r.length),m=0,v=r.length;m<v;++m)d[m]=r.charCodeAt(m);r=d}s.chmod(l,c|146);var g=s.open(l,577);s.write(g,r,0,r.length,0,o),s.close(g),s.chmod(l,c)}return l},createDevice:(e,t,r,n)=>{var a=W.join2(typeof e=="string"?e:s.getPath(e),t),o=s.getMode(!!r,!!n);s.createDevice.major||(s.createDevice.major=64);var u=s.makedev(s.createDevice.major++,0);return s.registerDevice(u,{open:c=>{c.seekable=!1},close:c=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(c,l,d,m,v)=>{for(var g=0,C=0;C<m;C++){var k;try{k=r()}catch{throw new s.ErrnoError(29)}if(k===void 0&&g===0)throw new s.ErrnoError(6);if(k==null)break;g++,l[d+C]=k}return g&&(c.node.timestamp=Date.now()),g},write:(c,l,d,m,v)=>{for(var g=0;g<m;g++)try{n(l[d+g])}catch{throw new s.ErrnoError(29)}return m&&(c.node.timestamp=Date.now()),g}}),s.mkdev(a,o,u)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(me)try{e.contents=er(me(e.url),!0),e.usedBytes=e.contents.length}catch{throw new s.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,t,r,n,a)=>{if(typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o}else var o={isDevice:!1,url:r};var u=s.createFile(e,t,o,n,a);o.contents?u.contents=o.contents:o.url&&(u.contents=null,u.url=o.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var c={},l=Object.keys(u.stream_ops);l.forEach(m=>{var v=u.stream_ops[m];c[m]=function(){return s.forceLoadFile(u),v.apply(null,arguments)}});function d(m,v,g,C,k){var P=m.node.contents;if(k>=P.length)return 0;var T=Math.min(P.length-k,C);if(P.slice)for(var L=0;L<T;L++)v[g+L]=P[k+L];else for(var L=0;L<T;L++)v[g+L]=P.get(k+L);return T}return c.read=(m,v,g,C,k)=>(s.forceLoadFile(u),d(m,v,g,C,k)),c.mmap=(m,v,g,C,k)=>{s.forceLoadFile(u);var P=Ur(v);if(!P)throw new s.ErrnoError(48);return d(m,X,P,v,g),{ptr:P,allocated:!0}},u.stream_ops=c,u},createPreloadedFile:(e,t,r,n,a,o,u,c,l,d)=>{var m=t?Pe.resolve(W.join2(e,t)):e;function v(g){function C(k){d&&d(),c||s.createDataFile(e,t,k,n,a,l),o&&o(),Ve()}b.handledByPreloadPlugin(g,m,C,()=>{u&&u(),Ve()})||C(g)}nt(),typeof r=="string"?oa(r,g=>v(g),u):v(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=s.indexedDB();try{var a=n.open(s.DB_NAME(),s.DB_VERSION)}catch(o){return r(o)}a.onupgradeneeded=()=>{ge("creating db");var o=a.result;o.createObjectStore(s.DB_STORE_NAME)},a.onsuccess=()=>{var o=a.result,u=o.transaction([s.DB_STORE_NAME],"readwrite"),c=u.objectStore(s.DB_STORE_NAME),l=0,d=0,m=e.length;function v(){d==0?t():r()}e.forEach(g=>{var C=c.put(s.analyzePath(g).object.contents,g);C.onsuccess=()=>{l++,l+d==m&&v()},C.onerror=()=>{d++,l+d==m&&v()}}),u.onerror=r},a.onerror=r},loadFilesFromDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=s.indexedDB();try{var a=n.open(s.DB_NAME(),s.DB_VERSION)}catch(o){return r(o)}a.onupgradeneeded=r,a.onsuccess=()=>{var o=a.result;try{var u=o.transaction([s.DB_STORE_NAME],"readonly")}catch(g){r(g);return}var c=u.objectStore(s.DB_STORE_NAME),l=0,d=0,m=e.length;function v(){d==0?t():r()}e.forEach(g=>{var C=c.get(g);C.onsuccess=()=>{s.analyzePath(g).exists&&s.unlink(g),s.createDataFile(W.dirname(g),W.basename(g),C.result,!0,!0,!0),l++,l+d==m&&v()},C.onerror=()=>{d++,l+d==m&&v()}}),u.onerror=r},a.onerror=r}},I={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(W.isAbs(t))return t;var n;if(e===-100)n=s.cwd();else{var a=I.getStreamFromFD(e);n=a.path}if(t.length==0){if(!r)throw new s.ErrnoError(44);return n}return W.join2(n,t)},doStat:function(e,t,r){try{var n=e(t)}catch(a){if(a&&a.node&&W.normalize(t)!==W.normalize(s.getPath(a.node)))return-54;throw a}return _[r>>2]=n.dev,_[r+8>>2]=n.ino,_[r+12>>2]=n.mode,D[r+16>>2]=n.nlink,_[r+20>>2]=n.uid,_[r+24>>2]=n.gid,_[r+28>>2]=n.rdev,J=[n.size>>>0,(N=n.size,+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+40>>2]=J[0],_[r+44>>2]=J[1],_[r+48>>2]=4096,_[r+52>>2]=n.blocks,J=[Math.floor(n.atime.getTime()/1e3)>>>0,(N=Math.floor(n.atime.getTime()/1e3),+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+56>>2]=J[0],_[r+60>>2]=J[1],D[r+64>>2]=0,J=[Math.floor(n.mtime.getTime()/1e3)>>>0,(N=Math.floor(n.mtime.getTime()/1e3),+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+72>>2]=J[0],_[r+76>>2]=J[1],D[r+80>>2]=0,J=[Math.floor(n.ctime.getTime()/1e3)>>>0,(N=Math.floor(n.ctime.getTime()/1e3),+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+88>>2]=J[0],_[r+92>>2]=J[1],D[r+96>>2]=0,J=[n.ino>>>0,(N=n.ino,+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[r+104>>2]=J[0],_[r+108>>2]=J[1],0},doMsync:function(e,t,r,n,a){if(!s.isFile(t.node.mode))throw new s.ErrnoError(43);if(n&2)return 0;var o=G.slice(e,e+r);s.msync(t,o,a,r,n)},varargs:void 0,get:function(){I.varargs+=4;var e=_[I.varargs-4>>2];return e},getStr:function(e){var t=ee(e);return t},getStreamFromFD:function(e){var t=s.getStream(e);if(!t)throw new s.ErrnoError(8);return t}};function ia(e,t){try{return e=I.getStr(e),s.chmod(e,t),0}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return-r.errno}}function sa(e,t){try{return s.fchmod(e,t),0}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return-r.errno}}function ua(e){return _[yn()>>2]=e,e}function ca(e,t,r){I.varargs=r;try{var n=I.getStreamFromFD(e);switch(t){case 0:{var a=I.get();if(a<0)return-28;var o;return o=s.createStream(n,a),o.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var a=I.get();return n.flags|=a,0}case 5:{var a=I.get(),u=0;return se[a+u>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ua(28),-1;default:return-28}}catch(c){if(typeof s>"u"||!(c instanceof s.ErrnoError))throw c;return-c.errno}}function la(e,t){try{var r=I.getStreamFromFD(e);return I.doStat(s.stat,r.path,t)}catch(n){if(typeof s>"u"||!(n instanceof s.ErrnoError))throw n;return-n.errno}}function zr(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN}function fa(e,t,r){try{var n=zr(t,r);return isNaN(n)?-61:(s.ftruncate(e,n),0)}catch(a){if(typeof s>"u"||!(a instanceof s.ErrnoError))throw a;return-a.errno}}function da(e,t){try{if(t===0)return-28;var r=s.cwd(),n=Be(r)+1;return t<n?-68:(ie(r,e,t),n)}catch(a){if(typeof s>"u"||!(a instanceof s.ErrnoError))throw a;return-a.errno}}function ma(e,t,r){try{var n=I.getStreamFromFD(e);n.getdents||(n.getdents=s.readdir(n.path));for(var a=280,o=0,u=s.llseek(n,0,1),c=Math.floor(u/a);c<n.getdents.length&&o+a<=r;){var l,d,m=n.getdents[c];if(m===".")l=n.node.id,d=4;else if(m===".."){var v=s.lookupPath(n.path,{parent:!0});l=v.node.id,d=4}else{var g=s.lookupNode(n.node,m);l=g.id,d=s.isChrdev(g.mode)?2:s.isDir(g.mode)?4:s.isLink(g.mode)?10:8}J=[l>>>0,(N=l,+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[t+o>>2]=J[0],_[t+o+4>>2]=J[1],J=[(c+1)*a>>>0,(N=(c+1)*a,+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[t+o+8>>2]=J[0],_[t+o+12>>2]=J[1],se[t+o+16>>1]=280,X[t+o+18>>0]=d,ie(m,t+o+19,256),o+=a,c+=1}return s.llseek(n,c*a,0),o}catch(C){if(typeof s>"u"||!(C instanceof s.ErrnoError))throw C;return-C.errno}}function pa(e,t,r){I.varargs=r;try{var n=I.getStreamFromFD(e);switch(t){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:{if(!n.tty)return-59;var a=I.get();return _[a>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var a=I.get();return s.ioctl(n,t,a)}case 21523:return n.tty?0:-59;case 21524:return n.tty?0:-59;default:return-28}}catch(o){if(typeof s>"u"||!(o instanceof s.ErrnoError))throw o;return-o.errno}}function ha(e,t){try{return e=I.getStr(e),I.doStat(s.lstat,e,t)}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return-r.errno}}function va(e,t,r){try{return t=I.getStr(t),t=I.calculateAt(e,t),t=W.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),s.mkdir(t,r,0),0}catch(n){if(typeof s>"u"||!(n instanceof s.ErrnoError))throw n;return-n.errno}}function ga(e,t,r,n){try{t=I.getStr(t);var a=n&256,o=n&4096;return n=n&-4353,t=I.calculateAt(e,t,o),I.doStat(a?s.lstat:s.stat,t,r)}catch(u){if(typeof s>"u"||!(u instanceof s.ErrnoError))throw u;return-u.errno}}function ba(e,t,r,n){I.varargs=n;try{t=I.getStr(t),t=I.calculateAt(e,t);var a=n?I.get():0;return s.open(t,r,a).fd}catch(o){if(typeof s>"u"||!(o instanceof s.ErrnoError))throw o;return-o.errno}}function _a(e,t,r,n){try{if(t=I.getStr(t),t=I.calculateAt(e,t),n<=0)return-28;var a=s.readlink(t),o=Math.min(n,Be(a)),u=X[r+o];return ie(a,r,n+1),X[r+o]=u,o}catch(c){if(typeof s>"u"||!(c instanceof s.ErrnoError))throw c;return-c.errno}}function ya(e,t,r,n){try{return t=I.getStr(t),n=I.getStr(n),t=I.calculateAt(e,t),n=I.calculateAt(r,n),s.rename(t,n),0}catch(a){if(typeof s>"u"||!(a instanceof s.ErrnoError))throw a;return-a.errno}}function wa(e,t){try{return e=I.getStr(e),I.doStat(s.stat,e,t)}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return-r.errno}}function Ea(e,t){try{return e=I.getStr(e),t=I.getStr(t),s.symlink(e,t),0}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return-r.errno}}function Ca(e,t,r){try{return t=I.getStr(t),t=I.calculateAt(e,t),r===0?s.unlink(t):r===512?s.rmdir(t):Fe("Invalid flags passed to unlinkat"),0}catch(n){if(typeof s>"u"||!(n instanceof s.ErrnoError))throw n;return-n.errno}}function xa(e){}var Gr="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function ka(e,t){Fe(Gr)}function Sa(e,t){Fe(Gr)}function Da(e,t,r,n,a){}function Et(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Fa(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Wr=e}var Wr=void 0;function ne(e){for(var t="",r=e;G[r];)t+=Wr[G[r++]];return t}var He={},ze={},Ct={},Pa=48,Ta=57;function xt(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Pa&&t<=Ta?"_"+e:e}function kt(e,t){return e=xt(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(t)}function rr(e,t){var r=kt(t,function(n){this.name=t,this.message=n;var a=new Error(n).stack;a!==void 0&&(this.stack=this.toString()+`
`+a.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},r}var Xe=void 0;function z(e){throw new Xe(e)}var qr=void 0;function St(e){throw new qr(e)}function _e(e,t,r){e.forEach(function(c){Ct[c]=t});function n(c){var l=r(c);l.length!==e.length&&St("Mismatched type converter count");for(var d=0;d<e.length;++d)xe(e[d],l[d])}var a=new Array(t.length),o=[],u=0;t.forEach((c,l)=>{ze.hasOwnProperty(c)?a[l]=ze[c]:(o.push(c),He.hasOwnProperty(c)||(He[c]=[]),He[c].push(()=>{a[l]=ze[c],++u,u===o.length&&n(a)}))}),o.length===0&&n(a)}function xe(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||z('type "'+n+'" must have a positive integer typeid pointer'),ze.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;z("Cannot register type '"+n+"' twice")}if(ze[e]=t,delete Ct[e],He.hasOwnProperty(e)){var a=He[e];delete He[e],a.forEach(o=>o())}}function ja(e,t,r,n,a){var o=Et(r);t=ne(t),xe(e,{name:t,fromWireType:function(u){return!!u},toWireType:function(u,c){return c?n:a},argPackAdvance:8,readValueFromPointer:function(u){var c;if(r===1)c=X;else if(r===2)c=se;else if(r===4)c=_;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(c[u>>o])},destructorFunction:null})}function Aa(e){if(!(this instanceof Ae)||!(e instanceof Ae))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,a=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return t===n&&r===a}function Ma(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function nr(e){function t(r){return r.$$.ptrType.registeredClass.name}z(t(e)+" instance already deleted")}var ar=!1;function Qr(e){}function La(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Yr(e){e.count.value-=1;var t=e.count.value===0;t&&La(e)}function Hr(e,t,r){if(t===r)return e;if(r.baseClass===void 0)return null;var n=Hr(e,t,r.baseClass);return n===null?null:r.downcast(n)}var Xr={};function Ra(){return Object.keys(it).length}function Na(){var e=[];for(var t in it)it.hasOwnProperty(t)&&e.push(it[t]);return e}var at=[];function or(){for(;at.length;){var e=at.pop();e.$$.deleteScheduled=!1,e.delete()}}var ot=void 0;function Ia(e){ot=e,at.length&&ot&&ot(or)}function Oa(){i.getInheritedInstanceCount=Ra,i.getLiveInheritedInstances=Na,i.flushPendingDeletes=or,i.setDelayFunction=Ia}var it={};function Ba(e,t){for(t===void 0&&z("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function $a(e,t){return t=Ba(e,t),it[t]}function Dt(e,t){(!t.ptrType||!t.ptr)&&St("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&St("Both smartPtrType and smartPtr must be specified"),t.count={value:1},st(Object.create(e,{$$:{value:t}}))}function Va(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=$a(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Dt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Dt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o=this.registeredClass.getActualType(t),u=Xr[o];if(!u)return a.call(this);var c;this.isConst?c=u.constPointerType:c=u.pointerType;var l=Hr(t,this.registeredClass,c.registeredClass);return l===null?a.call(this):this.isSmartPointer?Dt(c.registeredClass.instancePrototype,{ptrType:c,ptr:l,smartPtrType:this,smartPtr:e}):Dt(c.registeredClass.instancePrototype,{ptrType:c,ptr:l})}function st(e){return typeof FinalizationRegistry>"u"?(st=t=>t,e):(ar=new FinalizationRegistry(t=>{Yr(t.$$)}),st=t=>{var r=t.$$,n=!!r.smartPtr;if(n){var a={$$:r};ar.register(t,a,t)}return t},Qr=t=>ar.unregister(t),st(e))}function Ua(){if(this.$$.ptr||nr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=st(Object.create(Object.getPrototypeOf(this),{$$:{value:Ma(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function za(){this.$$.ptr||nr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&z("Object already scheduled for deletion"),Qr(this),Yr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ga(){return!this.$$.ptr}function Wa(){return this.$$.ptr||nr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&z("Object already scheduled for deletion"),at.push(this),at.length===1&&ot&&ot(or),this.$$.deleteScheduled=!0,this}function qa(){Ae.prototype.isAliasOf=Aa,Ae.prototype.clone=Ua,Ae.prototype.delete=za,Ae.prototype.isDeleted=Ga,Ae.prototype.deleteLater=Wa}function Ae(){}function ir(e,t,r){if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||z("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function sr(e,t,r){i.hasOwnProperty(e)?((r===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[r]!==void 0)&&z("Cannot register public name '"+e+"' twice"),ir(i,e,e),i.hasOwnProperty(r)&&z("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),i[e].overloadTable[r]=t):(i[e]=t,r!==void 0&&(i[e].numArguments=r))}function Qa(e,t,r,n,a,o,u,c){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=o,this.upcast=u,this.downcast=c,this.pureVirtualFunctions=[]}function Ft(e,t,r){for(;t!==r;)t.upcast||z("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Ya(e,t){if(t===null)return this.isReference&&z("null is not a valid "+this.name),0;t.$$||z('Cannot pass "'+fr(t)+'" as a '+this.name),t.$$.ptr||z("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass,n=Ft(t.$$.ptr,r,this.registeredClass);return n}function Ha(e,t){var r;if(t===null)return this.isReference&&z("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;t.$$||z('Cannot pass "'+fr(t)+'" as a '+this.name),t.$$.ptr||z("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&z("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=Ft(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&z("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:z("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var a=t.clone();r=this.rawShare(r,te.toHandle(function(){a.delete()})),e!==null&&e.push(this.rawDestructor,r)}break;default:z("Unsupporting sharing policy")}return r}function Xa(e,t){if(t===null)return this.isReference&&z("null is not a valid "+this.name),0;t.$$||z('Cannot pass "'+fr(t)+'" as a '+this.name),t.$$.ptr||z("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&z("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass,n=Ft(t.$$.ptr,r,this.registeredClass);return n}function Pt(e){return this.fromWireType(_[e>>2])}function Ja(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Ka(e){this.rawDestructor&&this.rawDestructor(e)}function Za(e){e!==null&&e.delete()}function eo(){ke.prototype.getPointee=Ja,ke.prototype.destructor=Ka,ke.prototype.argPackAdvance=8,ke.prototype.readValueFromPointer=Pt,ke.prototype.deleteObject=Za,ke.prototype.fromWireType=Va}function ke(e,t,r,n,a,o,u,c,l,d,m){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=o,this.sharingPolicy=u,this.rawGetPointee=c,this.rawConstructor=l,this.rawShare=d,this.rawDestructor=m,!a&&t.baseClass===void 0?n?(this.toWireType=Ya,this.destructorFunction=null):(this.toWireType=Xa,this.destructorFunction=null):this.toWireType=Ha}function Jr(e,t,r){i.hasOwnProperty(e)||St("Replacing nonexistant public symbol"),i[e].overloadTable!==void 0&&r!==void 0?i[e].overloadTable[r]=t:(i[e]=t,i[e].argCount=r)}function to(e,t,r){var n=i["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}var Tt=[];function Me(e){var t=Tt[e];return t||(e>=Tt.length&&(Tt.length=e+1),Tt[e]=t=Lr.get(e)),t}function ro(e,t,r){if(e.includes("j"))return to(e,t,r);var n=Me(t).apply(null,r);return n}function no(e,t){var r=[];return function(){return r.length=0,Object.assign(r,arguments),ro(e,t,r)}}function le(e,t){e=ne(e);function r(){return e.includes("j")?no(e,t):Me(t)}var n=r();return typeof n!="function"&&z("unknown function pointer with signature "+e+": "+t),n}var Kr=void 0;function Zr(e){var t=wn(e),r=ne(t);return Se(t),r}function Ge(e,t){var r=[],n={};function a(o){if(!n[o]&&!ze[o]){if(Ct[o]){Ct[o].forEach(a);return}r.push(o),n[o]=!0}}throw t.forEach(a),new Kr(e+": "+r.map(Zr).join([", "]))}function ao(e,t,r,n,a,o,u,c,l,d,m,v,g){m=ne(m),o=le(a,o),c&&(c=le(u,c)),d&&(d=le(l,d)),g=le(v,g);var C=xt(m);sr(C,function(){Ge("Cannot construct "+m+" due to unbound types",[n])}),_e([e,t,r],n?[n]:[],function(k){k=k[0];var P,T;n?(P=k.registeredClass,T=P.instancePrototype):T=Ae.prototype;var L=kt(C,function(){if(Object.getPrototypeOf(this)!==w)throw new Xe("Use 'new' to construct "+m);if(x.constructor_body===void 0)throw new Xe(m+" has no accessible constructor");var j=x.constructor_body[arguments.length];if(j===void 0)throw new Xe("Tried to invoke ctor of "+m+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(x.constructor_body).toString()+") parameters instead!");return j.apply(this,arguments)}),w=Object.create(T,{constructor:{value:L}});L.prototype=w;var x=new Qa(m,L,w,g,P,o,c,d),O=new ke(m,x,!0,!1,!1),$=new ke(m+"*",x,!1,!1,!1),H=new ke(m+" const*",x,!1,!0,!1);return Xr[e]={pointerType:$,constPointerType:H},Jr(C,L),[O,$,H]})}function en(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=kt(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,a=e.apply(n,t);return a instanceof Object?a:n}function ur(e){for(;e.length;){var t=e.pop(),r=e.pop();r(t)}}function jt(e,t,r,n,a){var o=t.length;o<2&&z("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=t[1]!==null&&r!==null,c=!1,l=1;l<t.length;++l)if(t[l]!==null&&t[l].destructorFunction===void 0){c=!0;break}for(var d=t[0].name!=="void",m="",v="",l=0;l<o-2;++l)m+=(l!==0?", ":"")+"arg"+l,v+=(l!==0?", ":"")+"arg"+l+"Wired";var g="return function "+xt(e)+"("+m+`) {
if (arguments.length !== `+(o-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+` args!');
}
`;c&&(g+=`var destructors = [];
`);var C=c?"destructors":"null",k=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],P=[z,n,a,ur,t[0],t[1]];u&&(g+="var thisWired = classParam.toWireType("+C+`, this);
`);for(var l=0;l<o-2;++l)g+="var arg"+l+"Wired = argType"+l+".toWireType("+C+", arg"+l+"); // "+t[l+2].name+`
`,k.push("argType"+l),P.push(t[l+2]);if(u&&(v="thisWired"+(v.length>0?", ":"")+v),g+=(d?"var rv = ":"")+"invoker(fn"+(v.length>0?", ":"")+v+`);
`,c)g+=`runDestructors(destructors);
`;else for(var l=u?1:2;l<t.length;++l){var T=l===1?"thisWired":"arg"+(l-2)+"Wired";t[l].destructorFunction!==null&&(g+=T+"_dtor("+T+"); // "+t[l].name+`
`,k.push(T+"_dtor"),P.push(t[l].destructorFunction))}d&&(g+=`var ret = retType.fromWireType(rv);
return ret;
`),g+=`}
`,k.push(g);var L=en(Function,k).apply(null,P);return L}function At(e,t){for(var r=[],n=0;n<e;n++)r.push(D[t+n*4>>2]);return r}function oo(e,t,r,n,a,o,u){var c=At(r,n);t=ne(t),o=le(a,o),_e([],[e],function(l){l=l[0];var d=l.name+"."+t;function m(){Ge("Cannot call "+d+" due to unbound types",c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var v=l.registeredClass.constructor;return v[t]===void 0?(m.argCount=r-1,v[t]=m):(ir(v,t,d),v[t].overloadTable[r-1]=m),_e([],c,function(g){var C=[g[0],null].concat(g.slice(1)),k=jt(d,C,null,o,u);return v[t].overloadTable===void 0?(k.argCount=r-1,v[t]=k):v[t].overloadTable[r-1]=k,[]}),[]})}function io(e,t,r,n,a,o){Oe(t>0);var u=At(t,r);a=le(n,a),_e([],[e],function(c){c=c[0];var l="constructor "+c.name;if(c.registeredClass.constructor_body===void 0&&(c.registeredClass.constructor_body=[]),c.registeredClass.constructor_body[t-1]!==void 0)throw new Xe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+c.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return c.registeredClass.constructor_body[t-1]=()=>{Ge("Cannot construct "+c.name+" due to unbound types",u)},_e([],u,function(d){return d.splice(1,0,null),c.registeredClass.constructor_body[t-1]=jt(l,d,null,a,o),[]}),[]})}function so(e,t,r,n,a,o,u,c){var l=At(r,n);t=ne(t),o=le(a,o),_e([],[e],function(d){d=d[0];var m=d.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),c&&d.registeredClass.pureVirtualFunctions.push(t);function v(){Ge("Cannot call "+m+" due to unbound types",l)}var g=d.registeredClass.instancePrototype,C=g[t];return C===void 0||C.overloadTable===void 0&&C.className!==d.name&&C.argCount===r-2?(v.argCount=r-2,v.className=d.name,g[t]=v):(ir(g,t,m),g[t].overloadTable[r-2]=v),_e([],l,function(k){var P=jt(m,k,d,o,u);return g[t].overloadTable===void 0?(P.argCount=r-2,g[t]=P):g[t].overloadTable[r-2]=P,[]}),[]})}function tn(e,t,r){return e instanceof Object||z(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||z(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||z("cannot call emscripten binding method "+r+" on deleted object"),Ft(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function uo(e,t,r,n,a,o,u,c,l,d){t=ne(t),a=le(n,a),_e([],[e],function(m){m=m[0];var v=m.name+"."+t,g={get:function(){Ge("Cannot access "+v+" due to unbound types",[r,u])},enumerable:!0,configurable:!0};return l?g.set=()=>{Ge("Cannot access "+v+" due to unbound types",[r,u])}:g.set=C=>{z(v+" is a read-only property")},Object.defineProperty(m.registeredClass.instancePrototype,t,g),_e([],l?[r,u]:[r],function(C){var k=C[0],P={get:function(){var L=tn(this,m,v+" getter");return k.fromWireType(a(o,L))},enumerable:!0};if(l){l=le(c,l);var T=C[1];P.set=function(L){var w=tn(this,m,v+" setter"),x=[];l(d,w,T.toWireType(x,L)),ur(x)}}return Object.defineProperty(m.registeredClass.instancePrototype,t,P),[]}),[]})}var cr=[],ye=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function lr(e){e>4&&--ye[e].refcount===0&&(ye[e]=void 0,cr.push(e))}function co(){for(var e=0,t=5;t<ye.length;++t)ye[t]!==void 0&&++e;return e}function lo(){for(var e=5;e<ye.length;++e)if(ye[e]!==void 0)return ye[e];return null}function fo(){i.count_emval_handles=co,i.get_first_emval=lo}var te={toValue:e=>(e||z("Cannot use deleted val. handle = "+e),ye[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var t=cr.length?cr.pop():ye.length;return ye[t]={refcount:1,value:e},t}}}};function mo(e,t){t=ne(t),xe(e,{name:t,fromWireType:function(r){var n=te.toValue(r);return lr(r),n},toWireType:function(r,n){return te.toHandle(n)},argPackAdvance:8,readValueFromPointer:Pt,destructorFunction:null})}function po(e,t,r){switch(t){case 0:return function(n){var a=r?X:G;return this.fromWireType(a[n])};case 1:return function(n){var a=r?se:Y;return this.fromWireType(a[n>>1])};case 2:return function(n){var a=r?_:D;return this.fromWireType(a[n>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function ho(e,t,r,n){var a=Et(r);t=ne(t);function o(){}o.values={},xe(e,{name:t,constructor:o,fromWireType:function(u){return this.constructor.values[u]},toWireType:function(u,c){return c.value},argPackAdvance:8,readValueFromPointer:po(t,a,n),destructorFunction:null}),sr(t,o)}function Mt(e,t){var r=ze[e];return r===void 0&&z(t+" has unknown type "+Zr(e)),r}function vo(e,t,r){var n=Mt(e,"enum");t=ne(t);var a=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:kt(n.name+"_"+t,function(){})}});a.values[r]=o,a[t]=o}function fr(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function go(e,t){switch(t){case 2:return function(r){return this.fromWireType(ue[r>>2])};case 3:return function(r){return this.fromWireType(Ar[r>>3])};default:throw new TypeError("Unknown float type: "+e)}}function bo(e,t,r){var n=Et(r);t=ne(t),xe(e,{name:t,fromWireType:function(a){return a},toWireType:function(a,o){return o},argPackAdvance:8,readValueFromPointer:go(t,n),destructorFunction:null})}function _o(e,t,r,n,a,o){var u=At(t,r);e=ne(e),a=le(n,a),sr(e,function(){Ge("Cannot call "+e+" due to unbound types",u)},t-1),_e([],u,function(c){var l=[c[0],null].concat(c.slice(1));return Jr(e,jt(e,l,null,a,o),t-1),[]})}function yo(e,t,r){switch(t){case 0:return r?function(n){return X[n]}:function(n){return G[n]};case 1:return r?function(n){return se[n>>1]}:function(n){return Y[n>>1]};case 2:return r?function(n){return _[n>>2]}:function(n){return D[n>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function wo(e,t,r,n,a){t=ne(t);var o=Et(r),u=m=>m;if(n===0){var c=32-8*r;u=m=>m<<c>>>c}var l=t.includes("unsigned"),d;l?d=function(m,v){return v>>>0}:d=function(m,v){return v},xe(e,{name:t,fromWireType:u,toWireType:d,argPackAdvance:8,readValueFromPointer:yo(t,o,n!==0),destructorFunction:null})}function Eo(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[t];function o(u){u=u>>2;var c=D,l=c[u],d=c[u+1];return new a(wt,d,l)}r=ne(r),xe(e,{name:r,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function Co(e,t,r,n,a,o,u,c,l,d,m,v){r=ne(r),o=le(a,o),c=le(u,c),d=le(l,d),v=le(m,v),_e([e],[t],function(g){g=g[0];var C=new ke(r,g.registeredClass,!1,!1,!0,g,n,o,c,d,v);return[C]})}function xo(e,t){t=ne(t);var r=t==="std::string";xe(e,{name:t,fromWireType:function(n){var a=D[n>>2],o=n+4,u;if(r)for(var c=o,l=0;l<=a;++l){var d=o+l;if(l==a||G[d]==0){var m=d-c,v=ee(c,m);u===void 0?u=v:(u+=String.fromCharCode(0),u+=v),c=d+1}}else{for(var g=new Array(a),l=0;l<a;++l)g[l]=String.fromCharCode(G[o+l]);u=g.join("")}return Se(n),u},toWireType:function(n,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var o,u=typeof a=="string";u||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||z("Cannot pass non-string to std::string"),r&&u?o=Be(a):o=a.length;var c=we(4+o+1),l=c+4;if(D[c>>2]=o,r&&u)ie(a,l,o+1);else if(u)for(var d=0;d<o;++d){var m=a.charCodeAt(d);m>255&&(Se(l),z("String has UTF-16 code units that do not fit in 8 bits")),G[l+d]=m}else for(var d=0;d<o;++d)G[l+d]=a[d];return n!==null&&n.push(Se,c),c},argPackAdvance:8,readValueFromPointer:Pt,destructorFunction:function(n){Se(n)}})}var rn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function ko(e,t){for(var r=e,n=r>>1,a=n+t/2;!(n>=a)&&Y[n];)++n;if(r=n<<1,r-e>32&&rn)return rn.decode(G.subarray(e,r));for(var o="",u=0;!(u>=t/2);++u){var c=se[e+u*2>>1];if(c==0)break;o+=String.fromCharCode(c)}return o}function So(e,t,r){if(r===void 0&&(r=2147483647),r<2)return 0;r-=2;for(var n=t,a=r<e.length*2?r/2:e.length,o=0;o<a;++o){var u=e.charCodeAt(o);se[t>>1]=u,t+=2}return se[t>>1]=0,t-n}function Do(e){return e.length*2}function Fo(e,t){for(var r=0,n="";!(r>=t/4);){var a=_[e+r*4>>2];if(a==0)break;if(++r,a>=65536){var o=a-65536;n+=String.fromCharCode(55296|o>>10,56320|o&1023)}else n+=String.fromCharCode(a)}return n}function Po(e,t,r){if(r===void 0&&(r=2147483647),r<4)return 0;for(var n=t,a=n+r-4,o=0;o<e.length;++o){var u=e.charCodeAt(o);if(u>=55296&&u<=57343){var c=e.charCodeAt(++o);u=65536+((u&1023)<<10)|c&1023}if(_[t>>2]=u,t+=4,t+4>a)break}return _[t>>2]=0,t-n}function To(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function jo(e,t,r){r=ne(r);var n,a,o,u,c;t===2?(n=ko,a=So,u=Do,o=()=>Y,c=1):t===4&&(n=Fo,a=Po,u=To,o=()=>D,c=2),xe(e,{name:r,fromWireType:function(l){for(var d=D[l>>2],m=o(),v,g=l+4,C=0;C<=d;++C){var k=l+4+C*t;if(C==d||m[k>>c]==0){var P=k-g,T=n(g,P);v===void 0?v=T:(v+=String.fromCharCode(0),v+=T),g=k+t}}return Se(l),v},toWireType:function(l,d){typeof d!="string"&&z("Cannot pass non-string to C++ string type "+r);var m=u(d),v=we(4+m+t);return D[v>>2]=m>>c,a(d,v+4,m+t),l!==null&&l.push(Se,v),v},argPackAdvance:8,readValueFromPointer:Pt,destructorFunction:function(l){Se(l)}})}function Ao(e,t){t=ne(t),xe(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(r,n){}})}function Mo(e){var t=Q.xhrs[e];t&&(delete Q.xhrs[e],t.readyState>0&&t.readyState<4&&t.abort())}var Lo=!0;function Ro(){return Lo}function No(e,t,r){e=te.toValue(e),t=Mt(t,"emval::as");var n=[],a=te.toHandle(n);return D[r>>2]=a,t.toWireType(n,e)}function nn(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=Mt(D[t+n*Kt>>2],"parameter "+n);return r}function Io(e,t,r,n){e=te.toValue(e);for(var a=nn(t,r),o=new Array(t),u=0;u<t;++u){var c=a[u];o[u]=c.readValueFromPointer(n),n+=c.argPackAdvance}var l=e.apply(void 0,o);return te.toHandle(l)}var Oo={};function dr(e){var t=Oo[e];return t===void 0?ne(e):t}var mr=[];function Bo(e,t,r,n){e=mr[e],t=te.toValue(t),r=dr(r),e(t,r,null,n)}function $o(e){var t=mr.length;return mr.push(e),t}var an=[];function Vo(e,t){var r=nn(e,t),n=r[0],a=n.name+"_$"+r.slice(1).map(function(k){return k.name}).join("_")+"$",o=an[a];if(o!==void 0)return o;for(var u=["retType"],c=[n],l="",d=0;d<e-1;++d)l+=(d!==0?", ":"")+"arg"+d,u.push("argType"+d),c.push(r[1+d]);for(var m=xt("methodCaller_"+a),v="return function "+m+`(handle, name, destructors, args) {
`,g=0,d=0;d<e-1;++d)v+="    var arg"+d+" = argType"+d+".readValueFromPointer(args"+(g?"+"+g:"")+`);
`,g+=r[d+1].argPackAdvance;v+="    var rv = handle[name]("+l+`);
`;for(var d=0;d<e-1;++d)r[d+1].deleteObject&&(v+="    argType"+d+".deleteObject(arg"+d+`);
`);n.isVoid||(v+=`    return retType.toWireType(destructors, rv);
`),v+=`};
`,u.push(v);var C=en(Function,u).apply(null,c);return o=$o(C),an[a]=o,o}function Uo(e){return e=dr(e),te.toHandle(i[e])}function zo(e,t){return e=te.toValue(e),t=te.toValue(t),te.toHandle(e[t])}function Go(e){e>4&&(ye[e].refcount+=1)}function Wo(e){return e=te.toValue(e),typeof e=="number"}function qo(e){return te.toHandle(dr(e))}function Qo(e){var t=te.toValue(e);ur(t),lr(e)}function Yo(e,t,r){e=te.toValue(e),t=te.toValue(t),r=te.toValue(r),e[t]=r}function Ho(e,t){e=Mt(e,"_emval_take_value");var r=e.readValueFromPointer(t);return te.toHandle(r)}function on(e){return D[e>>2]+_[e+4>>2]*4294967296}function Xo(e,t){var r=new Date(on(e)*1e3);_[t>>2]=r.getUTCSeconds(),_[t+4>>2]=r.getUTCMinutes(),_[t+8>>2]=r.getUTCHours(),_[t+12>>2]=r.getUTCDate(),_[t+16>>2]=r.getUTCMonth(),_[t+20>>2]=r.getUTCFullYear()-1900,_[t+24>>2]=r.getUTCDay();var n=Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0),a=(r.getTime()-n)/(1e3*60*60*24)|0;_[t+28>>2]=a}function ut(e){return e%4===0&&(e%100!==0||e%400===0)}var Jo=[0,31,60,91,121,152,182,213,244,274,305,335],Ko=[0,31,59,90,120,151,181,212,243,273,304,334];function sn(e){var t=ut(e.getFullYear()),r=t?Jo:Ko,n=r[e.getMonth()]+e.getDate()-1;return n}function Zo(e,t){var r=new Date(on(e)*1e3);_[t>>2]=r.getSeconds(),_[t+4>>2]=r.getMinutes(),_[t+8>>2]=r.getHours(),_[t+12>>2]=r.getDate(),_[t+16>>2]=r.getMonth(),_[t+20>>2]=r.getFullYear()-1900,_[t+24>>2]=r.getDay();var n=sn(r)|0;_[t+28>>2]=n,_[t+36>>2]=-(r.getTimezoneOffset()*60);var a=new Date(r.getFullYear(),0,1),o=new Date(r.getFullYear(),6,1).getTimezoneOffset(),u=a.getTimezoneOffset(),c=(o!=u&&r.getTimezoneOffset()==Math.min(u,o))|0;_[t+32>>2]=c}function ei(e){var t=new Date(_[e+20>>2]+1900,_[e+16>>2],_[e+12>>2],_[e+8>>2],_[e+4>>2],_[e>>2],0),r=_[e+32>>2],n=t.getTimezoneOffset(),a=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),u=a.getTimezoneOffset(),c=Math.min(u,o);if(r<0)_[e+32>>2]=Number(o!=u&&c==n);else if(r>0!=(c==n)){var l=Math.max(u,o),d=r>0?c:l;t.setTime(t.getTime()+(d-n)*6e4)}_[e+24>>2]=t.getDay();var m=sn(t)|0;return _[e+28>>2]=m,_[e>>2]=t.getSeconds(),_[e+4>>2]=t.getMinutes(),_[e+8>>2]=t.getHours(),_[e+12>>2]=t.getDate(),_[e+16>>2]=t.getMonth(),_[e+20>>2]=t.getYear(),t.getTime()/1e3|0}function ti(e,t,r,n,a,o,u){try{var c=I.getStreamFromFD(n),l=s.mmap(c,e,a,t,r),d=l.ptr;return _[o>>2]=l.allocated,D[u>>2]=d,0}catch(m){if(typeof s>"u"||!(m instanceof s.ErrnoError))throw m;return-m.errno}}function ri(e,t,r,n,a,o){try{var u=I.getStreamFromFD(a);r&2&&I.doMsync(e,u,t,n,o),s.munmap(u)}catch(c){if(typeof s>"u"||!(c instanceof s.ErrnoError))throw c;return-c.errno}}function Lt(e){var t=Be(e)+1,r=we(t);return r&&yt(e,X,r,t),r}function ni(e,t,r){var n=new Date().getFullYear(),a=new Date(n,0,1),o=new Date(n,6,1),u=a.getTimezoneOffset(),c=o.getTimezoneOffset(),l=Math.max(u,c);D[e>>2]=l*60,_[t>>2]=Number(u!=c);function d(k){var P=k.toTimeString().match(/\(([A-Za-z ]+)\)$/);return P?P[1]:"GMT"}var m=d(a),v=d(o),g=Lt(m),C=Lt(v);c<u?(D[r>>2]=g,D[r+4>>2]=C):(D[r>>2]=C,D[r+4>>2]=g)}function ai(){Fe("")}function pr(e,t){if(b.mainLoop.timingMode=e,b.mainLoop.timingValue=t,!b.mainLoop.func)return 1;if(b.mainLoop.running||(b.mainLoop.running=!0),e==0)b.mainLoop.scheduler=function(){var o=Math.max(0,b.mainLoop.tickStartTime+t-Rt())|0;setTimeout(b.mainLoop.runner,o)},b.mainLoop.method="timeout";else if(e==1)b.mainLoop.scheduler=function(){b.requestAnimationFrame(b.mainLoop.runner)},b.mainLoop.method="rAF";else if(e==2){if(typeof setImmediate>"u"){var r=[],n="setimmediate",a=o=>{(o.data===n||o.data.target===n)&&(o.stopPropagation(),r.shift()())};addEventListener("message",a,!0),setImmediate=function(o){r.push(o),postMessage(n,"*")}}b.mainLoop.scheduler=function(){setImmediate(b.mainLoop.runner)},b.mainLoop.method="immediate"}return 0}var Rt;Rt=()=>performance.now();function oi(e){_t=e,Bn()||(i.onExit&&i.onExit(e),Qe=!0),R(e,new $r(e))}function ii(e,t){_t=e,oi(e)}var si=ii;function ui(e){if(e instanceof $r||e=="unwind")return _t;R(1,e)}function ci(e,t,r,n,a){Oe(!b.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),b.mainLoop.func=e,b.mainLoop.arg=n;var o=b.mainLoop.currentlyRunningMainloop;function u(){return!(o<b.mainLoop.currentlyRunningMainloop)}if(b.mainLoop.running=!1,b.mainLoop.runner=function(){if(!Qe){if(b.mainLoop.queue.length>0){var c=Date.now(),l=b.mainLoop.queue.shift();if(l.func(l.arg),b.mainLoop.remainingBlockers){var d=b.mainLoop.remainingBlockers,m=d%1==0?d-1:Math.floor(d);l.counted?b.mainLoop.remainingBlockers=m:(m=m+.5,b.mainLoop.remainingBlockers=(8*d+m)/9)}if(ge('main loop blocker "'+l.name+'" took '+(Date.now()-c)+" ms"),b.mainLoop.updateStatus(),!u())return;setTimeout(b.mainLoop.runner,0);return}if(u()){if(b.mainLoop.currentFrameNumber=b.mainLoop.currentFrameNumber+1|0,b.mainLoop.timingMode==1&&b.mainLoop.timingValue>1&&b.mainLoop.currentFrameNumber%b.mainLoop.timingValue!=0){b.mainLoop.scheduler();return}else b.mainLoop.timingMode==0&&(b.mainLoop.tickStartTime=Rt());b.mainLoop.runIter(e),u()&&(typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),b.mainLoop.scheduler())}}},a||(t&&t>0?pr(0,1e3/t):pr(1,1),b.mainLoop.scheduler()),r)throw"unwind"}function Nt(e){if(!Qe)try{e()}catch(t){ui(t)}}function un(e,t){return setTimeout(function(){Nt(e)},t)}function ct(e){ct.shown||(ct.shown={}),ct.shown[e]||(ct.shown[e]=1,Z(e))}var b={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){b.mainLoop.scheduler=null,b.mainLoop.currentlyRunningMainloop++},resume:function(){b.mainLoop.currentlyRunningMainloop++;var e=b.mainLoop.timingMode,t=b.mainLoop.timingValue,r=b.mainLoop.func;b.mainLoop.func=null,ci(r,0,!1,b.mainLoop.arg,!0),pr(e,t),b.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var e=i.statusMessage||"Please wait...",t=b.mainLoop.remainingBlockers,r=b.mainLoop.expectedBlockers;t?t<r?i.setStatus(e+" ("+(r-t)+"/"+r+")"):i.setStatus(e):i.setStatus("")}},runIter:function(e){if(!Qe){if(i.preMainLoop){var t=i.preMainLoop();if(t===!1)return}Nt(e),i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),b.initted)return;b.initted=!0;try{new Blob,b.hasBlobConstructor=!0}catch{b.hasBlobConstructor=!1,Z("warning: no blob constructor, cannot create blobs with mimetypes")}b.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:b.hasBlobConstructor?null:Z("warning: no BlobBuilder"),b.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&typeof b.URLObject>"u"&&(Z("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var e={};e.canHandle=function(a){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(a)},e.handle=function(a,o,u,c){var l=null;if(b.hasBlobConstructor)try{l=new Blob([a],{type:b.getMimetype(o)}),l.size!==a.length&&(l=new Blob([new Uint8Array(a).buffer],{type:b.getMimetype(o)}))}catch(g){ct("Blob constructor present but fails: "+g+"; falling back to blob builder")}if(!l){var d=new b.BlobBuilder;d.append(new Uint8Array(a).buffer),l=d.getBlob()}var m=b.URLObject.createObjectURL(l),v=new Image;v.onload=()=>{Oe(v.complete,"Image "+o+" could not be decoded");var g=document.createElement("canvas");g.width=v.width,g.height=v.height;var C=g.getContext("2d");C.drawImage(v,0,0),b.URLObject.revokeObjectURL(m),u&&u(a)},v.onerror=g=>{ge("Image "+m+" could not be decoded"),c&&c()},v.src=m},i.preloadPlugins.push(e);var t={};t.canHandle=function(a){return!i.noAudioDecoding&&a.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},t.handle=function(a,o,u,c){var l=!1;function d(k){l||(l=!0,u&&u(a))}function m(){l||(l=!0,new Audio,c&&c())}if(b.hasBlobConstructor){try{var v=new Blob([a],{type:b.getMimetype(o)})}catch{return m()}var g=b.URLObject.createObjectURL(v),C=new Audio;C.addEventListener("canplaythrough",()=>d(),!1),C.onerror=function(k){if(l)return;Z("warning: browser could not fully decode audio "+o+", trying slower base64 approach");function P(T){for(var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="=",x="",O=0,$=0,H=0;H<T.length;H++)for(O=O<<8|T[H],$+=8;$>=6;){var j=O>>$-6&63;$-=6,x+=L[j]}return $==2?(x+=L[(O&3)<<4],x+=w+w):$==4&&(x+=L[(O&15)<<2],x+=w),x}C.src="data:audio/x-"+o.substr(-3)+";base64,"+P(a),d()},C.src=g,un(function(){d()},1e4)}else return m()},i.preloadPlugins.push(t);function r(){b.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var n=i.canvas;n&&(n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock||n.msRequestPointerLock||(()=>{}),n.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),n.exitPointerLock=n.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",r,!1),document.addEventListener("mozpointerlockchange",r,!1),document.addEventListener("webkitpointerlockchange",r,!1),document.addEventListener("mspointerlockchange",r,!1),i.elementPointerLock&&n.addEventListener("click",a=>{!b.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),a.preventDefault())},!1))},handledByPreloadPlugin:function(e,t,r,n){b.init();var a=!1;return i.preloadPlugins.forEach(function(o){a||o.canHandle(t)&&(o.handle(e,t,r,n),a=!0)}),a},createContext:function(e,t,r,n){if(t&&i.ctx&&e==i.canvas)return i.ctx;var a,o;if(t){var u={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext<"u"?2:1};if(n)for(var c in n)u[c]=n[c];typeof E<"u"&&(o=E.createContext(e,u),o&&(a=E.getContext(o).GLctx))}else a=e.getContext("2d");return a?(r&&(t||Oe(typeof y>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=a,t&&E.makeContextCurrent(o),i.useWebGL=t,b.moduleContextCreatedCallbacks.forEach(function(l){l()}),b.init()),a):null},destroyContext:function(e,t,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){b.lockPointer=e,b.resizeCanvas=t,typeof b.lockPointer>"u"&&(b.lockPointer=!0),typeof b.resizeCanvas>"u"&&(b.resizeCanvas=!1);var r=i.canvas;function n(){b.isFullscreen=!1;var o=r.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===o?(r.exitFullscreen=b.exitFullscreen,b.lockPointer&&r.requestPointerLock(),b.isFullscreen=!0,b.resizeCanvas?b.setFullscreenCanvasSize():b.updateCanvasDimensions(r)):(o.parentNode.insertBefore(r,o),o.parentNode.removeChild(o),b.resizeCanvas?b.setWindowedCanvasSize():b.updateCanvasDimensions(r)),i.onFullScreen&&i.onFullScreen(b.isFullscreen),i.onFullscreen&&i.onFullscreen(b.isFullscreen)}b.fullscreenHandlersInstalled||(b.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var a=document.createElement("div");r.parentNode.insertBefore(a,r),a.appendChild(r),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?()=>a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(a.webkitRequestFullScreen?()=>a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),a.requestFullscreen()},exitFullscreen:function(){if(!b.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(b.nextRAF===0)b.nextRAF=t+1e3/60;else for(;t+2>=b.nextRAF;)b.nextRAF+=1e3/60;var r=Math.max(b.nextRAF-t,0);setTimeout(e,r)},requestAnimationFrame:function(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var t=b.fakeRequestAnimationFrame;t(e)},safeSetTimeout:function(e,t){return un(e,t)},safeRequestAnimationFrame:function(e){return b.requestAnimationFrame(function(){Nt(e)})},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(b.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?b.mouseMovementX=b.mouseMovementY=0:(b.mouseMovementX=b.getMovementX(e),b.mouseMovementY=b.getMovementY(e)),typeof SDL<"u"?(b.mouseX=SDL.mouseX+b.mouseMovementX,b.mouseY=SDL.mouseY+b.mouseMovementY):(b.mouseX+=b.mouseMovementX,b.mouseY+=b.mouseMovementY);else{var t=i.canvas.getBoundingClientRect(),r=i.canvas.width,n=i.canvas.height,a=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,o=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var u=e.touch;if(u===void 0)return;var c=u.pageX-(a+t.left),l=u.pageY-(o+t.top);c=c*(r/t.width),l=l*(n/t.height);var d={x:c,y:l};if(e.type==="touchstart")b.lastTouches[u.identifier]=d,b.touches[u.identifier]=d;else if(e.type==="touchend"||e.type==="touchmove"){var m=b.touches[u.identifier];m||(m=d),b.lastTouches[u.identifier]=m,b.touches[u.identifier]=d}return}var v=e.pageX-(a+t.left),g=e.pageY-(o+t.top);v=v*(r/t.width),g=g*(n/t.height),b.mouseMovementX=v-b.mouseX,b.mouseMovementY=g-b.mouseY,b.mouseX=v,b.mouseY=g}},resizeListeners:[],updateResizeListeners:function(){var e=i.canvas;b.resizeListeners.forEach(function(t){t(e.width,e.height)})},setCanvasSize:function(e,t,r){var n=i.canvas;b.updateCanvasDimensions(n,e,t),r||b.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL<"u"){var e=D[SDL.screen>>2];e=e|8388608,_[SDL.screen>>2]=e}b.updateCanvasDimensions(i.canvas),b.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL<"u"){var e=D[SDL.screen>>2];e=e&-8388609,_[SDL.screen>>2]=e}b.updateCanvasDimensions(i.canvas),b.updateResizeListeners()},updateCanvasDimensions:function(e,t,r){t&&r?(e.widthNative=t,e.heightNative=r):(t=e.widthNative,r=e.heightNative);var n=t,a=r;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(n/a<i.forcedAspectRatio?n=Math.round(a*i.forcedAspectRatio):a=Math.round(n/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var o=Math.min(screen.width/n,screen.height/a);n=Math.round(n*o),a=Math.round(a*o)}b.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=a&&(e.height=a),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=r&&(e.height=r),typeof e.style<"u"&&(n!=t||a!=r?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},f={QUEUE_INTERVAL:25,QUEUE_LOOKAHEAD:.1,DEVICE_NAME:"Emscripten OpenAL",CAPTURE_DEVICE_NAME:"Emscripten OpenAL capture",ALC_EXTENSIONS:{ALC_SOFT_pause_device:!0,ALC_SOFT_HRTF:!0},AL_EXTENSIONS:{AL_EXT_float32:!0,AL_SOFT_loop_points:!0,AL_SOFT_source_length:!0,AL_EXT_source_distance_model:!0,AL_SOFT_source_spatialize:!0},_alcErr:0,alcErr:0,deviceRefCounts:{},alcStringCache:{},paused:!1,stringCache:{},contexts:{},currentCtx:null,buffers:{0:{id:0,refCount:0,audioBuf:null,frequency:0,bytesPerSample:2,channels:1,length:0}},paramArray:[],_nextId:1,newId:function(){return f.freeIds.length>0?f.freeIds.pop():f._nextId++},freeIds:[],scheduleContextAudio:function(e){if(!(b.mainLoop.timingMode===1&&document.visibilityState!="visible"))for(var t in e.sources)f.scheduleSourceAudio(e.sources[t])},scheduleSourceAudio:function(e,t){if(!(b.mainLoop.timingMode===1&&document.visibilityState!="visible")&&e.state===4114){for(var r=f.updateSourceTime(e),n=e.bufStartTime,a=e.bufOffset,o=e.bufsProcessed,u=0;u<e.audioQueue.length;u++){var c=e.audioQueue[u];n=c._startTime+c._duration,a=0,o+=c._skipCount+1}t||(t=f.QUEUE_LOOKAHEAD);for(var l=r+t,d=0;n<l;){if(o>=e.bufQueue.length)if(e.looping)o%=e.bufQueue.length;else break;var m=e.bufQueue[o%e.bufQueue.length];if(m.length===0){if(d++,d===e.bufQueue.length)break}else{var c=e.context.audioCtx.createBufferSource();c.buffer=m.audioBuf,c.playbackRate.value=e.playbackRate,(m.audioBuf._loopStart||m.audioBuf._loopEnd)&&(c.loopStart=m.audioBuf._loopStart,c.loopEnd=m.audioBuf._loopEnd);var v=0;e.type===4136&&e.looping?(v=Number.POSITIVE_INFINITY,c.loop=!0,m.audioBuf._loopStart&&(c.loopStart=m.audioBuf._loopStart),m.audioBuf._loopEnd&&(c.loopEnd=m.audioBuf._loopEnd)):v=(m.audioBuf.duration-a)/e.playbackRate,c._startOffset=a,c._duration=v,c._skipCount=d,d=0,c.connect(e.gain),typeof c.start<"u"?(n=Math.max(n,e.context.audioCtx.currentTime),c.start(n,a)):typeof c.noteOn<"u"&&(n=Math.max(n,e.context.audioCtx.currentTime),c.noteOn(n)),c._startTime=n,e.audioQueue.push(c),n+=v}a=0,o++}}},updateSourceTime:function(e){var t=e.context.audioCtx.currentTime;if(e.state!==4114)return t;isFinite(e.bufStartTime)||(e.bufStartTime=t-e.bufOffset/e.playbackRate,e.bufOffset=0);for(var r=0;e.audioQueue.length;){var n=e.audioQueue[0];if(e.bufsProcessed+=n._skipCount,r=n._startTime+n._duration,t<r)break;e.audioQueue.shift(),e.bufStartTime=r,e.bufOffset=0,e.bufsProcessed++}if(e.bufsProcessed>=e.bufQueue.length&&!e.looping)f.setSourceState(e,4116);else if(e.type===4136&&e.looping){var a=e.bufQueue[0];if(a.length===0)e.bufOffset=0;else{var o=(t-e.bufStartTime)*e.playbackRate,u=a.audioBuf._loopStart||0,c=a.audioBuf._loopEnd||a.audioBuf.duration;c<=u&&(c=a.audioBuf.duration),o<c?e.bufOffset=o:e.bufOffset=u+(o-u)%(c-u)}}else if(e.audioQueue[0])e.bufOffset=(t-e.audioQueue[0]._startTime)*e.playbackRate;else{if(e.type!==4136&&e.looping){var l=f.sourceDuration(e)/e.playbackRate;l>0&&(e.bufStartTime+=Math.floor((t-e.bufStartTime)/l)*l)}for(var d=0;d<e.bufQueue.length;d++){if(e.bufsProcessed>=e.bufQueue.length)if(e.looping)e.bufsProcessed%=e.bufQueue.length;else{f.setSourceState(e,4116);break}var a=e.bufQueue[e.bufsProcessed];if(a.length>0){if(r=e.bufStartTime+a.audioBuf.duration/e.playbackRate,t<r){e.bufOffset=(t-e.bufStartTime)*e.playbackRate;break}e.bufStartTime=r}e.bufOffset=0,e.bufsProcessed++}}return t},cancelPendingSourceAudio:function(e){f.updateSourceTime(e);for(var t=1;t<e.audioQueue.length;t++){var r=e.audioQueue[t];r.stop()}e.audioQueue.length>1&&(e.audioQueue.length=1)},stopSourceAudio:function(e){for(var t=0;t<e.audioQueue.length;t++)e.audioQueue[t].stop();e.audioQueue.length=0},setSourceState:function(e,t){t===4114?((e.state===4114||e.state==4116)&&(e.bufsProcessed=0,e.bufOffset=0),f.stopSourceAudio(e),e.state=4114,e.bufStartTime=Number.NEGATIVE_INFINITY,f.scheduleSourceAudio(e)):t===4115?e.state===4114&&(f.updateSourceTime(e),f.stopSourceAudio(e),e.state=4115):t===4116?e.state!==4113&&(e.state=4116,e.bufsProcessed=e.bufQueue.length,e.bufStartTime=Number.NEGATIVE_INFINITY,e.bufOffset=0,f.stopSourceAudio(e)):t===4113&&e.state!==4113&&(e.state=4113,e.bufsProcessed=0,e.bufStartTime=Number.NEGATIVE_INFINITY,e.bufOffset=0,f.stopSourceAudio(e))},initSourcePanner:function(e){if(e.type!==4144){for(var t=f.buffers[0],r=0;r<e.bufQueue.length;r++)if(e.bufQueue[r].id!==0){t=e.bufQueue[r];break}if(e.spatialize===1||e.spatialize===2&&t.channels===1){if(e.panner)return;e.panner=e.context.audioCtx.createPanner(),f.updateSourceGlobal(e),f.updateSourceSpace(e),e.panner.connect(e.context.gain),e.gain.disconnect(),e.gain.connect(e.panner)}else{if(!e.panner)return;e.panner.disconnect(),e.gain.disconnect(),e.gain.connect(e.context.gain),e.panner=null}}},updateContextGlobal:function(e){for(var t in e.sources)f.updateSourceGlobal(e.sources[t])},updateSourceGlobal:function(e){var t=e.panner;if(t){t.refDistance=e.refDistance,t.maxDistance=e.maxDistance,t.rolloffFactor=e.rolloffFactor,t.panningModel=e.context.hrtf?"HRTF":"equalpower";var r=e.context.sourceDistanceModel?e.distanceModel:e.context.distanceModel;switch(r){case 0:t.distanceModel="inverse",t.refDistance=340282e33;break;case 53249:case 53250:t.distanceModel="inverse";break;case 53251:case 53252:t.distanceModel="linear";break;case 53253:case 53254:t.distanceModel="exponential";break}}},updateListenerSpace:function(e){var t=e.audioCtx.listener;t.positionX?(t.positionX.value=e.listener.position[0],t.positionY.value=e.listener.position[1],t.positionZ.value=e.listener.position[2]):t.setPosition(e.listener.position[0],e.listener.position[1],e.listener.position[2]),t.forwardX?(t.forwardX.value=e.listener.direction[0],t.forwardY.value=e.listener.direction[1],t.forwardZ.value=e.listener.direction[2],t.upX.value=e.listener.up[0],t.upY.value=e.listener.up[1],t.upZ.value=e.listener.up[2]):t.setOrientation(e.listener.direction[0],e.listener.direction[1],e.listener.direction[2],e.listener.up[0],e.listener.up[1],e.listener.up[2]);for(var r in e.sources)f.updateSourceSpace(e.sources[r])},updateSourceSpace:function(e){if(e.panner){var t=e.panner,r=e.position[0],n=e.position[1],a=e.position[2],o=e.direction[0],u=e.direction[1],c=e.direction[2],l=e.context.listener,d=l.position[0],m=l.position[1],v=l.position[2];if(e.relative){var g=-l.direction[0],C=-l.direction[1],k=-l.direction[2],P=l.up[0],T=l.up[1],L=l.up[2],w=function(Dn,Fn,Pn){var Tn=Math.sqrt(Dn*Dn+Fn*Fn+Pn*Pn);return Tn<Number.EPSILON?0:1/Tn},x=w(g,C,k);g*=x,C*=x,k*=x,x=w(P,T,L),P*=x,T*=x,L*=x;var O=T*k-L*C,$=L*g-P*k,H=P*C-T*g;x=w(O,$,H),O*=x,$*=x,H*=x,P=C*H-k*$,T=k*O-g*H,L=g*$-C*O;var j=o,pe=u,q=c;o=j*O+pe*P+q*g,u=j*$+pe*T+q*C,c=j*H+pe*L+q*k,j=r,pe=n,q=a,r=j*O+pe*P+q*g,n=j*$+pe*T+q*C,a=j*H+pe*L+q*k,r+=d,n+=m,a+=v}t.positionX?(r!=t.positionX.value&&(t.positionX.value=r),n!=t.positionY.value&&(t.positionY.value=n),a!=t.positionZ.value&&(t.positionZ.value=a)):t.setPosition(r,n,a),t.orientationX?(o!=t.orientationX.value&&(t.orientationX.value=o),u!=t.orientationY.value&&(t.orientationY.value=u),c!=t.orientationZ.value&&(t.orientationZ.value=c)):t.setOrientation(o,u,c);var he=e.dopplerShift,Ee=e.velocity[0],Ze=e.velocity[1],Ce=e.velocity[2],De=l.velocity[0],We=l.velocity[1],K=l.velocity[2];if(r===d&&n===m&&a===v||Ee===De&&Ze===We&&Ce===K)e.dopplerShift=1;else{var fe=e.context.speedOfSound,de=e.context.dopplerFactor,Gt=d-r,Wt=m-n,qt=v-a,Sn=Math.sqrt(Gt*Gt+Wt*Wt+qt*qt),wr=(Gt*De+Wt*We+qt*K)/Sn,Er=(Gt*Ee+Wt*Ze+qt*Ce)/Sn;wr=Math.min(wr,fe/de),Er=Math.min(Er,fe/de),e.dopplerShift=(fe-de*wr)/(fe-de*Er)}e.dopplerShift!==he&&f.updateSourceRate(e)}},updateSourceRate:function(e){if(e.state===4114){f.cancelPendingSourceAudio(e);var t=e.audioQueue[0];if(!t)return;var r;e.type===4136&&e.looping?r=Number.POSITIVE_INFINITY:r=(t.buffer.duration-t._startOffset)/e.playbackRate,t._duration=r,t.playbackRate.value=e.playbackRate,f.scheduleSourceAudio(e)}},sourceDuration:function(e){for(var t=0,r=0;r<e.bufQueue.length;r++){var n=e.bufQueue[r].audioBuf;t+=n?n.duration:0}return t},sourceTell:function(e){f.updateSourceTime(e);for(var t=0,r=0;r<e.bufsProcessed;r++)e.bufQueue[r].audioBuf&&(t+=e.bufQueue[r].audioBuf.duration);return t+=e.bufOffset,t},sourceSeek:function(e,t){var r=e.state==4114;if(r&&f.setSourceState(e,4113),e.bufQueue[e.bufsProcessed].audioBuf!==null){for(e.bufsProcessed=0;t>e.bufQueue[e.bufsProcessed].audioBuf.duration;)t-=e.bufQueue[e.bufsProcessed].audiobuf.duration,e.bufsProcessed++;e.bufOffset=t}r&&f.setSourceState(e,4114)},getGlobalParam:function(e,t){if(!f.currentCtx)return null;switch(t){case 49152:return f.currentCtx.dopplerFactor;case 49155:return f.currentCtx.speedOfSound;case 53248:return f.currentCtx.distanceModel;default:return f.currentCtx.err=40962,null}},setGlobalParam:function(e,t,r){if(f.currentCtx)switch(t){case 49152:if(!Number.isFinite(r)||r<0){f.currentCtx.err=40963;return}f.currentCtx.dopplerFactor=r,f.updateListenerSpace(f.currentCtx);break;case 49155:if(!Number.isFinite(r)||r<=0){f.currentCtx.err=40963;return}f.currentCtx.speedOfSound=r,f.updateListenerSpace(f.currentCtx);break;case 53248:switch(r){case 0:case 53249:case 53250:case 53251:case 53252:case 53253:case 53254:f.currentCtx.distanceModel=r,f.updateContextGlobal(f.currentCtx);break;default:f.currentCtx.err=40963;return}break;default:f.currentCtx.err=40962;return}},getListenerParam:function(e,t){if(!f.currentCtx)return null;switch(t){case 4100:return f.currentCtx.listener.position;case 4102:return f.currentCtx.listener.velocity;case 4111:return f.currentCtx.listener.direction.concat(f.currentCtx.listener.up);case 4106:return f.currentCtx.gain.gain.value;default:return f.currentCtx.err=40962,null}},setListenerParam:function(e,t,r){if(f.currentCtx){if(r===null){f.currentCtx.err=40962;return}var n=f.currentCtx.listener;switch(t){case 4100:if(!Number.isFinite(r[0])||!Number.isFinite(r[1])||!Number.isFinite(r[2])){f.currentCtx.err=40963;return}n.position[0]=r[0],n.position[1]=r[1],n.position[2]=r[2],f.updateListenerSpace(f.currentCtx);break;case 4102:if(!Number.isFinite(r[0])||!Number.isFinite(r[1])||!Number.isFinite(r[2])){f.currentCtx.err=40963;return}n.velocity[0]=r[0],n.velocity[1]=r[1],n.velocity[2]=r[2],f.updateListenerSpace(f.currentCtx);break;case 4106:if(!Number.isFinite(r)||r<0){f.currentCtx.err=40963;return}f.currentCtx.gain.gain.value=r;break;case 4111:if(!Number.isFinite(r[0])||!Number.isFinite(r[1])||!Number.isFinite(r[2])||!Number.isFinite(r[3])||!Number.isFinite(r[4])||!Number.isFinite(r[5])){f.currentCtx.err=40963;return}n.direction[0]=r[0],n.direction[1]=r[1],n.direction[2]=r[2],n.up[0]=r[3],n.up[1]=r[4],n.up[2]=r[5],f.updateListenerSpace(f.currentCtx);break;default:f.currentCtx.err=40962;return}}},getBufferParam:function(e,t,r){if(f.currentCtx){var n=f.buffers[t];if(!n||t===0){f.currentCtx.err=40961;return}switch(r){case 8193:return n.frequency;case 8194:return n.bytesPerSample*8;case 8195:return n.channels;case 8196:return n.length*n.bytesPerSample*n.channels;case 8213:return n.length===0?[0,0]:[(n.audioBuf._loopStart||0)*n.frequency,(n.audioBuf._loopEnd||n.length)*n.frequency];default:return f.currentCtx.err=40962,null}}},setBufferParam:function(e,t,r,n){if(f.currentCtx){var a=f.buffers[t];if(!a||t===0){f.currentCtx.err=40961;return}if(n===null){f.currentCtx.err=40962;return}switch(r){case 8196:if(n!==0){f.currentCtx.err=40963;return}break;case 8213:if(n[0]<0||n[0]>a.length||n[1]<0||n[1]>a.Length||n[0]>=n[1]){f.currentCtx.err=40963;return}if(a.refCount>0){f.currentCtx.err=40964;return}a.audioBuf&&(a.audioBuf._loopStart=n[0]/a.frequency,a.audioBuf._loopEnd=n[1]/a.frequency);break;default:f.currentCtx.err=40962;return}}},getSourceParam:function(e,t,r){if(!f.currentCtx)return null;var n=f.currentCtx.sources[t];if(!n)return f.currentCtx.err=40961,null;switch(r){case 514:return n.relative;case 4097:return n.coneInnerAngle;case 4098:return n.coneOuterAngle;case 4099:return n.pitch;case 4100:return n.position;case 4101:return n.direction;case 4102:return n.velocity;case 4103:return n.looping;case 4105:return n.type===4136?n.bufQueue[0].id:0;case 4106:return n.gain.gain.value;case 4109:return n.minGain;case 4110:return n.maxGain;case 4112:return n.state;case 4117:return n.bufQueue.length===1&&n.bufQueue[0].id===0?0:n.bufQueue.length;case 4118:return n.bufQueue.length===1&&n.bufQueue[0].id===0||n.looping?0:n.bufsProcessed;case 4128:return n.refDistance;case 4129:return n.rolloffFactor;case 4130:return n.coneOuterGain;case 4131:return n.maxDistance;case 4132:return f.sourceTell(n);case 4133:var a=f.sourceTell(n);return a>0&&(a*=n.bufQueue[0].frequency),a;case 4134:var a=f.sourceTell(n);return a>0&&(a*=n.bufQueue[0].frequency*n.bufQueue[0].bytesPerSample),a;case 4135:return n.type;case 4628:return n.spatialize;case 8201:for(var o=0,u=0,c=0;c<n.bufQueue.length;c++)o+=n.bufQueue[c].length,n.bufQueue[c].id!==0&&(u=n.bufQueue[c].bytesPerSample*n.bufQueue[c].channels);return o*u;case 8202:for(var o=0,c=0;c<n.bufQueue.length;c++)o+=n.bufQueue[c].length;return o;case 8203:return f.sourceDuration(n);case 53248:return n.distanceModel;default:return f.currentCtx.err=40962,null}},setSourceParam:function(e,t,r,n){if(f.currentCtx){var a=f.currentCtx.sources[t];if(!a){f.currentCtx.err=40961;return}if(n===null){f.currentCtx.err=40962;return}switch(r){case 514:if(n===1)a.relative=!0,f.updateSourceSpace(a);else if(n===0)a.relative=!1,f.updateSourceSpace(a);else{f.currentCtx.err=40963;return}break;case 4097:if(!Number.isFinite(n)){f.currentCtx.err=40963;return}a.coneInnerAngle=n,a.panner&&(a.panner.coneInnerAngle=n%360);break;case 4098:if(!Number.isFinite(n)){f.currentCtx.err=40963;return}a.coneOuterAngle=n,a.panner&&(a.panner.coneOuterAngle=n%360);break;case 4099:if(!Number.isFinite(n)||n<=0){f.currentCtx.err=40963;return}if(a.pitch===n)break;a.pitch=n,f.updateSourceRate(a);break;case 4100:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){f.currentCtx.err=40963;return}a.position[0]=n[0],a.position[1]=n[1],a.position[2]=n[2],f.updateSourceSpace(a);break;case 4101:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){f.currentCtx.err=40963;return}a.direction[0]=n[0],a.direction[1]=n[1],a.direction[2]=n[2],f.updateSourceSpace(a);break;case 4102:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){f.currentCtx.err=40963;return}a.velocity[0]=n[0],a.velocity[1]=n[1],a.velocity[2]=n[2],f.updateSourceSpace(a);break;case 4103:if(n===1){if(a.looping=!0,f.updateSourceTime(a),a.type===4136&&a.audioQueue.length>0){var o=a.audioQueue[0];o.loop=!0,o._duration=Number.POSITIVE_INFINITY}}else if(n===0){a.looping=!1;var u=f.updateSourceTime(a);if(a.type===4136&&a.audioQueue.length>0){var o=a.audioQueue[0];o.loop=!1,o._duration=a.bufQueue[0].audioBuf.duration/a.playbackRate,o._startTime=u-a.bufOffset/a.playbackRate}}else{f.currentCtx.err=40963;return}break;case 4105:if(a.state===4114||a.state===4115){f.currentCtx.err=40964;return}if(n===0){for(var c in a.bufQueue)a.bufQueue[c].refCount--;a.bufQueue.length=1,a.bufQueue[0]=f.buffers[0],a.bufsProcessed=0,a.type=4144}else{var l=f.buffers[n];if(!l){f.currentCtx.err=40963;return}for(var c in a.bufQueue)a.bufQueue[c].refCount--;a.bufQueue.length=0,l.refCount++,a.bufQueue=[l],a.bufsProcessed=0,a.type=4136}f.initSourcePanner(a),f.scheduleSourceAudio(a);break;case 4106:if(!Number.isFinite(n)||n<0){f.currentCtx.err=40963;return}a.gain.gain.value=n;break;case 4109:if(!Number.isFinite(n)||n<0||n>Math.min(a.maxGain,1)){f.currentCtx.err=40963;return}a.minGain=n;break;case 4110:if(!Number.isFinite(n)||n<Math.max(0,a.minGain)||n>1){f.currentCtx.err=40963;return}a.maxGain=n;break;case 4128:if(!Number.isFinite(n)||n<0){f.currentCtx.err=40963;return}a.refDistance=n,a.panner&&(a.panner.refDistance=n);break;case 4129:if(!Number.isFinite(n)||n<0){f.currentCtx.err=40963;return}a.rolloffFactor=n,a.panner&&(a.panner.rolloffFactor=n);break;case 4130:if(!Number.isFinite(n)||n<0||n>1){f.currentCtx.err=40963;return}a.coneOuterGain=n,a.panner&&(a.panner.coneOuterGain=n);break;case 4131:if(!Number.isFinite(n)||n<0){f.currentCtx.err=40963;return}a.maxDistance=n,a.panner&&(a.panner.maxDistance=n);break;case 4132:if(n<0||n>f.sourceDuration(a)){f.currentCtx.err=40963;return}f.sourceSeek(a,n);break;case 4133:var v=f.sourceDuration(a);if(v>0){var d;for(var m in a.bufQueue)if(m){d=a.bufQueue[m].frequency;break}n/=d}if(n<0||n>v){f.currentCtx.err=40963;return}f.sourceSeek(a,n);break;case 4134:var v=f.sourceDuration(a);if(v>0){var g;for(var m in a.bufQueue)if(m){var l=a.bufQueue[m];g=l.frequency*l.bytesPerSample*l.channels;break}n/=g}if(n<0||n>v){f.currentCtx.err=40963;return}f.sourceSeek(a,n);break;case 4628:if(n!==0&&n!==1&&n!==2){f.currentCtx.err=40963;return}a.spatialize=n,f.initSourcePanner(a);break;case 8201:case 8202:case 8203:f.currentCtx.err=40964;break;case 53248:switch(n){case 0:case 53249:case 53250:case 53251:case 53252:case 53253:case 53254:a.distanceModel=n,f.currentCtx.sourceDistanceModel&&f.updateContextGlobal(f.currentCtx);break;default:f.currentCtx.err=40963;return}break;default:f.currentCtx.err=40962;return}}},captures:{},sharedCaptureAudioCtx:null,requireValidCaptureDevice:function(e,t){if(e===0)return f.alcErr=40961,null;var r=f.captures[e];if(!r)return f.alcErr=40961,null;var n=r.mediaStreamError;return n?(f.alcErr=40961,null):r}};function li(e,t,r,n,a){if(f.currentCtx){var o=f.buffers[e];if(!o){f.currentCtx.err=40963;return}if(a<=0){f.currentCtx.err=40963;return}var u=null;try{switch(t){case 4352:if(n>0){u=f.currentCtx.audioCtx.createBuffer(1,n,a);for(var c=u.getChannelData(0),l=0;l<n;++l)c[l]=G[r++]*.0078125-1}o.bytesPerSample=1,o.channels=1,o.length=n;break;case 4353:if(n>0){u=f.currentCtx.audioCtx.createBuffer(1,n>>1,a);var c=u.getChannelData(0);r>>=1;for(var l=0;l<n>>1;++l)c[l]=se[r++]*30517578125e-15}o.bytesPerSample=2,o.channels=1,o.length=n>>1;break;case 4354:if(n>0){u=f.currentCtx.audioCtx.createBuffer(2,n>>1,a);for(var c=u.getChannelData(0),d=u.getChannelData(1),l=0;l<n>>1;++l)c[l]=G[r++]*.0078125-1,d[l]=G[r++]*.0078125-1}o.bytesPerSample=1,o.channels=2,o.length=n>>1;break;case 4355:if(n>0){u=f.currentCtx.audioCtx.createBuffer(2,n>>2,a);var c=u.getChannelData(0),d=u.getChannelData(1);r>>=1;for(var l=0;l<n>>2;++l)c[l]=se[r++]*30517578125e-15,d[l]=se[r++]*30517578125e-15}o.bytesPerSample=2,o.channels=2,o.length=n>>2;break;case 65552:if(n>0){u=f.currentCtx.audioCtx.createBuffer(1,n>>2,a);var c=u.getChannelData(0);r>>=2;for(var l=0;l<n>>2;++l)c[l]=ue[r++]}o.bytesPerSample=4,o.channels=1,o.length=n>>2;break;case 65553:if(n>0){u=f.currentCtx.audioCtx.createBuffer(2,n>>3,a);var c=u.getChannelData(0),d=u.getChannelData(1);r>>=2;for(var l=0;l<n>>3;++l)c[l]=ue[r++],d[l]=ue[r++]}o.bytesPerSample=4,o.channels=2,o.length=n>>3;break;default:f.currentCtx.err=40963;return}o.frequency=a,o.audioBuf=u}catch{f.currentCtx.err=40963;return}}}function fi(e,t){if(f.currentCtx){for(var r=0;r<e;++r){var n=_[t+r*4>>2];if(n!==0){if(!f.buffers[n]){f.currentCtx.err=40961;return}if(f.buffers[n].refCount){f.currentCtx.err=40964;return}}}for(var r=0;r<e;++r){var n=_[t+r*4>>2];n!==0&&(f.deviceRefCounts[f.buffers[n].deviceId]--,delete f.buffers[n],f.freeIds.push(n))}}}function cn(e,t,r){switch(t){case 514:case 4097:case 4098:case 4103:case 4105:case 4128:case 4129:case 4131:case 4132:case 4133:case 4134:case 4628:case 8201:case 8202:case 53248:f.setSourceParam("alSourcei",e,t,r);break;default:f.setSourceParam("alSourcei",e,t,null);break}}function di(e,t){if(f.currentCtx){for(var r=0;r<e;++r){var n=_[t+r*4>>2];if(!f.currentCtx.sources[n]){f.currentCtx.err=40961;return}}for(var r=0;r<e;++r){var n=_[t+r*4>>2];f.setSourceState(f.currentCtx.sources[n],4116),cn(n,4105,0),delete f.currentCtx.sources[n],f.freeIds.push(n)}}}function mi(e,t){if(f.currentCtx)for(var r=0;r<e;++r){var n={deviceId:f.currentCtx.deviceId,id:f.newId(),refCount:0,audioBuf:null,frequency:0,bytesPerSample:2,channels:1,length:0};f.deviceRefCounts[n.deviceId]++,f.buffers[n.id]=n,_[t+r*4>>2]=n.id}}function pi(e,t){if(f.currentCtx)for(var r=0;r<e;++r){var n=f.currentCtx.audioCtx.createGain();n.connect(f.currentCtx.gain);var a={context:f.currentCtx,id:f.newId(),type:4144,state:4113,bufQueue:[f.buffers[0]],audioQueue:[],looping:!1,pitch:1,dopplerShift:1,gain:n,minGain:0,maxGain:1,panner:null,bufsProcessed:0,bufStartTime:Number.NEGATIVE_INFINITY,bufOffset:0,relative:!1,refDistance:1,maxDistance:340282e33,rolloffFactor:1,position:[0,0,0],velocity:[0,0,0],direction:[0,0,0],coneOuterGain:0,coneInnerAngle:360,coneOuterAngle:360,distanceModel:53250,spatialize:2,get playbackRate(){return this.pitch*this.dopplerShift}};f.currentCtx.sources[a.id]=a,_[t+r*4>>2]=a.id}}function hi(){if(!f.currentCtx)return 40964;var e=f.currentCtx.err;return f.currentCtx.err=0,e}function vi(e,t,r){var n=f.getSourceParam("alGetSourcei",e,t);if(n!==null){if(!r){f.currentCtx.err=40963;return}switch(t){case 514:case 4097:case 4098:case 4103:case 4105:case 4112:case 4117:case 4118:case 4128:case 4129:case 4131:case 4132:case 4133:case 4134:case 4135:case 4628:case 8201:case 8202:case 53248:_[r>>2]=n;break;default:f.currentCtx.err=40962;return}}}function gi(e){if(f.stringCache[e])return f.stringCache[e];var t;switch(e){case 0:t="No Error";break;case 40961:t="Invalid Name";break;case 40962:t="Invalid Enum";break;case 40963:t="Invalid Value";break;case 40964:t="Invalid Operation";break;case 40965:t="Out of Memory";break;case 45057:t="Emscripten";break;case 45058:t="1.1";break;case 45059:t="WebAudio";break;case 45060:t="";for(var r in f.AL_EXTENSIONS)t=t.concat(r),t=t.concat(" ");t=t.trim();break;default:return f.currentCtx&&(f.currentCtx.err=40962),0}return t=Lt(t),f.stringCache[e]=t,t}function bi(e){if(f.currentCtx){var t=f.currentCtx.sources[e];if(!t){f.currentCtx.err=40961;return}f.setSourceState(t,4115)}}function _i(e){if(f.currentCtx){var t=f.currentCtx.sources[e];if(!t){f.currentCtx.err=40961;return}f.setSourceState(t,4114)}}function yi(e){if(f.currentCtx){var t=f.currentCtx.sources[e];if(!t){f.currentCtx.err=40961;return}f.setSourceState(t,4116)}}function wi(e,t,r){switch(t){case 4097:case 4098:case 4099:case 4106:case 4109:case 4110:case 4128:case 4129:case 4130:case 4131:case 4132:case 4133:case 4134:case 8203:f.setSourceParam("alSourcef",e,t,r);break;default:f.setSourceParam("alSourcef",e,t,null);break}}function Ei(e){return!(e in f.deviceRefCounts)||f.deviceRefCounts[e]>0?0:(delete f.deviceRefCounts[e],f.freeIds.push(e),1)}function Ci(e,t,r){e.addEventListener(t,r,{once:!0})}function ln(e,t){t||(t=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach(function(r){t.forEach(function(n){n&&Ci(n,r,()=>{e.state==="suspended"&&e.resume()})})})}function xi(e,t){if(!(e in f.deviceRefCounts))return f.alcErr=40961,0;var r=null,n=[],a=null;if(t>>=2,t)for(var o=0,u=0;o=_[t++],n.push(o),o!==0;)switch(u=_[t++],n.push(u),o){case 4103:r||(r={}),r.sampleRate=u;break;case 4112:case 4113:break;case 6546:switch(u){case 0:a=!1;break;case 1:a=!0;break;case 2:break;default:return f.alcErr=40964,0}break;case 6550:if(u!==0)return f.alcErr=40964,0;break;default:return f.alcErr=40964,0}var c=window.AudioContext||window.webkitAudioContext,l=null;try{r?l=new c(r):l=new c}catch(C){return C.name==="NotSupportedError"?f.alcErr=40964:f.alcErr=40961,0}ln(l),typeof l.createGain>"u"&&(l.createGain=l.createGainNode);var d=l.createGain();d.connect(l.destination);var m={deviceId:e,id:f.newId(),attrs:n,audioCtx:l,listener:{position:[0,0,0],velocity:[0,0,0],direction:[0,0,0],up:[0,0,0]},sources:[],interval:setInterval(function(){f.scheduleContextAudio(m)},f.QUEUE_INTERVAL),gain:d,distanceModel:53250,speedOfSound:343.3,dopplerFactor:1,sourceDistanceModel:!1,hrtf:a||!1,_err:0,get err(){return this._err},set err(C){(this._err===0||C===0)&&(this._err=C)}};if(f.deviceRefCounts[e]++,f.contexts[m.id]=m,a!==null)for(var v in f.contexts){var g=f.contexts[v];g.deviceId===e&&(g.hrtf=a,f.updateContextGlobal(g))}return m.id}function ki(e){var t=f.contexts[e];if(f.currentCtx===t){f.alcErr=40962;return}f.contexts[e].interval&&clearInterval(f.contexts[e].interval),f.deviceRefCounts[t.deviceId]--,delete f.contexts[e],f.freeIds.push(e)}function Si(e){var t=f.alcErr;return f.alcErr=0,t}function Di(e,t){if(f.alcStringCache[t])return f.alcStringCache[t];var r;switch(t){case 0:r="No Error";break;case 40961:r="Invalid Device";break;case 40962:r="Invalid Context";break;case 40963:r="Invalid Enum";break;case 40964:r="Invalid Value";break;case 40965:r="Out of Memory";break;case 4100:if(typeof AudioContext<"u"||typeof webkitAudioContext<"u")r=f.DEVICE_NAME;else return 0;break;case 4101:typeof AudioContext<"u"||typeof webkitAudioContext<"u"?r=f.DEVICE_NAME.concat("\0"):r="\0";break;case 785:r=f.CAPTURE_DEVICE_NAME;break;case 784:if(e===0)r=f.CAPTURE_DEVICE_NAME.concat("\0");else{var n=f.requireValidCaptureDevice(e,"alcGetString");if(!n)return 0;r=n.deviceName}break;case 4102:if(!e)return f.alcErr=40961,0;r="";for(var a in f.ALC_EXTENSIONS)r=r.concat(a),r=r.concat(" ");r=r.trim();break;default:return f.alcErr=40963,0}return r=Lt(r),f.alcStringCache[t]=r,r}function Fi(e){return e===0?f.currentCtx=null:f.currentCtx=f.contexts[e],1}function Pi(e){if(e){var t=ee(e);if(t!==f.DEVICE_NAME)return 0}if(typeof AudioContext<"u"||typeof webkitAudioContext<"u"){var r=f.newId();return f.deviceRefCounts[r]=0,r}return 0}function Ti(){return Date.now()}function fn(){return 2147483648}function ji(){return fn()}function Ai(){return!U}function Mi(e,t,r){G.copyWithin(e,t,t+r)}function Li(e){try{return bt.grow(e-wt.byteLength+65535>>>16),Mr(bt.buffer),1}catch{}}function Ri(e){var t=G.length;e=e>>>0;var r=fn();if(e>r)return!1;let n=(l,d)=>l+(d-l%d)%d;for(var a=1;a<=4;a*=2){var o=t*(1+.2/a);o=Math.min(o,e+100663296);var u=Math.min(r,n(Math.max(e,o),65536)),c=Li(u);if(c)return!0}return!1}var Q={xhrs:{},setu64:function(e,t){D[e>>2]=t,D[e+4>>2]=t/4294967296|0},openDatabase:function(e,t,r,n){try{var a=indexedDB.open(e,t)}catch(o){return n(o)}a.onupgradeneeded=o=>{var u=o.target.result;u.objectStoreNames.contains("FILES")&&u.deleteObjectStore("FILES"),u.createObjectStore("FILES")},a.onsuccess=o=>r(o.target.result),a.onerror=o=>n(o)},staticInit:function(){var e=r=>{Q.dbInstance=r,Ve()},t=()=>{Q.dbInstance=!1,Ve()};Q.openDatabase("emscripten_filesystem",1,e,t),(typeof ENVIRONMENT_IS_FETCH_WORKER>"u"||!ENVIRONMENT_IS_FETCH_WORKER)&&nt()}};function hr(e,t,r,n,a){var o=D[e+8>>2];if(!o){r(e,0,"no url specified!");return}var u=ee(o),c=e+112,l=ee(c);l||(l="GET");var d=D[c+52>>2],m=D[c+56>>2],v=!!D[c+60>>2],g=D[c+68>>2],C=D[c+72>>2],k=D[c+76>>2],P=D[c+80>>2],T=D[c+84>>2],L=D[c+88>>2],w=!!(d&1),x=!!(d&2),O=!!(d&64),$=g?ee(g):void 0,H=C?ee(C):void 0,j=new XMLHttpRequest;if(j.withCredentials=v,j.open(l,u,!O,$,H),O||(j.timeout=m),j.url_=u,j.responseType="arraybuffer",P){var pe=ee(P);j.overrideMimeType(pe)}if(k)for(;;){var q=D[k>>2];if(!q)break;var he=D[k+4>>2];if(!he)break;k+=8;var Ee=ee(q),Ze=ee(he);j.setRequestHeader(Ee,Ze)}var Ce=D[e+0>>2];Q.xhrs[Ce]=j;var De=T&&L?G.slice(T,T+L):null;function We(){var K=0,fe=0;j.response&&w&&D[e+12>>2]===0&&(fe=j.response.byteLength),fe>0&&(K=we(fe),G.set(new Uint8Array(j.response),K)),D[e+12>>2]=K,Q.setu64(e+16,fe),Q.setu64(e+24,0);var de=j.response?j.response.byteLength:0;de&&Q.setu64(e+32,de),Y[e+40>>1]=j.readyState,Y[e+42>>1]=j.status,j.statusText&&ie(j.statusText,e+44,64)}j.onload=K=>{Ce in Q.xhrs&&(We(),j.status>=200&&j.status<300?t&&t(e,j,K):r&&r(e,j,K))},j.onerror=K=>{Ce in Q.xhrs&&(We(),r&&r(e,j,K))},j.ontimeout=K=>{Ce in Q.xhrs&&r&&r(e,j,K)},j.onprogress=K=>{if(Ce in Q.xhrs){var fe=w&&x&&j.response?j.response.byteLength:0,de=0;fe>0&&w&&x&&(de=we(fe),G.set(new Uint8Array(j.response),de)),D[e+12>>2]=de,Q.setu64(e+16,fe),Q.setu64(e+24,K.loaded-fe),Q.setu64(e+32,K.total),Y[e+40>>1]=j.readyState,j.readyState>=3&&j.status===0&&K.loaded>0&&(j.status=200),Y[e+42>>1]=j.status,j.statusText&&ie(j.statusText,e+44,64),n&&n(e,j,K),de&&Se(de)}},j.onreadystatechange=K=>{Ce in Q.xhrs&&(Y[e+40>>1]=j.readyState,j.readyState>=2&&(Y[e+42>>1]=j.status),a&&a(e,j,K))};try{j.send(De)}catch(K){r&&r(e,j,K)}}function dn(e,t,r,n,a){if(!e){a(t,0,"IndexedDB not available!");return}var o=t+112,u=D[o+64>>2];u||(u=D[t+8>>2]);var c=ee(u);try{var l=e.transaction(["FILES"],"readwrite"),d=l.objectStore("FILES"),m=d.put(r,c);m.onsuccess=v=>{Y[t+40>>1]=4,Y[t+42>>1]=200,ie("OK",t+44,64),n(t,0,c)},m.onerror=v=>{Y[t+40>>1]=4,Y[t+42>>1]=413,ie("Payload Too Large",t+44,64),a(t,0,v)}}catch(v){a(t,0,v)}}function Ni(e,t,r,n){if(!e){n(t,0,"IndexedDB not available!");return}var a=t+112,o=D[a+64>>2];o||(o=D[t+8>>2]);var u=ee(o);try{var c=e.transaction(["FILES"],"readonly"),l=c.objectStore("FILES"),d=l.get(u);d.onsuccess=m=>{if(m.target.result){var v=m.target.result,g=v.byteLength||v.length,C=we(g);G.set(new Uint8Array(v),C),D[t+12>>2]=C,Q.setu64(t+16,g),Q.setu64(t+24,0),Q.setu64(t+32,g),Y[t+40>>1]=4,Y[t+42>>1]=200,ie("OK",t+44,64),r(t,0,v)}else Y[t+40>>1]=4,Y[t+42>>1]=404,ie("Not Found",t+44,64),n(t,0,"no data")},d.onerror=m=>{Y[t+40>>1]=4,Y[t+42>>1]=404,ie("Not Found",t+44,64),n(t,0,m)}}catch(m){n(t,0,m)}}function Ii(e,t,r,n){if(!e){n(t,0,"IndexedDB not available!");return}var a=t+112,o=D[a+64>>2];o||(o=D[t+8>>2]);var u=ee(o);try{var c=e.transaction(["FILES"],"readwrite"),l=c.objectStore("FILES"),d=l.delete(u);d.onsuccess=m=>{var v=m.target.result;D[t+12>>2]=0,Q.setu64(t+16,0),Q.setu64(t+24,0),Q.setu64(t+32,0),Y[t+40>>1]=4,Y[t+42>>1]=200,ie("OK",t+44,64),r(t,0,v)},d.onerror=m=>{Y[t+40>>1]=4,Y[t+42>>1]=404,ie("Not Found",t+44,64),n(t,0,m)}}catch(m){n(t,0,m)}}function Oi(e,t,r,n,a){var o=e+112,u=ee(o),c=D[o+36>>2],l=D[o+40>>2],d=D[o+44>>2],m=D[o+48>>2],v=D[o+52>>2],g=!!(v&4),C=!!(v&32),k=!!(v&16),P=!!(v&64);function T(q){P?q():Nt(q)}var L=(q,he,Ee)=>{T(()=>{c?Me(c)(q):t&&t(q)})},w=(q,he,Ee)=>{T(()=>{d?Me(d)(q):n&&n(q)})},x=(q,he,Ee)=>{T(()=>{l?Me(l)(q):r&&r(q)})},O=(q,he,Ee)=>{T(()=>{m?Me(m)(q):a&&a(q)})},$=(q,he,Ee)=>{hr(q,L,x,w,O)},H=(q,he,Ee)=>{var Ze=(De,We,K)=>{T(()=>{c?Me(c)(De):t&&t(De)})},Ce=(De,We,K)=>{T(()=>{c?Me(c)(De):t&&t(De)})};dn(Q.dbInstance,q,he.response,Ze,Ce)},j=(q,he,Ee)=>{hr(q,H,x,w,O)};if(u==="EM_IDB_STORE"){var pe=D[o+84>>2];dn(Q.dbInstance,e,G.slice(pe,pe+D[o+88>>2]),L,x)}else if(u==="EM_IDB_DELETE")Ii(Q.dbInstance,e,L,x);else if(!k)Ni(Q.dbInstance,e,L,C?x:g?j:$);else if(!C)hr(e,g?H:L,x,w,O);else return 0;return e}var vr={};function Bi(){return A||"./this.program"}function lt(){if(!lt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Bi()};for(var r in vr)vr[r]===void 0?delete t[r]:t[r]=vr[r];var n=[];for(var r in t)n.push(r+"="+t[r]);lt.strings=n}return lt.strings}function $i(e,t,r){for(var n=0;n<e.length;++n)X[t++>>0]=e.charCodeAt(n);r||(X[t>>0]=0)}function Vi(e,t){var r=0;return lt().forEach(function(n,a){var o=t+r;D[e+a*4>>2]=o,$i(n,o),r+=n.length+1}),0}function Ui(e,t){var r=lt();D[e>>2]=r.length;var n=0;return r.forEach(function(a){n+=a.length+1}),D[t>>2]=n,0}function zi(e){try{var t=I.getStreamFromFD(e);return s.close(t),0}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return r.errno}}function Gi(e,t){try{var r=I.getStreamFromFD(e),n=r.tty?2:s.isDir(r.mode)?3:s.isLink(r.mode)?7:4;return X[t>>0]=n,0}catch(a){if(typeof s>"u"||!(a instanceof s.ErrnoError))throw a;return a.errno}}function Wi(e,t,r,n){for(var a=0,o=0;o<r;o++){var u=D[t>>2],c=D[t+4>>2];t+=8;var l=s.read(e,X,u,c,n);if(l<0)return-1;if(a+=l,l<c)break}return a}function qi(e,t,r,n){try{var a=I.getStreamFromFD(e),o=Wi(a,t,r);return D[n>>2]=o,0}catch(u){if(typeof s>"u"||!(u instanceof s.ErrnoError))throw u;return u.errno}}function Qi(e,t,r,n,a){try{var o=zr(t,r);if(isNaN(o))return 61;var u=I.getStreamFromFD(e);return s.llseek(u,o,n),J=[u.position>>>0,(N=u.position,+Math.abs(N)>=1?N>0?(Math.min(+Math.floor(N/4294967296),4294967295)|0)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],_[a>>2]=J[0],_[a+4>>2]=J[1],u.getdents&&o===0&&n===0&&(u.getdents=null),0}catch(c){if(typeof s>"u"||!(c instanceof s.ErrnoError))throw c;return c.errno}}function Yi(e){try{var t=I.getStreamFromFD(e);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(r){if(typeof s>"u"||!(r instanceof s.ErrnoError))throw r;return r.errno}}function Hi(e,t,r,n){for(var a=0,o=0;o<r;o++){var u=D[t>>2],c=D[t+4>>2];t+=8;var l=s.write(e,X,u,c,n);if(l<0)return-1;a+=l}return a}function Xi(e,t,r,n){try{var a=I.getStreamFromFD(e),o=Hi(a,t,r);return D[n>>2]=o,0}catch(u){if(typeof s>"u"||!(u instanceof s.ErrnoError))throw u;return u.errno}}function It(e){for(var t=e.split("."),r=0;r<4;r++){var n=Number(t[r]);if(isNaN(n))return null;t[r]=n}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function ft(e){return parseInt(e)}function gr(e){var t,r,n,a,o=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,u=[];if(!o.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];for(e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),t=e.split(":"),t[t.length-4]=ft(t[t.length-4])+ft(t[t.length-3])*256,t[t.length-3]=ft(t[t.length-2])+ft(t[t.length-1])*256,t=t.slice(0,t.length-2)):t=e.split(":"),n=0,a=0,r=0;r<t.length;r++)if(typeof t[r]=="string")if(t[r]==="Z"){for(a=0;a<8-t.length+1;a++)u[r+a]=0;n=a-1}else u[r+n]=Ut(parseInt(t[r],16));else u[r+n]=t[r];return[u[1]<<16|u[0],u[3]<<16|u[2],u[5]<<16|u[4],u[7]<<16|u[6]]}var Le={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t=It(e);if(t!==null||(t=gr(e),t!==null))return e;var r;if(Le.address_map.addrs[e])r=Le.address_map.addrs[e];else{var n=Le.address_map.id++;Oe(n<65535,"exceeded max address mappings of 65535"),r="172.29."+(n&255)+"."+(n&65280),Le.address_map.names[r]=e,Le.address_map.addrs[e]=r}return r},lookup_addr:function(e){return Le.address_map.names[e]?Le.address_map.names[e]:null}};function mn(e){return(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function Ji(e){var t="",r=0,n=0,a=0,o=0,u=0,c=0,l=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],d=!0,m="";for(c=0;c<5;c++)if(l[c]!==0){d=!1;break}if(d){if(m=mn(l[6]|l[7]<<16),l[5]===-1)return t="::ffff:",t+=m,t;if(l[5]===0)return t="::",m==="0.0.0.0"&&(m=""),m==="0.0.0.1"&&(m="1"),t+=m,t}for(r=0;r<8;r++)l[r]===0&&(r-a>1&&(u=0),a=r,u++),u>n&&(n=u,o=r-n+1);for(r=0;r<8;r++){if(n>1&&l[r]===0&&r>=o&&r<o+n){r===o&&(t+=":",o===0&&(t+=":"));continue}t+=Number(Cn(l[r]&65535)).toString(16),t+=r<7?":":""}return t}function Ki(e,t,r,n,a){switch(t){case 2:r=It(r),tr(e,16),a&&(_[a>>2]=16),se[e>>1]=t,_[e+4>>2]=r,se[e+2>>1]=Ut(n);break;case 10:r=gr(r),tr(e,28),a&&(_[a>>2]=28),_[e>>2]=t,_[e+8>>2]=r[0],_[e+12>>2]=r[1],_[e+16>>2]=r[2],_[e+20>>2]=r[3],se[e+2>>1]=Ut(n);break;default:return 5}return 0}function Zi(e,t,r,n){var a=0,o=0,u=0,c=0,l=0,d=0,m;function v(g,C,k,P,T,L){var w,x,O,$;return x=g===10?28:16,T=g===10?Ji(T):mn(T),w=we(x),$=Ki(w,g,T,L),Oe(!$),O=we(32),_[O+4>>2]=g,_[O+8>>2]=C,_[O+12>>2]=k,_[O+24>>2]=P,D[O+20>>2]=w,g===10?_[O+16>>2]=28:_[O+16>>2]=16,_[O+28>>2]=0,O}if(r&&(u=_[r>>2],c=_[r+4>>2],l=_[r+8>>2],d=_[r+12>>2]),l&&!d&&(d=l===2?17:6),!l&&d&&(l=d===17?2:1),d===0&&(d=6),l===0&&(l=1),!e&&!t)return-2;if(u&-1088||r!==0&&_[r>>2]&2&&!e)return-1;if(u&32)return-2;if(l!==0&&l!==1&&l!==2)return-7;if(c!==0&&c!==2&&c!==10)return-6;if(t&&(t=ee(t),o=parseInt(t,10),isNaN(o)))return u&1024?-2:-8;if(!e)return c===0&&(c=2),(u&1)===0&&(c===2?a=Vt(2130706433):a=[0,0,0,1]),m=v(c,l,d,null,a,o),D[n>>2]=m,0;if(e=ee(e),a=It(e),a!==null)if(c===0||c===2)c=2;else if(c===10&&u&8)a=[0,0,Vt(65535),a],c=10;else return-2;else if(a=gr(e),a!==null)if(c===0||c===10)c=10;else return-2;return a!=null?(m=v(c,l,d,e,a,o),D[n>>2]=m,0):u&4?-2:(e=Le.lookup_name(e),a=It(e),c===0?c=2:c===10&&(a=[0,0,Vt(65535),a]),m=v(c,l,d,null,a,o),D[n>>2]=m,0)}function Ot(e,t){Ot.randomDevice||(Ot.randomDevice=Vr());for(var r=0;r<t;r++)X[e+r>>0]=Ot.randomDevice();return 0}function es(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(r,n){t.vertexAttribDivisorANGLE(r,n)},e.drawArraysInstanced=function(r,n,a,o){t.drawArraysInstancedANGLE(r,n,a,o)},e.drawElementsInstanced=function(r,n,a,o,u){t.drawElementsInstancedANGLE(r,n,a,o,u)},1}function ts(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(r){t.deleteVertexArrayOES(r)},e.bindVertexArray=function(r){t.bindVertexArrayOES(r)},e.isVertexArray=function(r){return t.isVertexArrayOES(r)},1}function rs(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(r,n){t.drawBuffersWEBGL(r,n)},1}function ns(e){return!!(e.dibvbi=e.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function as(e){return!!(e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function os(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var E={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){E.lastError||(E.lastError=e)},getNewId:function(e){for(var t=E.counter++,r=e.length;r<t;r++)e[r]=null;return t},getSource:function(e,t,r,n){for(var a="",o=0;o<t;++o){var u=n?_[n+o*4>>2]:-1;a+=ee(_[r+o*4>>2],u<0?void 0:u)}return a},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){let a=function(o,u){var c=e.getContextSafariWebGL2Fixed(o,u);return o=="webgl"==c instanceof WebGLRenderingContext?c:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=a}var r=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);if(!r)return 0;var n=E.registerContext(r,t);return n},registerContext:function(e,t){var r=E.getNewId(E.contexts),n={handle:r,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),E.contexts[r]=n,(typeof t.enableExtensionsByDefault>"u"||t.enableExtensionsByDefault)&&E.initExtensions(n),r},makeContextCurrent:function(e){return E.currentContext=E.contexts[e],i.ctx=y=E.currentContext&&E.currentContext.GLctx,!(e&&!y)},getContext:function(e){return E.contexts[e]},deleteContext:function(e){E.currentContext===E.contexts[e]&&(E.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(E.contexts[e].GLctx.canvas),E.contexts[e]&&E.contexts[e].GLctx.canvas&&(E.contexts[e].GLctx.canvas.GLctxObject=void 0),E.contexts[e]=null},initExtensions:function(e){if(e||(e=E.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;es(t),ts(t),rs(t),ns(t),as(t),e.version>=2&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query_webgl2")),(e.version<2||!t.disjointTimerQueryExt)&&(t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query")),os(t);var r=t.getSupportedExtensions()||[];r.forEach(function(n){!n.includes("lose_context")&&!n.includes("debug")&&t.getExtension(n)})}}};function is(e){y.activeTexture(e)}function ss(e,t){y.attachShader(E.programs[e],E.shaders[t])}function us(e,t){e==35051?y.currentPixelPackBufferBinding=t:e==35052&&(y.currentPixelUnpackBufferBinding=t),y.bindBuffer(e,E.buffers[t])}function cs(e,t,r,n,a){y.bindBufferRange(e,t,E.buffers[r],n,a)}function ls(e,t){y.bindFramebuffer(e,E.framebuffers[t])}function fs(e,t){y.bindRenderbuffer(e,E.renderbuffers[t])}function ds(e,t){y.bindTexture(e,E.textures[t])}function ms(e){y.bindVertexArray(E.vaos[e])}function ps(e){y.blendEquation(e)}function hs(e,t){y.blendFunc(e,t)}function vs(e,t,r,n){y.blendFuncSeparate(e,t,r,n)}function gs(e,t,r,n,a,o,u,c,l,d){y.blitFramebuffer(e,t,r,n,a,o,u,c,l,d)}function bs(e,t,r,n){E.currentContext.version>=2?r&&t?y.bufferData(e,G,n,r,t):y.bufferData(e,t,n):y.bufferData(e,r?G.subarray(r,r+t):t,n)}function _s(e,t,r,n){if(E.currentContext.version>=2){r&&y.bufferSubData(e,t,G,n,r);return}y.bufferSubData(e,t,G.subarray(n,n+r))}function ys(e,t,r){y.clearBufferfv(e,t,ue,r>>2)}function ws(e,t,r,n){y.colorMask(!!e,!!t,!!r,!!n)}function Es(e){y.compileShader(E.shaders[e])}function Cs(e,t,r,n,a,o,u,c){if(E.currentContext.version>=2){y.currentPixelUnpackBufferBinding||!u?y.compressedTexImage2D(e,t,r,n,a,o,u,c):y.compressedTexImage2D(e,t,r,n,a,o,G,c,u);return}y.compressedTexImage2D(e,t,r,n,a,o,c?G.subarray(c,c+u):null)}function xs(e,t,r,n,a,o,u,c,l){y.currentPixelUnpackBufferBinding?y.compressedTexImage3D(e,t,r,n,a,o,u,c,l):y.compressedTexImage3D(e,t,r,n,a,o,u,G,l,c)}function ks(e,t,r,n,a,o,u,c){y.copyTexSubImage2D(e,t,r,n,a,o,u,c)}function Ss(){var e=E.getNewId(E.programs),t=y.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,E.programs[e]=t,e}function Ds(e){var t=E.getNewId(E.shaders);return E.shaders[t]=y.createShader(e),t}function Fs(e,t){for(var r=0;r<e;r++){var n=_[t+r*4>>2],a=E.buffers[n];!a||(y.deleteBuffer(a),a.name=0,E.buffers[n]=null,n==y.currentPixelPackBufferBinding&&(y.currentPixelPackBufferBinding=0),n==y.currentPixelUnpackBufferBinding&&(y.currentPixelUnpackBufferBinding=0))}}function Ps(e,t){for(var r=0;r<e;++r){var n=_[t+r*4>>2],a=E.framebuffers[n];!a||(y.deleteFramebuffer(a),a.name=0,E.framebuffers[n]=null)}}function Ts(e){if(e){var t=E.programs[e];if(!t){E.recordError(1281);return}y.deleteProgram(t),t.name=0,E.programs[e]=null}}function js(e,t){for(var r=0;r<e;r++){var n=_[t+r*4>>2],a=E.renderbuffers[n];!a||(y.deleteRenderbuffer(a),a.name=0,E.renderbuffers[n]=null)}}function As(e){if(e){var t=E.shaders[e];if(!t){E.recordError(1281);return}y.deleteShader(t),E.shaders[e]=null}}function Ms(e,t){for(var r=0;r<e;r++){var n=_[t+r*4>>2],a=E.textures[n];!a||(y.deleteTexture(a),a.name=0,E.textures[n]=null)}}function Ls(e,t){for(var r=0;r<e;r++){var n=_[t+r*4>>2];y.deleteVertexArray(E.vaos[n]),E.vaos[n]=null}}function Rs(e){y.depthFunc(e)}function Ns(e){y.depthMask(!!e)}function Is(e){y.disable(e)}function Os(e,t,r){y.drawArrays(e,t,r)}function Bs(e,t,r,n){y.drawArraysInstanced(e,t,r,n)}var br=[];function $s(e,t){for(var r=br[e],n=0;n<e;n++)r[n]=_[t+n*4>>2];y.drawBuffers(r)}function Vs(e,t,r,n){y.drawElements(e,t,r,n)}function Us(e,t,r,n,a){y.drawElementsInstanced(e,t,r,n,a)}function zs(e){y.enable(e)}function Gs(e){y.enableVertexAttribArray(e)}function Ws(e,t,r,n){y.framebufferRenderbuffer(e,t,r,E.renderbuffers[n])}function qs(e,t,r,n,a){y.framebufferTexture2D(e,t,r,E.textures[n],a)}function Qs(e){y.frontFace(e)}function dt(e,t,r,n){for(var a=0;a<e;a++){var o=y[r](),u=o&&E.getNewId(n);o?(o.name=u,n[u]=o):E.recordError(1282),_[t+a*4>>2]=u}}function Ys(e,t){dt(e,t,"createBuffer",E.buffers)}function Hs(e,t){dt(e,t,"createFramebuffer",E.framebuffers)}function Xs(e,t){dt(e,t,"createRenderbuffer",E.renderbuffers)}function Js(e,t){dt(e,t,"createTexture",E.textures)}function Ks(e,t){dt(e,t,"createVertexArray",E.vaos)}function Zs(e){y.generateMipmap(e)}function eu(){var e=y.getError()||E.lastError;return E.lastError=0,e}function tu(e,t){D[e>>2]=t,D[e+4>>2]=(t-D[e>>2])/4294967296}function ru(e,t,r){if(!t){E.recordError(1281);return}var n=void 0;switch(e){case 36346:n=1;break;case 36344:r!=0&&r!=1&&E.recordError(1280);return;case 34814:case 36345:n=0;break;case 34466:var a=y.getParameter(34467);n=a?a.length:0;break;case 33309:if(E.currentContext.version<2){E.recordError(1282);return}var o=y.getSupportedExtensions()||[];n=2*o.length;break;case 33307:case 33308:if(E.currentContext.version<2){E.recordError(1280);return}n=e==33307?3:0;break}if(n===void 0){var u=y.getParameter(e);switch(typeof u){case"number":n=u;break;case"boolean":n=u?1:0;break;case"string":E.recordError(1280);return;case"object":if(u===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{n=0;break}default:{E.recordError(1280);return}}else if(u instanceof Float32Array||u instanceof Uint32Array||u instanceof Int32Array||u instanceof Array){for(var c=0;c<u.length;++c)switch(r){case 0:_[t+c*4>>2]=u[c];break;case 2:ue[t+c*4>>2]=u[c];break;case 4:X[t+c>>0]=u[c]?1:0;break}return}else try{n=u.name|0}catch(l){E.recordError(1280),Z("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+l+")");return}break;default:E.recordError(1280),Z("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+u+" of type "+typeof u+"!");return}}switch(r){case 1:tu(t,n);break;case 0:_[t>>2]=n;break;case 2:ue[t>>2]=n;break;case 4:X[t>>0]=n?1:0;break}}function nu(e,t){ru(e,t,0)}function au(e,t,r,n){var a=y.getProgramInfoLog(E.programs[e]);a===null&&(a="(unknown error)");var o=t>0&&n?ie(a,n,t):0;r&&(_[r>>2]=o)}function ou(e,t,r){if(!r){E.recordError(1281);return}if(e>=E.counter){E.recordError(1281);return}if(e=E.programs[e],t==35716){var n=y.getProgramInfoLog(e);n===null&&(n="(unknown error)"),_[r>>2]=n.length+1}else if(t==35719){if(!e.maxUniformLength)for(var a=0;a<y.getProgramParameter(e,35718);++a)e.maxUniformLength=Math.max(e.maxUniformLength,y.getActiveUniform(e,a).name.length+1);_[r>>2]=e.maxUniformLength}else if(t==35722){if(!e.maxAttributeLength)for(var a=0;a<y.getProgramParameter(e,35721);++a)e.maxAttributeLength=Math.max(e.maxAttributeLength,y.getActiveAttrib(e,a).name.length+1);_[r>>2]=e.maxAttributeLength}else if(t==35381){if(!e.maxUniformBlockNameLength)for(var a=0;a<y.getProgramParameter(e,35382);++a)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,y.getActiveUniformBlockName(e,a).length+1);_[r>>2]=e.maxUniformBlockNameLength}else _[r>>2]=y.getProgramParameter(e,t)}function iu(e,t,r,n){var a=y.getShaderInfoLog(E.shaders[e]);a===null&&(a="(unknown error)");var o=t>0&&n?ie(a,n,t):0;r&&(_[r>>2]=o)}function su(e,t,r){if(!r){E.recordError(1281);return}if(t==35716){var n=y.getShaderInfoLog(E.shaders[e]);n===null&&(n="(unknown error)");var a=n?n.length+1:0;_[r>>2]=a}else if(t==35720){var o=y.getShaderSource(E.shaders[e]),u=o?o.length+1:0;_[r>>2]=u}else _[r>>2]=y.getShaderParameter(E.shaders[e],t)}function pn(e){return e.slice(-1)=="]"&&e.lastIndexOf("[")}function uu(e){var t=e.uniformLocsById,r=e.uniformSizeAndIdsByName,n,a;if(!t)for(e.uniformLocsById=t={},e.uniformArrayNamesById={},n=0;n<y.getProgramParameter(e,35718);++n){var o=y.getActiveUniform(e,n),u=o.name,c=o.size,l=pn(u),d=l>0?u.slice(0,l):u,m=e.uniformIdCounter;for(e.uniformIdCounter+=c,r[d]=[c,m],a=0;a<c;++a)t[m]=a,e.uniformArrayNamesById[m++]=d}}function cu(e,t){if(t=ee(t),e=E.programs[e]){uu(e);var r=e.uniformLocsById,n=0,a=t,o=pn(t);o>0&&(n=ft(t.slice(o+1))>>>0,a=t.slice(0,o));var u=e.uniformSizeAndIdsByName[a];if(u&&n<u[0]&&(n+=u[1],r[n]=r[n]||y.getUniformLocation(e,t)))return n}else E.recordError(1281);return-1}function lu(e,t,r){for(var n=br[t],a=0;a<t;a++)n[a]=_[r+a*4>>2];y.invalidateFramebuffer(e,n)}function fu(e){e=E.programs[e],y.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function du(e,t){e==3317&&(E.unpackAlignment=t),y.pixelStorei(e,t)}function mu(e,t,r,n){function a(c,l){return c+l-1&-l}var o=e*r,u=a(o,n);return t*u}function pu(e){var t={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return t[e-6402]||1}function Je(e){return e-=5120,e==0?X:e==1?G:e==2?se:e==4?_:e==6?ue:e==5||e==28922||e==28520||e==30779||e==30782?D:Y}function Ke(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function _r(e,t,r,n,a,o){var u=Je(e),c=Ke(u),l=1<<c,d=pu(t)*l,m=mu(r,n,d,E.unpackAlignment);return u.subarray(a>>c,a+m>>c)}function hu(e,t,r,n,a,o,u){if(E.currentContext.version>=2){if(y.currentPixelPackBufferBinding)y.readPixels(e,t,r,n,a,o,u);else{var c=Je(o);y.readPixels(e,t,r,n,a,o,c,u>>Ke(c))}return}var l=_r(o,a,r,n,u);if(!l){E.recordError(1280);return}y.readPixels(e,t,r,n,a,o,l)}function vu(e,t,r,n){y.renderbufferStorage(e,t,r,n)}function gu(e,t,r,n,a){y.renderbufferStorageMultisample(e,t,r,n,a)}function bu(e,t,r,n){var a=E.getSource(e,t,r,n);y.shaderSource(E.shaders[e],a)}function _u(e,t,r,n,a,o,u,c,l){if(E.currentContext.version>=2){if(y.currentPixelUnpackBufferBinding)y.texImage2D(e,t,r,n,a,o,u,c,l);else if(l){var d=Je(c);y.texImage2D(e,t,r,n,a,o,u,c,d,l>>Ke(d))}else y.texImage2D(e,t,r,n,a,o,u,c,null);return}y.texImage2D(e,t,r,n,a,o,u,c,l?_r(c,u,n,a,l):null)}function yu(e,t,r,n,a,o,u,c,l,d){if(y.currentPixelUnpackBufferBinding)y.texImage3D(e,t,r,n,a,o,u,c,l,d);else if(d){var m=Je(l);y.texImage3D(e,t,r,n,a,o,u,c,l,m,d>>Ke(m))}else y.texImage3D(e,t,r,n,a,o,u,c,l,null)}function wu(e,t,r){y.texParameteri(e,t,r)}function Eu(e,t,r,n,a){y.texStorage2D(e,t,r,n,a)}function Cu(e,t,r,n,a,o){y.texStorage3D(e,t,r,n,a,o)}function xu(e,t,r,n,a,o,u,c,l){if(E.currentContext.version>=2){if(y.currentPixelUnpackBufferBinding)y.texSubImage2D(e,t,r,n,a,o,u,c,l);else if(l){var d=Je(c);y.texSubImage2D(e,t,r,n,a,o,u,c,d,l>>Ke(d))}else y.texSubImage2D(e,t,r,n,a,o,u,c,null);return}var m=null;l&&(m=_r(c,u,a,o,l)),y.texSubImage2D(e,t,r,n,a,o,u,c,m)}function ku(e,t,r,n,a,o,u,c,l,d,m){if(y.currentPixelUnpackBufferBinding)y.texSubImage3D(e,t,r,n,a,o,u,c,l,d,m);else if(m){var v=Je(d);y.texSubImage3D(e,t,r,n,a,o,u,c,l,d,v,m>>Ke(v))}else y.texSubImage3D(e,t,r,n,a,o,u,c,l,d,null)}function Re(e){var t=y.currentProgram;if(t){var r=t.uniformLocsById[e];return typeof r=="number"&&(t.uniformLocsById[e]=r=y.getUniformLocation(t,t.uniformArrayNamesById[e]+(r>0?"["+r+"]":""))),r}else E.recordError(1282)}function Su(e,t){y.uniform1f(Re(e),t)}function Du(e,t){y.uniform1i(Re(e),t)}function Fu(e,t){y.uniform1ui(Re(e),t)}function Pu(e,t,r){y.uniform2f(Re(e),t,r)}var yr=[];function Tu(e,t,r){if(E.currentContext.version>=2){t&&y.uniform2fv(Re(e),ue,r>>2,t*2);return}if(t<=144)for(var a=yr[2*t-1],n=0;n<2*t;n+=2)a[n]=ue[r+4*n>>2],a[n+1]=ue[r+(4*n+4)>>2];else var a=ue.subarray(r>>2,r+t*8>>2);y.uniform2fv(Re(e),a)}function ju(e,t,r){if(E.currentContext.version>=2){t&&y.uniform4fv(Re(e),ue,r>>2,t*4);return}if(t<=72){var u=yr[4*t-1],n=ue;r>>=2;for(var a=0;a<4*t;a+=4){var o=r+a;u[a]=n[o],u[a+1]=n[o+1],u[a+2]=n[o+2],u[a+3]=n[o+3]}}else var u=ue.subarray(r>>2,r+t*16>>2);y.uniform4fv(Re(e),u)}function Au(e){e=E.programs[e],y.useProgram(e),y.currentProgram=e}function Mu(e,t,r,n,a){y.vertexAttribIPointer(e,t,r,n,a)}function Lu(e,t,r,n,a,o){y.vertexAttribPointer(e,t,r,!!n,a,o)}function Ru(e,t,r,n){y.viewport(e,t,r,n)}function Nu(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}var hn=[31,29,31,30,31,30,31,31,30,31,30,31],vn=[31,28,31,30,31,30,31,31,30,31,30,31];function Iu(e,t){for(var r=new Date(e.getTime());t>0;){var n=ut(r.getFullYear()),a=r.getMonth(),o=(n?hn:vn)[a];if(t>o-r.getDate())t-=o-r.getDate()+1,r.setDate(1),a<11?r.setMonth(a+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+t),r}return r}function Ou(e,t){X.set(e,t)}function gn(e,t,r,n){var a=_[n+40>>2],o={tm_sec:_[n>>2],tm_min:_[n+4>>2],tm_hour:_[n+8>>2],tm_mday:_[n+12>>2],tm_mon:_[n+16>>2],tm_year:_[n+20>>2],tm_wday:_[n+24>>2],tm_yday:_[n+28>>2],tm_isdst:_[n+32>>2],tm_gmtoff:_[n+36>>2],tm_zone:a?ee(a):""},u=ee(r),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in c)u=u.replace(new RegExp(l,"g"),c[l]);var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"];function v(w,x,O){for(var $=typeof w=="number"?w.toString():w||"";$.length<x;)$=O[0]+$;return $}function g(w,x){return v(w,x,"0")}function C(w,x){function O(H){return H<0?-1:H>0?1:0}var $;return($=O(w.getFullYear()-x.getFullYear()))===0&&($=O(w.getMonth()-x.getMonth()))===0&&($=O(w.getDate()-x.getDate())),$}function k(w){switch(w.getDay()){case 0:return new Date(w.getFullYear()-1,11,29);case 1:return w;case 2:return new Date(w.getFullYear(),0,3);case 3:return new Date(w.getFullYear(),0,2);case 4:return new Date(w.getFullYear(),0,1);case 5:return new Date(w.getFullYear()-1,11,31);case 6:return new Date(w.getFullYear()-1,11,30)}}function P(w){var x=Iu(new Date(w.tm_year+1900,0,1),w.tm_yday),O=new Date(x.getFullYear(),0,4),$=new Date(x.getFullYear()+1,0,4),H=k(O),j=k($);return C(H,x)<=0?C(j,x)<=0?x.getFullYear()+1:x.getFullYear():x.getFullYear()-1}var T={"%a":function(w){return d[w.tm_wday].substring(0,3)},"%A":function(w){return d[w.tm_wday]},"%b":function(w){return m[w.tm_mon].substring(0,3)},"%B":function(w){return m[w.tm_mon]},"%C":function(w){var x=w.tm_year+1900;return g(x/100|0,2)},"%d":function(w){return g(w.tm_mday,2)},"%e":function(w){return v(w.tm_mday,2," ")},"%g":function(w){return P(w).toString().substring(2)},"%G":function(w){return P(w)},"%H":function(w){return g(w.tm_hour,2)},"%I":function(w){var x=w.tm_hour;return x==0?x=12:x>12&&(x-=12),g(x,2)},"%j":function(w){return g(w.tm_mday+Nu(ut(w.tm_year+1900)?hn:vn,w.tm_mon-1),3)},"%m":function(w){return g(w.tm_mon+1,2)},"%M":function(w){return g(w.tm_min,2)},"%n":function(){return`
`},"%p":function(w){return w.tm_hour>=0&&w.tm_hour<12?"AM":"PM"},"%S":function(w){return g(w.tm_sec,2)},"%t":function(){return"	"},"%u":function(w){return w.tm_wday||7},"%U":function(w){var x=w.tm_yday+7-w.tm_wday;return g(Math.floor(x/7),2)},"%V":function(w){var x=Math.floor((w.tm_yday+7-(w.tm_wday+6)%7)/7);if((w.tm_wday+371-w.tm_yday-2)%7<=2&&x++,x){if(x==53){var O=(w.tm_wday+371-w.tm_yday)%7;O!=4&&(O!=3||!ut(w.tm_year))&&(x=1)}}else{x=52;var $=(w.tm_wday+7-w.tm_yday-1)%7;($==4||$==5&&ut(w.tm_year%400-1))&&x++}return g(x,2)},"%w":function(w){return w.tm_wday},"%W":function(w){var x=w.tm_yday+7-(w.tm_wday+6)%7;return g(Math.floor(x/7),2)},"%y":function(w){return(w.tm_year+1900).toString().substring(2)},"%Y":function(w){return w.tm_year+1900},"%z":function(w){var x=w.tm_gmtoff,O=x>=0;return x=Math.abs(x)/60,x=x/60*100+x%60,(O?"+":"-")+String("0000"+x).slice(-4)},"%Z":function(w){return w.tm_zone},"%%":function(){return"%"}};u=u.replace(/%%/g,"\0\0");for(var l in T)u.includes(l)&&(u=u.replace(new RegExp(l,"g"),T[l](o)));u=u.replace(/\0\0/g,"%");var L=er(u,!1);return L.length>t?0:(Ou(L,e),L.length-1)}function Bu(e,t,r,n,a){return gn(e,t,r,n)}var bn=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=s.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},Bt=365,$t=146;Object.defineProperties(bn.prototype,{read:{get:function(){return(this.mode&Bt)===Bt},set:function(e){e?this.mode|=Bt:this.mode&=~Bt}},write:{get:function(){return(this.mode&$t)===$t},set:function(e){e?this.mode|=$t:this.mode&=~$t}},isFolder:{get:function(){return s.isDir(this.mode)}},isDevice:{get:function(){return s.isChrdev(this.mode)}}}),s.FSNode=bn,s.staticInit(),i.FS_createPath=s.createPath,i.FS_createDataFile=s.createDataFile,i.FS_createPreloadedFile=s.createPreloadedFile,i.FS_unlink=s.unlink,i.FS_createLazyFile=s.createLazyFile,i.FS_createDevice=s.createDevice,Fa(),Xe=i.BindingError=rr(Error,"BindingError"),qr=i.InternalError=rr(Error,"InternalError"),qa(),Oa(),eo(),Kr=i.UnboundTypeError=rr(Error,"UnboundTypeError"),fo(),i.requestFullscreen=function(e,t){b.requestFullscreen(e,t)},i.requestAnimationFrame=function(e){b.requestAnimationFrame(e)},i.setCanvasSize=function(e,t,r){b.setCanvasSize(e,t,r)},i.pauseMainLoop=function(){b.mainLoop.pause()},i.resumeMainLoop=function(){b.mainLoop.resume()},i.getUserMedia=function(){b.getUserMedia()},i.createContext=function(e,t,r,n){return b.createContext(e,t,r,n)},Q.staticInit();for(var y,Ne=0;Ne<32;++Ne)br.push(new Array(Ne));for(var $u=new Float32Array(288),Ne=0;Ne<288;++Ne)yr[Ne]=$u.subarray(0,Ne+1);var _n={__cxa_allocate_exception:ta,__cxa_throw:na,__syscall_chmod:ia,__syscall_fchmod:sa,__syscall_fcntl64:ca,__syscall_fstat64:la,__syscall_ftruncate64:fa,__syscall_getcwd:da,__syscall_getdents64:ma,__syscall_ioctl:pa,__syscall_lstat64:ha,__syscall_mkdirat:va,__syscall_newfstatat:ga,__syscall_openat:ba,__syscall_readlinkat:_a,__syscall_renameat:ya,__syscall_stat64:wa,__syscall_symlink:Ea,__syscall_unlinkat:Ca,_dlinit:xa,_dlopen_js:ka,_dlsym_js:Sa,_embind_register_bigint:Da,_embind_register_bool:ja,_embind_register_class:ao,_embind_register_class_class_function:oo,_embind_register_class_constructor:io,_embind_register_class_function:so,_embind_register_class_property:uo,_embind_register_emval:mo,_embind_register_enum:ho,_embind_register_enum_value:vo,_embind_register_float:bo,_embind_register_function:_o,_embind_register_integer:wo,_embind_register_memory_view:Eo,_embind_register_smart_ptr:Co,_embind_register_std_string:xo,_embind_register_std_wstring:jo,_embind_register_void:Ao,_emscripten_fetch_free:Mo,_emscripten_get_now_is_monotonic:Ro,_emval_as:No,_emval_call:Io,_emval_call_void_method:Bo,_emval_decref:lr,_emval_get_method_caller:Vo,_emval_get_module_property:Uo,_emval_get_property:zo,_emval_incref:Go,_emval_is_number:Wo,_emval_new_cstring:qo,_emval_run_destructors:Qo,_emval_set_property:Yo,_emval_take_value:Ho,_gmtime_js:Xo,_localtime_js:Zo,_mktime_js:ei,_mmap_js:ti,_munmap_js:ri,_tzset_js:ni,abort:ai,alBufferData:li,alDeleteBuffers:fi,alDeleteSources:di,alGenBuffers:mi,alGenSources:pi,alGetError:hi,alGetSourcei:vi,alGetString:gi,alSourcePause:bi,alSourcePlay:_i,alSourceStop:yi,alSourcef:wi,alSourcei:cn,alcCloseDevice:Ei,alcCreateContext:xi,alcDestroyContext:ki,alcGetError:Si,alcGetString:Di,alcMakeContextCurrent:Fi,alcOpenDevice:Pi,bnb_get_random_value:Zn,bnb_randombytes_init_if_needed:ea,create_video:Jn,delete_video:Kn,emscripten_date_now:Ti,emscripten_get_heap_max:ji,emscripten_get_now:Rt,emscripten_is_main_browser_thread:Ai,emscripten_memcpy_big:Mi,emscripten_resize_heap:Ri,emscripten_start_fetch:Oi,environ_get:Vi,environ_sizes_get:Ui,exit:si,fd_close:zi,fd_fdstat_get:Gi,fd_read:qi,fd_seek:Qi,fd_sync:Yi,fd_write:Xi,get_current_hostname:Xn,getaddrinfo:Zi,getentropy:Ot,glActiveTexture:is,glAttachShader:ss,glBindBuffer:us,glBindBufferRange:cs,glBindFramebuffer:ls,glBindRenderbuffer:fs,glBindTexture:ds,glBindVertexArray:ms,glBlendEquation:ps,glBlendFunc:hs,glBlendFuncSeparate:vs,glBlitFramebuffer:gs,glBufferData:bs,glBufferSubData:_s,glClearBufferfv:ys,glColorMask:ws,glCompileShader:Es,glCompressedTexImage2D:Cs,glCompressedTexImage3D:xs,glCopyTexSubImage2D:ks,glCreateProgram:Ss,glCreateShader:Ds,glDeleteBuffers:Fs,glDeleteFramebuffers:Ps,glDeleteProgram:Ts,glDeleteRenderbuffers:js,glDeleteShader:As,glDeleteTextures:Ms,glDeleteVertexArrays:Ls,glDepthFunc:Rs,glDepthMask:Ns,glDisable:Is,glDrawArrays:Os,glDrawArraysInstanced:Bs,glDrawBuffers:$s,glDrawElements:Vs,glDrawElementsInstanced:Us,glEnable:zs,glEnableVertexAttribArray:Gs,glFramebufferRenderbuffer:Ws,glFramebufferTexture2D:qs,glFrontFace:Qs,glGenBuffers:Ys,glGenFramebuffers:Hs,glGenRenderbuffers:Xs,glGenTextures:Js,glGenVertexArrays:Ks,glGenerateMipmap:Zs,glGetError:eu,glGetIntegerv:nu,glGetProgramInfoLog:au,glGetProgramiv:ou,glGetShaderInfoLog:iu,glGetShaderiv:su,glGetUniformLocation:cu,glInvalidateFramebuffer:lu,glLinkProgram:fu,glPixelStorei:du,glReadPixels:hu,glRenderbufferStorage:vu,glRenderbufferStorageMultisample:gu,glShaderSource:bu,glTexImage2D:_u,glTexImage3D:yu,glTexParameteri:wu,glTexStorage2D:Eu,glTexStorage3D:Cu,glTexSubImage2D:xu,glTexSubImage3D:ku,glUniform1f:Su,glUniform1i:Du,glUniform1ui:Fu,glUniform2f:Pu,glUniform2fv:Tu,glUniform4fv:ju,glUseProgram:Au,glVertexAttribIPointer:Mu,glVertexAttribPointer:Lu,glViewport:Ru,is_electron:Hn,strftime:gn,strftime_l:Bu};Yn(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};var we=i._malloc=function(){return(we=i._malloc=i.asm.malloc).apply(null,arguments)},yn=i.___errno_location=function(){return(yn=i.___errno_location=i.asm.__errno_location).apply(null,arguments)},Se=i._free=function(){return(Se=i._free=i.asm.free).apply(null,arguments)},wn=i.___getTypeName=function(){return(wn=i.___getTypeName=i.asm.__getTypeName).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm._embind_initialize_bindings).apply(null,arguments)};var Vt=i._htonl=function(){return(Vt=i._htonl=i.asm.htonl).apply(null,arguments)},Ut=i._htons=function(){return(Ut=i._htons=i.asm.htons).apply(null,arguments)},En=i._emscripten_builtin_memalign=function(){return(En=i._emscripten_builtin_memalign=i.asm.emscripten_builtin_memalign).apply(null,arguments)},Cn=i._ntohs=function(){return(Cn=i._ntohs=i.asm.ntohs).apply(null,arguments)},xn=i.___cxa_is_pointer_type=function(){return(xn=i.___cxa_is_pointer_type=i.asm.__cxa_is_pointer_type).apply(null,arguments)};i.dynCall_jii=function(){return(i.dynCall_jii=i.asm.dynCall_jii).apply(null,arguments)},i.dynCall_jiii=function(){return(i.dynCall_jiii=i.asm.dynCall_jiii).apply(null,arguments)},i.dynCall_viiij=function(){return(i.dynCall_viiij=i.asm.dynCall_viiij).apply(null,arguments)},i.dynCall_viijjiii=function(){return(i.dynCall_viijjiii=i.asm.dynCall_viijjiii).apply(null,arguments)},i.dynCall_iiiiji=function(){return(i.dynCall_iiiiji=i.asm.dynCall_iiiiji).apply(null,arguments)},i.dynCall_iiiijii=function(){return(i.dynCall_iiiijii=i.asm.dynCall_iiiijii).apply(null,arguments)},i.dynCall_iijjj=function(){return(i.dynCall_iijjj=i.asm.dynCall_iijjj).apply(null,arguments)},i.dynCall_viij=function(){return(i.dynCall_viij=i.asm.dynCall_viij).apply(null,arguments)},i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.dynCall_ji).apply(null,arguments)},i.dynCall_iiffj=function(){return(i.dynCall_iiffj=i.asm.dynCall_iiffj).apply(null,arguments)},i.dynCall_vijjiii=function(){return(i.dynCall_vijjiii=i.asm.dynCall_vijjiii).apply(null,arguments)},i.dynCall_viiiji=function(){return(i.dynCall_viiiji=i.asm.dynCall_viiiji).apply(null,arguments)},i.dynCall_viiijii=function(){return(i.dynCall_viiijii=i.asm.dynCall_viiijii).apply(null,arguments)},i.dynCall_vij=function(){return(i.dynCall_vij=i.asm.dynCall_vij).apply(null,arguments)},i.dynCall_iiiiiij=function(){return(i.dynCall_iiiiiij=i.asm.dynCall_iiiiiij).apply(null,arguments)},i.dynCall_viijji=function(){return(i.dynCall_viijji=i.asm.dynCall_viijji).apply(null,arguments)},i.dynCall_viiiij=function(){return(i.dynCall_viiiij=i.asm.dynCall_viiiij).apply(null,arguments)},i.dynCall_viiiiji=function(){return(i.dynCall_viiiiji=i.asm.dynCall_viiiiji).apply(null,arguments)},i.dynCall_iiiji=function(){return(i.dynCall_iiiji=i.asm.dynCall_iiiji).apply(null,arguments)},i.dynCall_jijjiii=function(){return(i.dynCall_jijjiii=i.asm.dynCall_jijjiii).apply(null,arguments)},i.dynCall_jijiii=function(){return(i.dynCall_jijiii=i.asm.dynCall_jijiii).apply(null,arguments)},i.dynCall_jijiiii=function(){return(i.dynCall_jijiiii=i.asm.dynCall_jijiiii).apply(null,arguments)},i.dynCall_jijii=function(){return(i.dynCall_jijii=i.asm.dynCall_jijii).apply(null,arguments)},i.dynCall_jijiiiiii=function(){return(i.dynCall_jijiiiiii=i.asm.dynCall_jijiiiiii).apply(null,arguments)},i.dynCall_jijj=function(){return(i.dynCall_jijj=i.asm.dynCall_jijj).apply(null,arguments)},i.dynCall_viji=function(){return(i.dynCall_viji=i.asm.dynCall_viji).apply(null,arguments)},i.dynCall_iijijjji=function(){return(i.dynCall_iijijjji=i.asm.dynCall_iijijjji).apply(null,arguments)},i.dynCall_iiiij=function(){return(i.dynCall_iiiij=i.asm.dynCall_iiiij).apply(null,arguments)},i.dynCall_iiji=function(){return(i.dynCall_iiji=i.asm.dynCall_iiji).apply(null,arguments)},i.dynCall_jijij=function(){return(i.dynCall_jijij=i.asm.dynCall_jijij).apply(null,arguments)},i.dynCall_iijijji=function(){return(i.dynCall_iijijji=i.asm.dynCall_iijijji).apply(null,arguments)},i.dynCall_jij=function(){return(i.dynCall_jij=i.asm.dynCall_jij).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.dynCall_viiijj=function(){return(i.dynCall_viiijj=i.asm.dynCall_viiijj).apply(null,arguments)},i.dynCall_iiij=function(){return(i.dynCall_iiij=i.asm.dynCall_iiij).apply(null,arguments)},i.dynCall_iijii=function(){return(i.dynCall_iijii=i.asm.dynCall_iijii).apply(null,arguments)},i.dynCall_iiijiji=function(){return(i.dynCall_iiijiji=i.asm.dynCall_iiijiji).apply(null,arguments)},i.dynCall_iiijiii=function(){return(i.dynCall_iiijiii=i.asm.dynCall_iiijiii).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.dynCall_viijii).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.dynCall_iiiiij).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.dynCall_iiiiijj).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.dynCall_iiiiiijj).apply(null,arguments)},i.dynCall_jjj=function(){return(i.dynCall_jjj=i.asm.dynCall_jjj).apply(null,arguments)},i.dynCall_iiiijj=function(){return(i.dynCall_iiiijj=i.asm.dynCall_iiiijj).apply(null,arguments)},i.dynCall_viijj=function(){return(i.dynCall_viijj=i.asm.dynCall_viijj).apply(null,arguments)},i.dynCall_viiijjjj=function(){return(i.dynCall_viiijjjj=i.asm.dynCall_viiijjjj).apply(null,arguments)},i.___start_em_js=1212948,i.___stop_em_js=1215082,i.addRunDependency=nt,i.removeRunDependency=Ve,i.FS_createPath=s.createPath,i.FS_createDataFile=s.createDataFile,i.FS_createPreloadedFile=s.createPreloadedFile,i.FS_createLazyFile=s.createLazyFile,i.FS_createDevice=s.createDevice,i.FS_unlink=s.unlink,i.FS=s,i.GL=E;var zt;rt=function e(){zt||kn(),zt||(rt=e)};function kn(e){if($e>0||($n(),$e>0))return;function t(){zt||(zt=!0,i.calledRun=!0,!Qe&&(Vn(),S(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Un()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return kn(),ln=function(){},i.ready}})();const ac=nc;var mt=(p=>(p.ERROR="error",p.WARNING="warn",p.INFO="info",p.DEBUG="debug",p))(mt||{});function oc(p){var h;const i=(h=Object.keys(mt).reverse().find(F=>typeof p[mt[F]]=="function"))!=null?h:"ERROR",S=F=>{for(const A in mt)if(F.includes(A)){const R=p[mt[A]];if(typeof R=="function"){R.call(p,F);return}}const M=p.debug;typeof M=="function"&&M.call(p,F)};return{logLevel:i,print:S,printErr:S}}const ic=(p,h)=>new Proxy(p,{get(i,S){const F=i[S];return typeof F=="function"?In(F,h):F}}),In=(p,h)=>new Proxy(p,{apply(i,S,F){try{const M=i.apply(S,F);return Nn(M)?ic(M,h):M}catch(M){throw typeof M=="number"&&(M=new Error(h(M))),M}}}),sc=(p,h)=>new Proxy(p,{construct(i,S){try{return new i(...S)}catch(F){throw typeof F=="number"&&(F=new Error(h(F))),F}},get(i,S){const F=i[S];return typeof F=="function"?In(F,h):F}}),uc=(p,h)=>{for(const[i,S]of Object.entries(p))Rn(S)&&Object.defineProperty(p,i,{value:sc(S,h)})},cc="recognizer_features_update";async function lc({clientToken:p,locateFile:h,canvas:i=Gu(),logger:S={warn:console.warn,error:console.error},...F}){const M=await Vu(h,S),{logLevel:A,print:R,printErr:re}=oc(S),U=await new Promise((V,ae)=>ac({locateFile:M,print:R,printErr:re,onAbort:me=>{me instanceof WebAssembly.CompileError&&ae(new Error(`Failed to compile "BanubaSDK.wasm": the file "${M("BanubaSDK.wasm")}" is invalid. This error is usually caused by misconfigured "locateFile" option, see https://docs.banuba.com/face-ar-sdk-v1/generated/typedoc/modules.html#SDKOptions. Original Error: `+me))},...F}).then(V,ae));return uc(U,V=>U.getExceptionMessage(V)),U.UtilityManager.initialize(new U.VectorString,p),U.UtilityManager.setLogLevel(U.SeverityLevel[A]),U.setCanvasSize=(V,ae)=>{Object.assign(i,{width:V,height:ae})},U.createContext(i,!0,!0,{alpha:!0,antialias:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!1}),U.canvas=i,U}const Ln=new Map,fc=(p,h,i)=>p*(1-i)+h*i,xr=p=>`webar::${p}:start`,Cr=p=>`webar::${p}:end`,Pr=p=>{performance.mark(xr(p))},Tr=p=>{performance.mark(Cr(p));let h=performance.measure(p,xr(p),Cr(p));h||(h=performance.getEntriesByName(p)[0]),performance.clearMarks(xr(p)),performance.clearMarks(Cr(p)),performance.clearMeasures(p);const{duration:i}=h;let{averagedDuration:S=0}=Ln.get(p)||{};return S=fc(S,i,.05),Ln.set(p,{averagedDuration:S}),{instantDuration:i,averagedDuration:S}};var dc=Object.defineProperty,mc=(p,h,i)=>h in p?dc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,Jt=(p,h,i)=>(mc(p,typeof h!="symbol"?h+"":h,i),i);const kr=class extends gt{constructor(p=1){super(),Jt(this,"_limit"),Jt(this,"_items",[]),this._limit=p}take(){return this._items.shift()}put(p){if(this._items.length>=this._limit){const h=this.take();this.dispatchEvent(new CustomEvent(kr.DISCARDED_EVENT,{detail:h}))}this._items.push(p),this.dispatchEvent(new CustomEvent(kr.EMERGED_EVENT,{detail:p}))}};let Ie=kr;Jt(Ie,"EMERGED_EVENT","emerged"),Jt(Ie,"DISCARDED_EVENT","discarded");var pc=Object.defineProperty,hc=(p,h,i)=>h in p?pc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,Te=(p,h,i)=>(hc(p,typeof h!="symbol"?h+"":h,i),i);const et=class extends gt{constructor({allocator:p,releaser:h}){super(),Te(this,"_conveyer",new Ie),Te(this,"_allocator"),Te(this,"_releaser"),Te(this,"_frames",async function*(){}()),Te(this,"_state","paused"),Te(this,"_fps",30),this._allocator=p,this._releaser=h,this._conveyer.addEventListener(Ie.DISCARDED_EVENT,({detail:i})=>this._releaser(i.data))}get isRunning(){return this._state!=="paused"}put(p,h){this._frames=p[Symbol.asyncIterator]({allocate:this._allocator,...h}),this.dispatchEvent(new CustomEvent(et.SOURCE_CHANGED_EVENT))}run({fps:p=this._fps}={}){this._fps=p,this._state!=="running"&&(this._state="running",(async()=>{for(;;){const h=this._frames;Pr(et.FRAME_RECEIVED_EVENT);const{done:i,value:S}=await this._frames.next(this._fps),F=Tr(et.FRAME_RECEIVED_EVENT);if(i)return this._state="paused",this.dispatchEvent(new CustomEvent(et.ENDED_EVENT));if(this._state==="paused")return this._releaser(S.data);if(h!==this._frames){this._releaser(S.data);continue}this._conveyer.put(S),this.dispatchEvent(new CustomEvent(et.FRAME_RECEIVED_EVENT,{detail:F}))}})())}pause(){this._state="paused"}take(){return this._conveyer.take()}};let je=et;Te(je,"FRAME_RECEIVED_EVENT","framereceived"),Te(je,"SOURCE_CHANGED_EVENT","sourcechanged"),Te(je,"ENDED_EVENT","ended");var vc=Object.defineProperty,gc=(p,h,i)=>h in p?vc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,Sr=(p,h,i)=>(gc(p,typeof h!="symbol"?h+"":h,i),i);const Yt=class extends gt{constructor(p){super(),Sr(this,"_doProcess"),Sr(this,"_conveyer",new Ie),this._doProcess=p,this._conveyer.addEventListener(Ie.DISCARDED_EVENT,({detail:h})=>h.data.delete())}put(p){Pr(Yt.FRAME_PROCESSED_EVENT);const h=this._doProcess(p),i=Tr(Yt.FRAME_PROCESSED_EVENT);this._conveyer.put(h),this.dispatchEvent(new CustomEvent(Yt.FRAME_PROCESSED_EVENT,{detail:i}))}take(){return this._conveyer.take()}};let pt=Yt;Sr(pt,"FRAME_PROCESSED_EVENT","frameprocessed");var bc=Object.defineProperty,_c=(p,h,i)=>h in p?bc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,ht=(p,h,i)=>(_c(p,typeof h!="symbol"?h+"":h,i),i);const Ht=class extends gt{constructor(p){super(),ht(this,"_doDraw"),ht(this,"_conveyer",new Ie),ht(this,"_state","paused"),ht(this,"_fps",30),this._doDraw=p,this._conveyer.addEventListener(Ie.DISCARDED_EVENT,({detail:h})=>h.data.delete())}get isRunning(){return this._state!=="paused"}get isPausing(){return this._state==="pausing"}get isPaused(){return this._state==="paused"}put(p){this._conveyer.put(p)}take(){return this._conveyer.take()}run({fps:p=this._fps}={}){if(this._fps=p,this._state==="pausing")this._state="running";else{if(this._state==="running")return;this._state="running"}(async()=>{let h=0;const i=S=>{const F=1e3/this._fps,M=.1*F;if(S-h<F-M){Qt(i);return}else h=S;this.draw(),this._state==="pausing"&&(this._state="paused"),this._state!=="paused"&&Qt(i)};Qt(i)})()}async pause(){if(this._state!=="paused"){for(this._state="pausing";this._state==="pausing";)await new Promise(p=>Qt(p));if(this._state!=="paused")throw new Error("The pause request was canceled")}}draw(){const p=this._conveyer.take();if(!p)return;Pr(Ht.FRAME_RENDERED_EVENT),this._doDraw(p);const h=Tr(Ht.FRAME_RENDERED_EVENT);this._conveyer.put(p),this.dispatchEvent(new CustomEvent(Ht.FRAME_RENDERED_EVENT,{detail:h}))}};let Dr=Ht;ht(Dr,"FRAME_RENDERED_EVENT","framerendered");var yc=Object.defineProperty,wc=(p,h,i)=>h in p?yc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,ce=(p,h,i)=>(wc(p,typeof h!="symbol"?h+"":h,i),i),Ec=Object.defineProperty,Cc=Object.getOwnPropertyDescriptor,xc=(p,h,i,S)=>{for(var F=S>1?void 0:S?Cc(h,i):h,M=p.length-1,A;M>=0;M--)(A=p[M])&&(F=(S?A(h,i,F):A(F))||F);return S&&F&&Ec(h,i,F),F};const kc={devicePixelRatio:typeof devicePixelRatio<"u"?devicePixelRatio:1,cameraOrientation:0,useFutureInterpolate:!0,logger:console};var qe;const ve=(qe=class extends gt{constructor(p,h={}){super(),ce(this,"_sdk"),ce(this,"_fs"),ce(this,"_preferences"),ce(this,"_frameSize"),ce(this,"_memory"),ce(this,"_releaser"),ce(this,"_effectPlayer"),ce(this,"_effectManager"),ce(this,"_camera"),ce(this,"_renderer"),this._sdk=p,this._fs=Ju(this._sdk),this._preferences={...kc,fps:30,pauseOnEmpty:!0,...h},this._frameSize={width:p.canvas.width,height:p.canvas.height},this._memory=new Xu(this._sdk),this._releaser=A=>this._memory.release(A),this._effectPlayer=this._sdk.EffectPlayer.create(this._sdk.EffectPlayerConfiguration.create(this._frameSize.width,this._frameSize.height)),this._effectPlayer.surfaceCreated(this._frameSize.width,this._frameSize.height),this._effectPlayer.setRecognizerUseFutureInterpolate(this._preferences.useFutureInterpolate),this._effectPlayer.addFrameDataListener(A=>{this.dispatchEvent(new CustomEvent(ve.FRAME_DATA_EVENT,{detail:new rc(A)}))}),this._effectManager=this._effectPlayer.effectManager(),this._effectManager.addEffectActivatedListener(()=>{const A=this._effectManager.current();this.dispatchEvent(new CustomEvent(ve.EFFECT_ACTIVATED_EVENT,{detail:A}))});const i=this._camera=new je({allocator:A=>(this._memory.allocate(A)||new Yu(A)).data,releaser:A=>this._releaser(A.byteOffset)});let S=!1;const F=new pt(A=>{var R;const{width:re,height:U,data:V,format:ae,input:me="static"}=A,oe=me==="static",ge=me==="static"?3:1,Z=V instanceof this._sdk.FrameData?V:this._sdk.FrameData.makeFromBpc8(V.byteOffset,this._releaser,re,U,this._sdk.CameraOrientation[`DEG_${this._preferences.cameraOrientation}`],this._sdk.PixelFormat[ae],!1,0);S||(oe&&(Z.addTimestampUs(0),(R=this._effectManager.current())==null||R.reset()),this._effectPlayer.startVideoProcessing(re,U,this._sdk.CameraOrientation[`DEG_${this._preferences.cameraOrientation}`],!1,oe),S=!0);const Kt=this._effectPlayer.processVideoFrameData(Z,ge);return Z!==V&&Z.delete(),{width:re,height:U,data:Kt}}),M=this._renderer=new Dr(({width:A,height:R,data:re})=>{var U,V,ae,me;if(this._frameSize.width!==A||this._frameSize.height!==R){Object.assign(this._frameSize,{width:A,height:R});const{width:oe,height:ge}=Dc(A,R,this._preferences.devicePixelRatio);this._sdk.setCanvasSize(oe,ge),this._effectManager.setEffectSize(oe,ge),this._effectPlayer.surfaceChanged(oe,ge)}try{this._effectPlayer.drawWithExternalFrameData(re);const oe=this._sdk.ctx;oe instanceof WebGLRenderingContext||oe.bindFramebuffer(oe.READ_FRAMEBUFFER,null)}catch(oe){oe instanceof WebAssembly.RuntimeError&&this.pause(),this.clearEffect(),(V=(U=this._preferences.logger).warn)==null||V.call(U,"The effect was force cleared due to the exception:"),(me=(ae=this._preferences.logger).error)==null||me.call(ae,oe)}});i.addEventListener(je.FRAME_RECEIVED_EVENT,({detail:A})=>this.dispatchEvent(new CustomEvent(ve.FRAME_RECEIVED_EVENT,{detail:A}))),i.addEventListener(je.FRAME_RECEIVED_EVENT,function A(){const R=i.take();R&&jn(()=>F.put(R)),i.addEventListener(je.FRAME_RECEIVED_EVENT,A,{once:!0})},{once:!0}),i.addEventListener(je.SOURCE_CHANGED_EVENT,()=>{!S||(this._effectPlayer.stopVideoProcessing(!1),S=!1)}),i.addEventListener(je.ENDED_EVENT,()=>{this._preferences.pauseOnEmpty&&this.pause()}),F.addEventListener(pt.FRAME_PROCESSED_EVENT,({detail:A})=>this.dispatchEvent(new CustomEvent(ve.FRAME_PROCESSED_EVENT,{detail:A}))),F.addEventListener(pt.FRAME_PROCESSED_EVENT,function A(){const R=F.take();R&&M.put(R),F.addEventListener(pt.FRAME_PROCESSED_EVENT,A,{once:!0})},{once:!0}),M.addEventListener(Dr.FRAME_RENDERED_EVENT,({detail:A})=>this.dispatchEvent(new CustomEvent(ve.FRAME_RENDERED_EVENT,{detail:A}))),this._effectManager.addEffectEventListener(async A=>{if(A===cc){if(await new Promise(R=>jn(R)),!i.isRunning){const R=F.take()||M.take();R&&F.put(R)}M.isRunning||this._renderer.draw()}}),this.setVolume(0)}static async create(p){const h=await lc(p);return new this(h,p)}get FS(){return this._fs}get canvas(){return this._sdk.canvas}get frameSize(){return this._frameSize}get preferences(){return this._preferences}get isPlaying(){return this._renderer.isRunning}use(p,h){this._camera.put(p,h),this._renderer.isRunning&&!this._renderer.isPausing&&this._camera.run()}async addModule(...p){await Promise.all(p.map(h=>h._bind({FS:this.FS})))}async applyEffect(p){const h=this,i=p.name;return await p._bind({FS:this.FS,evalJs:this._evalJs.bind(this),callJsMethod:this._callJsMethod.bind(this)}),new Promise(S=>{var F,M,A,R;this.addEventListener(ve.EFFECT_ACTIVATED_EVENT,re,{once:!0}),this.addEventListener(ve.EFFECT_ACTIVATED_EVENT,U);try{this._effectManager.load(i)}catch(V){this.removeEventListener(ve.EFFECT_ACTIVATED_EVENT,re),this.removeEventListener(ve.EFFECT_ACTIVATED_EVENT,U),p._unbind(),this.clearEffect(),(M=(F=this._preferences.logger).warn)==null||M.call(F,"The effect was force cleared due to the exception:"),(R=(A=this._preferences.logger).error)==null||R.call(A,V)}function re({detail:V}){S(V)}function U({detail:V}){V.url()!==`/${i}/`&&(h.removeEventListener(ve.EFFECT_ACTIVATED_EVENT,U),p._unbind())}})}async clearEffect(){return new Promise(p=>{this.addEventListener(ve.EFFECT_ACTIVATED_EVENT,()=>p(),{once:!0}),this._effectManager.load("")})}callJsMethod(p,h=""){return this._callJsMethod(p,h)}setVolume(p){this._effectManager.setEffectVolume(p),this.dispatchEvent(new CustomEvent("volumechange",{detail:p}))}play({fps:p=this._preferences.fps,pauseOnEmpty:h=!0}={}){Object.assign(this._preferences,{fps:p,pauseOnEmpty:h}),this._camera.run({fps:p}),this._renderer.run({fps:p})}async pause(){this._camera.pause();try{await this._renderer.pause()}catch(p){throw this._camera.run(),p}}async destroy(){await this.pause(),this.removeAllEventListeners(),await this.clearEffect(),this._effectPlayer.surfaceDestroyed(),this._effectPlayer.delete(),this._memory.reset();for(const p in this)p.startsWith("_")&&Object.defineProperty(this,p,{get(){throw new Error("The player is destroyed.")},set(){throw new Error("The player is destroyed.")}})}async _evalJs(p){return new Promise(async h=>{const i=this._effectManager.current().evalJsSync(p);h(i),this._renderer.isRunning||this._renderer.draw()})}async _callJsMethod(p,h=""){this._effectManager.current().callJsMethod(p,h),this._renderer.isRunning||this._renderer.draw()}},ce(qe,"FRAME_RECEIVED_EVENT","framereceived"),ce(qe,"FRAME_PROCESSED_EVENT","frameprocessed"),ce(qe,"FRAME_RENDERED_EVENT","framerendered"),ce(qe,"FRAME_DATA_EVENT","framedata"),ce(qe,"EFFECT_ACTIVATED_EVENT","effectactivated"),qe);let Sc=ve;xc([Uu("Please, use Effect.evalJs() instead.")],Sc.prototype,"callJsMethod",1);function Dc(p,h,i){const S=Math.round(self.devicePixelRatio),[F,M]=[screen.width*S,screen.height*S],A=Math.max(1,F/p),R=Math.max(1,M/h),re=Math.max(A,R);i=Math.min(i,re);const U=p*i,V=h*i;return{width:U,height:V}}var Fc=Object.defineProperty,Pc=(p,h,i)=>h in p?Fc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,Tc=(p,h,i)=>(Pc(p,typeof h!="symbol"?h+"":h,i),i);class Vc{constructor(h){Tc(this,"_player"),Fr(h),this._player=h}async takePhoto(h){var i,S;const F=this._player.canvas,{width:M,height:A}=this._player.frameSize,R=jc(F,(i=h==null?void 0:h.width)!=null?i:M,(S=h==null?void 0:h.height)!=null?S:A);return await new Promise((re,U)=>{var V;return R.toBlob(ae=>ae?re(ae):U(new Error("Unexpected error: Unable to create Blob")),(V=h==null?void 0:h.type)!=null?V:"image/jpeg",h==null?void 0:h.quality)})}}const jc=(p,h=p.width,i=p.height)=>{if(h!==p.width||i!==p.height){const S=Ac(h,i);return S.getContext("2d").drawImage(p,0,0,S.width,S.height),S}return p},Ac=(p,h)=>{let i;return zu?(i=new OffscreenCanvas(p,h),i.toBlob=function(S,F,M){this.convertToBlob({type:F,quality:M}).then(S).catch(A=>S(null))}):(i=document.createElement("canvas"),i.width=p,i.height=h),i};var Mc=Object.defineProperty,Lc=(p,h,i)=>h in p?Mc(p,h,{enumerable:!0,configurable:!0,writable:!0,value:i}):p[h]=i,Rc=(p,h,i)=>(Lc(p,typeof h!="symbol"?h+"":h,i),i);const Nc=typeof MediaStream<"u"?MediaStream:class{constructor(){throw new Error("The environment does not support MediaStream API")}},Xt=class extends Nc{constructor(p){Fr(p),super();const h=Xt.cache.get(p);if(!h||!h.active){let i=p.canvas;if(((i.getContext("webgl2")||i.getContext("webgl")).getContextAttributes()||{}).alpha){const S=i,F=(i=document.createElement("canvas")).getContext("2d",{alpha:!1});p.addEventListener("framerendered",()=>{F.canvas.width=S.width,F.canvas.height=S.height,F.drawImage(S,0,0,S.width,S.height)})}i.captureStream().getTracks().forEach(S=>this.addTrack(S)),Xt.cache.set(p,this)}return Xt.cache.get(p)}getVideoTrack(p=0){return this.getVideoTracks()[p]}getAudioTrack(p=0){return this.getAudioTracks()[p]}stop(){this.getTracks().forEach(p=>p.stop())}};let Ic=Xt;Rc(Ic,"cache",new WeakMap);const Oc=typeof MediaRecorder<"u"?MediaRecorder:class{constructor(){throw new Error("The environment does not support MediaRecorder API")}};class Uc extends Oc{constructor(h,i){Fr(h);const S=h.canvas.captureStream();super(S,i)}async stop(){return new Promise((h,i)=>{const S=M=>{super.removeEventListener("dataavailable",S),super.removeEventListener("error",F),h(M.data)},F=M=>{super.removeEventListener("dataavailable",S),super.removeEventListener("error",F),i(M)};super.addEventListener("dataavailable",S),super.addEventListener("error",F),super.stop()})}}const zc="1.8.0.1-120-g046736fb82";export{qc as Dom,Qc as Effect,rc as FrameData,Yc as Image,Vc as ImageCapture,Hc as MediaStream,Ic as MediaStreamCapture,Xc as Module,il as OffscreenPlayer,Sc as Player,zc as VERSION,Jc as Video,Uc as VideoRecorder,Kc as Webcam,lc as createSDK,kc as defaultPlayerOptions,Zc as defaultVideoConstraints,el as defaultVideoOptions,ul as isBrowserSupported,tl as isOffscreenPlayerSupported,rl as isSimdSupported,nl as timers,al as utils};
//# sourceMappingURL=index.ee67da13.js.map
