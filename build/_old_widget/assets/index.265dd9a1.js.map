{"version":3,"file":"index.265dd9a1.js","sources":["../../src/pages/image-source/ImageSource.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { analytics } from \"@lib/analytics\"\n  import { routerPath, useRouter } from \"@lib/router\"\n  import { Paths } from \"@lib/router\"\n  import { setGift, setSourceChanged } from \"@pages/gift\"\n  import BestMatch from \"../best-match\"\n  import source, { type ImageSource } from \"../best-match/stores/image-source\"\n  import * as sca from \"../face-analysis/state\"\n  import ImageSourceSelector from \"./ImageSourceSelector\"\n\n  const router = useRouter()\n\n  let src: ImageSource = null\n\n  const redirect = () => {\n    if ($routerPath.current === Paths.SkinCare && $routerPath.previous === Paths.GiftSelection)\n      router.push(Paths.SkinCare)\n    else router.push(Paths.BestMatch)\n  }\n\n  $: src && ($source = src)\n  $: src && redirect()\n</script>\n\n{#if !source.isEmpty()}\n  <BestMatch />\n  <div class=\"tint-image-source-overlay backdrop-blur\">\n    <div class=\"tint-image-source\">\n      <ImageSourceSelector\n        on:webcam={({ detail: granted }) => {\n          setGift(false)\n          granted\n            ? (sca.clear(), (src = { type: \"webcam\" }))\n            : alert(\"Please, grant the camera permission to use this feature\")\n        }}\n        on:photo={({ detail: photo }) => (sca.clear(), (src = { type: \"photo\", data: photo }))}\n        on:photo={() => analytics.photo_uploaded()}\n        on:photo={() => setGift(false)}\n        on:skip={() => {\n          setGift(false)\n          setSourceChanged(false)\n          router.push($routerPath.current)\n        }}\n        on:webcam={({ detail: granted }) => {\n          analytics.live_camera_clicked()\n          analytics.camera_permission(granted)\n        }}\n        showSkip={!source.isEmpty()}\n      />\n    </div>\n  </div>\n{:else}\n  <div class=\"tint-image-source-overlay\">\n    <div class=\"tint-image-source\">\n      <ImageSourceSelector\n        on:webcam={({ detail: granted }) => {\n          granted\n            ? (sca.clear(), (src = { type: \"webcam\" }))\n            : alert(\"Please, grant the camera permission to use this feature\")\n        }}\n        on:photo={({ detail: photo }) => (sca.clear(), (src = { type: \"photo\", data: photo }))}\n        on:photo={() => analytics.photo_uploaded()}\n        on:skip={() => {\n          setSourceChanged(false)\n          router.push($routerPath.current)\n        }}\n        on:webcam={({ detail: granted }) => {\n          analytics.live_camera_clicked()\n          analytics.camera_permission(granted)\n        }}\n        showSkip={!source.isEmpty()}\n      />\n    </div>\n  </div>\n{/if}\n\n<style lang=\"postcss\">\n  div.tint-image-source-overlay {\n    @apply absolute top-0 left-0 z-10 flex h-full w-full items-center justify-center bg-black/30;\n  }\n  div.tint-image-source {\n    @apply relative z-10 bg-white;\n    @apply w-full max-w-[22.375rem] rounded-xl px-10 py-8;\n    @apply md:max-w-[40rem] md:py-10 md:px-20;\n  }\n</style>\n"],"names":["imagesourceselector","ImageSourceSelector","source","insert","target","div1","anchor","append","div0","router","useRouter","src","redirect","$routerPath","Paths","webcam_handler","granted","setGift","sca.clear","$$invalidate","photo_handler","photo","photo_handler_1","analytics","photo_handler_2","setSourceChanged","webcam_handler_1","webcam_handler_2","photo_handler_3","photo_handler_4","webcam_handler_3","set_store_value","$source"],"mappings":"y5BAsEmB,OAAAA,EAAA,IAAAC,EAAA,CAAA,MAAA,CAAA,SAAA,CAAAC,EAAO,SAAO,CAAA,CAAA,mQAlB/BC,EAqBKC,EAAAC,EAAAC,CAAA,EApBHC,EAmBKF,EAAAG,CAAA,8JAzBUR,EAAA,IAAAC,EAAA,CAAA,MAAA,CAAA,SAAA,CAAAC,EAAO,SAAO,CAAA,CAAA,0UArB/BC,EAwBKC,EAAAC,EAAAC,CAAA,EAvBHC,EAsBKF,EAAAG,CAAA,+NAzBH,OAAAN,EAAO,QAAO,IAAA,oOAdZ,MAAAO,EAASC,IAEX,IAAAC,EAAmB,WAEjBC,EAAQ,IAAA,CACRC,EAAY,UAAYC,EAAM,UAAYD,EAAY,WAAaC,EAAM,cAC3EL,EAAO,KAAKK,EAAM,QAAQ,EACvBL,EAAO,KAAKK,EAAM,SAAS,GAYdC,EAAA,CAAA,CAAA,OAAQC,CAAO,IAAA,CAC3BC,EAAQ,EAAK,EACbD,GACKE,EAAS,EAAAC,EAAA,EAAKR,EAAQ,CAAA,KAAM,SAAQ,GACrC,MAAM,yDAAyD,GAExDS,EAAA,CAAA,CAAA,OAAQC,CAAa,KAAAH,EAAS,EAAAC,EAAA,EAAKR,EAAG,CAAK,KAAM,QAAS,KAAMU,CAAK,CAAA,GAClEC,EAAA,IAAAC,EAAU,iBACVC,EAAA,IAAAP,EAAQ,EAAK,SAE3BA,EAAQ,EAAK,EACbQ,EAAiB,EAAK,EACtBhB,EAAO,KAAKI,EAAY,OAAO,GAEnBa,EAAA,CAAA,CAAA,OAAQV,CAAO,IAAA,CAC3BO,EAAU,oBAAmB,EAC7BA,EAAU,kBAAkBP,CAAO,GAUvBW,EAAA,CAAA,CAAA,OAAQX,CAAO,IAAA,CAC3BA,GACKE,EAAS,EAAAC,EAAA,EAAKR,EAAQ,CAAA,KAAM,SAAQ,GACrC,MAAM,yDAAyD,GAExDiB,EAAA,CAAA,CAAA,OAAQP,CAAa,KAAAH,EAAS,EAAAC,EAAA,EAAKR,EAAG,CAAK,KAAM,QAAS,KAAMU,CAAK,CAAA,GAClEQ,EAAA,IAAAN,EAAU,wBAExBE,EAAiB,EAAK,EACtBhB,EAAO,KAAKI,EAAY,OAAO,GAEnBiB,EAAA,CAAA,CAAA,OAAQd,CAAO,IAAA,CAC3BO,EAAU,oBAAmB,EAC7BA,EAAU,kBAAkBP,CAAO,yCAhDxCL,GAAQoB,EAAA7B,EAAA8B,EAAUrB,EAAGqB,CAAA,gBACrBrB,GAAOC,EAAQ"}